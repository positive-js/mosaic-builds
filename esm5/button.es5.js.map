{"version":3,"file":"button.es5.js","sources":["../../../packages/mosaic/button/button.module.ts","../../../packages/mosaic/button/button.component.ts"],"sourcesContent":["import { A11yModule } from '@angular/cdk/a11y';\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport {\n    McButton,\n    McAnchor,\n    McButtonCssStyler\n} from './button.component';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        A11yModule,\n        PlatformModule\n    ],\n    exports: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ],\n    declarations: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ]\n})\nexport class McButtonModule {}\n","import { FocusMonitor } from '@angular/cdk/a11y';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    Directive,\n    ElementRef,\n    OnDestroy,\n    ViewEncapsulation,\n    Renderer2\n} from '@angular/core';\nimport { mixinColor, mixinDisabled, CanColor, CanDisable, CanDisableCtor, CanColorCtor } from '@ptsecurity/mosaic/core';\n\n\n@Directive({\n    selector: 'button[mc-button], a[mc-button]',\n    host: {\n        '[class.mc-button]': '!isIconButton',\n        '[class.mc-icon-button]': 'isIconButton'\n    }\n})\nexport class McButtonCssStyler {\n    nativeElement: Element;\n\n    get isIconButton(): boolean {\n        return this.icons.length > 0;\n    }\n\n    private icons: HTMLElement[] = [];\n\n    constructor(\n        elementRef: ElementRef,\n        private renderer: Renderer2\n    ) {\n        this.nativeElement = elementRef.nativeElement;\n    }\n\n    ngAfterContentInit() {\n        /**\n         * Here we had to use native selectors due to number of angular issues about ContentChildren limitations\n         * https://github.com/angular/angular/issues/16299\n         * https://github.com/angular/angular/issues/8563\n         * https://github.com/angular/angular/issues/14769\n         */\n        this.icons = Array.from(this.nativeElement.querySelectorAll('.mc-icon'));\n        this.addClassModificatorForIcons();\n    }\n\n    private addClassModificatorForIcons() {\n        const twoIcons = 2;\n        const [firstIconElement, secondIconElement] = this.icons;\n\n        if (this.icons.length === 1) {\n            const COMMENT_NODE = 8;\n\n            if (firstIconElement.nextSibling && firstIconElement.nextSibling.nodeType !== COMMENT_NODE) {\n                this.renderer.addClass(firstIconElement, 'mc-icon_left');\n                this.renderer.addClass(this.nativeElement, 'mc-icon-button_left');\n            }\n\n            if (firstIconElement.previousSibling && firstIconElement.previousSibling.nodeType !== COMMENT_NODE) {\n                this.renderer.addClass(firstIconElement, 'mc-icon_right');\n                this.renderer.addClass(this.nativeElement, 'mc-icon-button_right');\n            }\n        } else if (this.icons.length === twoIcons) {\n            this.renderer.addClass(firstIconElement, 'mc-icon_left');\n            this.renderer.addClass(secondIconElement, 'mc-icon_right');\n        }\n    }\n}\n\nexport class McButtonBase {\n    // tslint:disable-next-line:naming-convention\n    constructor(public _elementRef: ElementRef) {}\n}\n\n// tslint:disable-next-line:naming-convention\nexport const McButtonMixinBase:\n    CanDisableCtor &\n    CanColorCtor &\n    typeof McButtonBase =\n        mixinColor(mixinDisabled(McButtonBase));\n\n\n@Component({\n    selector: 'button[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color'],\n    host: {\n        '[disabled]': 'disabled || null'\n    }\n})\nexport class McButton extends McButtonMixinBase implements OnDestroy, CanDisable, CanColor {\n    constructor(elementRef: ElementRef, private _focusMonitor: FocusMonitor) {\n        super(elementRef);\n\n        this._focusMonitor.monitor(this._elementRef.nativeElement, true);\n    }\n\n    ngOnDestroy() {\n        this._focusMonitor.stopMonitoring(this._elementRef.nativeElement);\n    }\n\n    focus(): void {\n        this.getHostElement().focus();\n    }\n\n    getHostElement() {\n        return this._elementRef.nativeElement;\n    }\n}\n\n\n@Component({\n    selector: 'a[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color'],\n    host: {\n        '[attr.tabindex]': 'disabled ? -1 : 0',\n        '[attr.disabled]': 'disabled || null',\n        '(click)': 'haltDisabledEvents($event)'\n    }\n})\nexport class McAnchor extends McButton {\n    constructor(focusMonitor: FocusMonitor, elementRef: ElementRef) {\n        super(elementRef, focusMonitor);\n    }\n\n    haltDisabledEvents(event: Event) {\n        if (this.disabled) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n        }\n    }\n}\n"],"names":["tslib_1.__extends"],"mappings":"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"}