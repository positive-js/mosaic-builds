{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../packages/mosaic/schematics/ng-update/index.ts"],"names":[],"mappings":";;AACA,wDAA2E;AAC3E,iCAAsC;AAEtC,4FAAsF;AACtF,iDAAmD;AAGnD,MAAM,oBAAoB,GAAG;IACzB,sDAAwB;CAC3B,CAAC;AAEF,SAAgB,UAAU;IACtB,OAAO,8BAAiB,CACpB,0BAAa,CAAC,EAAE,EAAE,oBAAoB,EAAE,gCAAiB,EAAE,mBAAmB,CAAC,CAAC;AACxF,CAAC;AAHD,gCAGC;AAGD,SAAS,mBAAmB,CAAC,OAAyB,EAAE,aAA4B,EAAE,WAAoB;IAEtG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,aAAK,CAAC,qBAAqB,aAAa,EAAE,CAAC,CAAC,CAAC;IAEjE,IAAI,WAAW,EAAE;QACb,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,cAAM,CACtB,oFAAoF;YACpF,6CAA6C,CAAC,CAAC,CAAC;KACvD;AACL,CAAC","sourcesContent":["import { Rule, SchematicContext } from '@angular-devkit/schematics';\nimport { createUpgradeRule, TargetVersion } from '@angular/cdk/schematics';\nimport { green, yellow } from 'chalk';\n\nimport { SecondaryEntryPointsRule } from './update-9.0.0/secondary-entry-points-rule';\nimport { mosaicUpgradeData } from './upgrade-data';\n\n\nconst mosaicMigrationRules = [\n    SecondaryEntryPointsRule\n];\n\nexport function updateToV9(): Rule {\n    return createUpgradeRule(\n        TargetVersion.V9, mosaicMigrationRules, mosaicUpgradeData, onMigrationComplete);\n}\n\n\nfunction onMigrationComplete(context: SchematicContext, targetVersion: TargetVersion, hasFailures: boolean): void {\n\n    context.logger.info(green(`Updated Mosaic to ${targetVersion}`));\n\n    if (hasFailures) {\n        context.logger.warn(yellow(\n            ' Some issues were detected but could not be fixed automatically. Please check the ' +\n            'output above and fix these issues manually.'));\n    }\n}\n"]}