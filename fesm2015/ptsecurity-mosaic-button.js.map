{"version":3,"file":"ptsecurity-mosaic-button.js","sources":["../../../packages/mosaic/button/button.component.ts","../../../packages/mosaic/button/button.module.ts","../../../packages/mosaic/button/ptsecurity-mosaic-button.ts"],"sourcesContent":["import { FocusMonitor } from '@angular/cdk/a11y';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    Directive,\n    ElementRef,\n    OnDestroy,\n    ViewEncapsulation,\n    Renderer2,\n    QueryList,\n    ContentChildren,\n    AfterContentInit\n} from '@angular/core';\nimport {\n    mixinColor,\n    mixinDisabled,\n    mixinTabIndex,\n    CanColor,\n    CanDisable,\n    CanDisableCtor,\n    CanColorCtor,\n    HasTabIndexCtor\n} from '@ptsecurity/mosaic/core';\nimport { McIcon } from '@ptsecurity/mosaic/icon';\n\n\n@Directive({\n    selector: 'button[mc-button], a[mc-button]',\n    host: {\n        '[class.mc-button]': '!isIconButton',\n        '[class.mc-icon-button]': 'isIconButton'\n    }\n})\nexport class McButtonCssStyler implements AfterContentInit {\n    @ContentChildren(McIcon, { descendants: true }) icons: QueryList<McIcon>;\n\n    nativeElement: Element;\n\n    get isIconButton(): boolean {\n        return this.icons.length > 0;\n    }\n\n    constructor(elementRef: ElementRef, private renderer: Renderer2) {\n        this.nativeElement = elementRef.nativeElement;\n    }\n\n    ngAfterContentInit() {\n        this.updateClassModifierForIcons();\n    }\n\n    updateClassModifierForIcons() {\n        const twoIcons = 2;\n        const [firstIconElement, secondIconElement] = this.icons.map((item) => item.getHostElement());\n\n        if (this.icons.length === 1) {\n            this.renderer.removeClass(firstIconElement, 'mc-icon_left');\n            this.renderer.removeClass(this.nativeElement, 'mc-icon-button_left');\n            this.renderer.removeClass(firstIconElement, 'mc-icon_right');\n            this.renderer.removeClass(this.nativeElement, 'mc-icon-button_right');\n\n            const COMMENT_NODE = 8;\n\n            if (firstIconElement.nextSibling && firstIconElement.nextSibling.nodeType !== COMMENT_NODE) {\n                this.renderer.addClass(firstIconElement, 'mc-icon_left');\n                this.renderer.addClass(this.nativeElement, 'mc-icon-button_left');\n            }\n\n            if (firstIconElement.previousSibling && firstIconElement.previousSibling.nodeType !== COMMENT_NODE) {\n                this.renderer.addClass(firstIconElement, 'mc-icon_right');\n                this.renderer.addClass(this.nativeElement, 'mc-icon-button_right');\n            }\n        } else if (this.icons.length === twoIcons) {\n            this.renderer.addClass(firstIconElement, 'mc-icon_left');\n            this.renderer.addClass(secondIconElement, 'mc-icon_right');\n        }\n    }\n}\n\nexport class McButtonBase {\n    // tslint:disable-next-line:naming-convention\n    constructor(public _elementRef: ElementRef) {}\n}\n\n// tslint:disable-next-line:naming-convention\nexport const McButtonMixinBase: HasTabIndexCtor & CanDisableCtor & CanColorCtor &\n    typeof McButtonBase = mixinTabIndex(mixinColor(mixinDisabled(McButtonBase)));\n\n\n@Component({\n    selector: 'button[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color'],\n    host: {\n        '[attr.disabled]': 'disabled || null'\n    }\n})\nexport class McButton extends McButtonMixinBase implements OnDestroy, CanDisable, CanColor {\n    constructor(elementRef: ElementRef, private _focusMonitor: FocusMonitor) {\n        super(elementRef);\n\n        this._focusMonitor.monitor(this._elementRef.nativeElement, true);\n    }\n\n    ngOnDestroy() {\n        this._focusMonitor.stopMonitoring(this._elementRef.nativeElement);\n    }\n\n    focus(): void {\n        this.getHostElement().focus();\n    }\n\n    focusViaKeyboard(): void {\n        this._focusMonitor.focusVia(this.getHostElement(), 'keyboard');\n    }\n\n    getHostElement() {\n        return this._elementRef.nativeElement;\n    }\n}\n\n\n@Component({\n    selector: 'a[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['button.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color', 'tabIndex'],\n    host: {\n        '[attr.tabindex]': 'tabIndex',\n        '[attr.disabled]': 'disabled || null',\n        '(click)': 'haltDisabledEvents($event)'\n    }\n})\nexport class McAnchor extends McButton {\n    constructor(focusMonitor: FocusMonitor, elementRef: ElementRef) {\n        super(elementRef, focusMonitor);\n    }\n\n    haltDisabledEvents(event: Event) {\n        if (this.disabled) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n        }\n    }\n}\n","import { A11yModule } from '@angular/cdk/a11y';\nimport { PlatformModule } from '@angular/cdk/platform';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport {\n    McButton,\n    McAnchor,\n    McButtonCssStyler\n} from './button.component';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        A11yModule,\n        PlatformModule\n    ],\n    exports: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ],\n    declarations: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ]\n})\nexport class McButtonModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}