{"version":3,"file":"button.js","sources":["../../../src/lib/button/button.module.ts","../../../src/lib/button/button.component.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { A11yModule } from '@ptsecurity/cdk/a11y';\nimport { PlatformModule } from '@ptsecurity/cdk/platform';\n\nimport {\n    McButton,\n    McAnchor,\n    McButtonCssStyler\n} from './button.component';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        A11yModule,\n        PlatformModule\n    ],\n    exports: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ],\n    declarations: [\n        McButton,\n        McAnchor,\n        McButtonCssStyler\n    ]\n})\nexport class McButtonModule {}\n","import {\n    ChangeDetectionStrategy,\n    Component,\n    Directive,\n    ElementRef,\n    OnDestroy,\n    ViewEncapsulation\n} from '@angular/core';\nimport { FocusMonitor } from '@ptsecurity/cdk/a11y';\nimport { mixinColor, mixinDisabled, CanColor, CanDisable, CanDisableCtor, CanColorCtor } from '@ptsecurity/mosaic/core';\n\n\n@Directive({\n    selector: 'button[mc-button], a[mc-button]',\n    host: {\n        '[class.mc-button]': '!isIconButton',\n        '[class.mc-icon-button]': 'isIconButton'\n    }\n})\nexport class McButtonCssStyler {\n    nativeElement: Element;\n\n    get isIconButton(): boolean {\n        return this.icons.length > 0;\n    }\n\n    private icons: HTMLElement[] = [];\n\n    constructor(elementRef: ElementRef) {\n        this.nativeElement = elementRef.nativeElement;\n    }\n\n    ngAfterContentInit() {\n        /**\n         * Here we had to use native selectors due to number of angular issues about ContentChildren limitations\n         * https://github.com/angular/angular/issues/16299\n         * https://github.com/angular/angular/issues/8563\n         * https://github.com/angular/angular/issues/14769\n         */\n        this.icons = Array.from(this.nativeElement.querySelectorAll('.mc-icon'));\n        this.addClassModificatorForIcons();\n    }\n\n    private addClassModificatorForIcons() {\n        const twoIcons = 2;\n\n        if (this.icons.length === 1) {\n            const iconElement = this.icons[0];\n            const COMMENT_NODE = 8;\n\n            if (!iconElement.previousElementSibling && !iconElement.nextElementSibling) {\n                if (iconElement.nextSibling && iconElement.nextSibling.nodeType !== COMMENT_NODE) {\n                    iconElement.classList.add('mc-icon_left');\n                    this.nativeElement.classList.add('mc-icon-button_left');\n                }\n\n                if (iconElement.previousSibling && iconElement.previousSibling.nodeType !== COMMENT_NODE) {\n                    iconElement.classList.add('mc-icon_right');\n                    this.nativeElement.classList.add('mc-icon-button_right');\n                }\n            }\n        } else if (this.icons.length === twoIcons) {\n            const firstIconElement = this.icons[0];\n            const secondIconElement = this.icons[1];\n\n            firstIconElement.classList.add('mc-icon_left');\n            secondIconElement.classList.add('mc-icon_right');\n        }\n    }\n}\n\nexport class McButtonBase {\n    // tslint:disable-next-line:naming-convention\n    constructor(public _elementRef: ElementRef) {}\n}\n\n// tslint:disable-next-line:naming-convention\nexport const McButtonMixinBase:\n    CanDisableCtor &\n    CanColorCtor &\n    typeof McButtonBase =\n        mixinColor(mixinDisabled(McButtonBase));\n\n\n@Component({\n    selector: 'button[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color'],\n    host: {\n        '[disabled]': 'disabled || null'\n    }\n})\nexport class McButton extends McButtonMixinBase implements OnDestroy, CanDisable, CanColor {\n    constructor(elementRef: ElementRef, private _focusMonitor: FocusMonitor) {\n        super(elementRef);\n\n        this._focusMonitor.monitor(this._elementRef.nativeElement, true);\n    }\n\n    ngOnDestroy() {\n        this._focusMonitor.stopMonitoring(this._elementRef.nativeElement);\n    }\n\n    focus(): void {\n        this.getHostElement().focus();\n    }\n\n    getHostElement() {\n        return this._elementRef.nativeElement;\n    }\n}\n\n\n@Component({\n    selector: 'a[mc-button]',\n    templateUrl: './button.component.html',\n    styleUrls: ['./button.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    inputs: ['disabled', 'color'],\n    host: {\n        '[attr.tabindex]': 'disabled ? -1 : 0',\n        '[attr.disabled]': 'disabled || null',\n        '(click)': 'haltDisabledEvents($event)'\n    }\n})\nexport class McAnchor extends McButton {\n    constructor(focusMonitor: FocusMonitor, elementRef: ElementRef) {\n        super(elementRef, focusMonitor);\n    }\n\n    haltDisabledEvents(event: Event) {\n        if (this.disabled) {\n            event.preventDefault();\n            event.stopImmediatePropagation();\n        }\n    }\n}\n"],"names":[],"mappings":"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"}