!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/common"),require("@angular/core"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/portal"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/mosaic/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/tooltip",["exports","@angular/cdk/overlay","@angular/common","@angular/core","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/portal","@ptsecurity/cdk/keycodes","@ptsecurity/mosaic/core","rxjs","rxjs/operators"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).ptsecurity=t.ptsecurity||{},t.ptsecurity.mosaic=t.ptsecurity.mosaic||{},t.ptsecurity.mosaic.tooltip={}),t.ng.cdk.overlay,t.ng.common,t.ng.core,t.ng.cdk.bidi,t.ng.cdk.coercion,t.ng.cdk.portal,t.keycodes,t.ptsecurity.mosaic.core,t.rxjs,t.rxjs.operators)}(this,(function(t,e,i,o,n,r,s,a,c,l,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function m(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s}function h(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}Object.create;var u={Top:"top",Center:"center",Bottom:"bottom",Right:"right",Left:"left"},y=function(){function t(t){this.cdr=t,this.prefix="mc-tooltip_placement",this.positions=h(c.DEFAULT_4_POSITIONS),this.classMap={},this.mcVisibleChange=new o.EventEmitter,this.mcMouseEnterDelay=400,this.mcMouseLeaveDelay=0,this._mcTrigger="hover",this._mcPlacement="top",this._mcVisible=new l.BehaviorSubject(!1),this.onHideSubject=new l.Subject,this.closeOnInteraction=!1,this.availablePositions=c.POSITION_MAP,this.$visible=this._mcVisible.asObservable()}return Object.defineProperty(t.prototype,"mcTitle",{get:function(){return this._mcTitle},set:function(t){this._mcTitle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcTrigger",{get:function(){return this._mcTrigger},set:function(t){this._mcTrigger=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcPlacement",{get:function(){return this._mcPlacement},set:function(t){t!==this._mcPlacement?(this._mcPlacement=t,this.positions.unshift(c.POSITION_MAP[this.mcPlacement])):t||(this._mcPlacement="top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcTooltipClass",{get:function(){return this._mcTooltipClass},set:function(t){this._mcTooltipClass=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcVisible",{get:function(){return this._mcVisible.value},set:function(t){var e=r.coerceBooleanProperty(t);e&&this._mcVisible.value!==e?this.show():this.hide()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcArrowPlacement",{get:function(){return this._mcArrowPlacement},set:function(t){this._mcArrowPlacement=t},enumerable:!1,configurable:!0}),t.prototype.show=function(){var t=this;this.hideTid&&clearTimeout(this.hideTid),this.isContentEmpty()||("manual"!==this.mcTrigger&&(this.closeOnInteraction=!0),this.showTid=setTimeout((function(){t._mcVisible.next(!0),t.mcVisibleChange.emit(!0),t.markForCheck()}),this.mcMouseEnterDelay))},t.prototype.hide=function(){var t=this;this.showTid&&clearTimeout(this.showTid),this.hideTid=setTimeout((function(){t._mcVisible.next(!1),t.mcVisibleChange.emit(!1),t.onHideSubject.next(),t.markForCheck()}),this.mcMouseLeaveDelay)},t.prototype.setClassMap=function(){var t;this.classMap=((t={})[this.prefix+"-"+this.mcPlacement]=!0,t[this.mcTooltipClass]=!0,t)},t.prototype.isContentEmpty=function(){return!!this.isTitleString&&(""===this.mcTitle||!this.mcTitle)},t.prototype.afterHidden=function(){return this.onHideSubject.asObservable()},t.prototype.markForCheck=function(){this.cdr.markForCheck()},t.prototype.handleBodyInteraction=function(){this.closeOnInteraction&&this.hide()},Object.defineProperty(t.prototype,"isTemplateRef",{get:function(){return this.mcTitle instanceof o.TemplateRef},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNonEmptyString",{get:function(){return("string"==typeof this.mcTitle||"number"==typeof this.mcTitle)&&""!==this._mcTitle},enumerable:!1,configurable:!0}),t}();y.decorators=[{type:o.Component,args:[{selector:"mc-tooltip-component",animations:[c.fadeAnimation],template:'<div class="mc-tooltip"\n     [ngClass]="classMap"\n     [@fadeAnimation]="\'\'+($visible | async)">\n    <div class="mc-tooltip-content">\n        <div class="mc-tooltip-arrow"></div>\n        <div class="mc-tooltip-inner">\n            <ng-container *ngIf="isTemplateRef" [ngTemplateOutlet]="mcTitle"></ng-container>\n            <ng-container *ngIf="isNonEmptyString">\n                <div [innerHTML]="mcTitle"></div>\n            </ng-container>\n        </div>\n    </div>\n</div>\n',encapsulation:o.ViewEncapsulation.None,changeDetection:o.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1,host:{"(body:click)":"this.handleBodyInteraction()"},styles:[".mc-tooltip{display:block;box-sizing:border-box;visibility:visible;position:relative;z-index:1060;max-width:var(--mc-tooltip-size-max-width,240px);list-style:none;white-space:pre-line}.mc-tooltip_placement-top{padding-bottom:var(--mc-tooltip-size-distance,9px)}.mc-tooltip_placement-right{padding-left:var(--mc-tooltip-size-distance,9px)}.mc-tooltip_placement-bottom{padding-top:var(--mc-tooltip-size-distance,9px)}.mc-tooltip_placement-left{padding-right:var(--mc-tooltip-size-distance,9px)}.mc-tooltip-inner{padding:var(--mc-tooltip-size-padding,8px 16px);text-align:left;text-decoration:none;border-radius:var(--mc-tooltip-size-border-radius,3px);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;vertical-align:center}.mc-tooltip-arrow{position:absolute;width:var(--mc-tooltip-size-arrow-size,12px);height:var(--mc-tooltip-size-arrow-size,12px);transform:rotate(45deg)}.mc-tooltip_placement-top .mc-tooltip-arrow{bottom:calc(var(--mc-tooltip-size-distance, 9px) - var(--mc-tooltip-size-arrow-width, 5px));left:50%;margin-left:calc(-1 * var(--mc-tooltip-size-arrow-width, 5px))}.mc-tooltip_placement-right .mc-tooltip-arrow{left:calc(var(--mc-tooltip-size-distance, 9px) - var(--mc-tooltip-size-arrow-width, 5px));top:16px;margin-top:calc(-1 * var(--mc-tooltip-size-arrow-width, 5px))}.mc-tooltip_placement-left .mc-tooltip-arrow{right:calc(var(--mc-tooltip-size-distance, 9px) - var(--mc-tooltip-size-arrow-width, 5px));top:16px;margin-top:calc(-1 * var(--mc-tooltip-size-arrow-width, 5px))}.mc-tooltip_placement-bottom .mc-tooltip-arrow{top:calc(var(--mc-tooltip-size-distance, 9px) - var(--mc-tooltip-size-arrow-width, 5px));left:50%;margin-left:calc(-1 * var(--mc-tooltip-size-arrow-width, 5px))}"]}]}],y.ctorParameters=function(){return[{type:o.ChangeDetectorRef}]},y.propDecorators={mcVisibleChange:[{type:o.Output}],mcMouseEnterDelay:[{type:o.Input}],mcMouseLeaveDelay:[{type:o.Input}],mcTitle:[{type:o.Input}],mcTrigger:[{type:o.Input}],mcPlacement:[{type:o.Input}],mcTooltipClass:[{type:o.Input}],mcVisible:[{type:o.Input}],mcArrowPlacement:[{type:o.Input}]};var d=new o.InjectionToken("mc-tooltip-scroll-strategy");function f(t){return function(){return t.scrollStrategies.reposition({scrollThrottle:20})}}var g={provide:d,deps:[e.Overlay],useFactory:f};function v(t){return Error('McTooltip position "'+t+'" is invalid.')}var b=function(){function t(t,e,i,n,r,s,a){this.overlay=t,this.elementRef=e,this.ngZone=i,this.scrollDispatcher=n,this.hostView=r,this.scrollStrategy=s,this.direction=a,this.isTooltipOpen=!1,this.isDynamicTooltip=!1,this.parentDisabled=!1,this.mcVisibleChange=new o.EventEmitter,this.$unsubscribe=new l.Subject,this._disabled=!1,this._mcTrigger="hover",this._mcPlacement="top",this.manualListeners=new Map,this.destroyed=new l.Subject,this.availablePositions=c.POSITION_MAP}return Object.defineProperty(t.prototype,"mcTitle",{get:function(){return this._mcTitle},set:function(t){this._mcTitle=t,this.updateCompValue("mcTitle",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setTitle",{set:function(t){this.mcTitle=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=r.coerceBooleanProperty(t),this.updateCompValue("mcTooltipDisabled",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcMouseEnterDelay",{get:function(){return this._mcMouseEnterDelay},set:function(t){this._mcMouseEnterDelay=t,this.updateCompValue("mcMouseEnterDelay",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcMouseLeaveDelay",{get:function(){return this._mcMouseLeaveDelay},set:function(t){this._mcMouseLeaveDelay=t,this.updateCompValue("mcMouseLeaveDelay",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcTrigger",{get:function(){return this._mcTrigger},set:function(t){t?(this._mcTrigger=t,this.updateCompValue("mcTrigger",t)):this._mcTrigger="hover"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcPlacement",{get:function(){return this._mcPlacement},set:function(t){t?(this._mcPlacement=t,this.updateCompValue("mcPlacement",t)):this._mcPlacement="top",this.mcVisible&&this.updatePosition()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcTooltipClass",{get:function(){return this._mcTooltipClass},set:function(t){t?(this._mcTooltipClass=t,this.updateCompValue("mcTooltipClass",t)):this._mcTooltipClass=""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcVisible",{get:function(){return this._mcVisible},set:function(t){var e=r.coerceBooleanProperty(t);this._mcVisible!==e&&(this._mcVisible=e,this.updateCompValue("mcVisible",e),e?this.show():this.hide())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mcArrowPlacement",{get:function(){return this._mcArrowPlacement},set:function(t){this._mcArrowPlacement=t},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.initElementRefListeners()},t.prototype.ngOnDestroy=function(){var t=this;this.overlayRef&&this.overlayRef.dispose(),this.manualListeners.forEach((function(e,i){t.elementRef.nativeElement.removeEventListener(i,e)})),this.manualListeners.clear(),this.$unsubscribe.next(),this.$unsubscribe.complete()},t.prototype.createOverlay=function(){var t=this;if(this.overlayRef)return this.overlayRef;var e=this.overlay.position().flexibleConnectedTo(this.elementRef).withTransformOriginOn(".mc-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withPositions(h(c.DEFAULT_4_POSITIONS)),i=this.scrollDispatcher.getAncestorScrollContainers(this.elementRef);return e.withScrollableContainers(i),e.positionChanges.pipe(p.takeUntil(this.destroyed)).subscribe((function(e){t.tooltip&&(t.onPositionChange(e),e.scrollableViewProperties.isOverlayClipped&&t.tooltip.mcVisible&&t.ngZone.run((function(){return t.hide()})))})),this.overlayRef=this.overlay.create({direction:this.direction,positionStrategy:e,panelClass:"mc-tooltip-panel",scrollStrategy:this.scrollStrategy()}),this.updatePosition(),this.overlayRef.detachments().pipe(p.takeUntil(this.destroyed)).subscribe((function(){return t.detach()})),this.overlayRef},t.prototype.detach=function(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.detach(),this.tooltip=null},t.prototype.onPositionChange=function(t){var e=this,i=this.mcPlacement;Object.keys(this.availablePositions).some((function(o){return t.connectionPair.originX===e.availablePositions[o].originX&&t.connectionPair.originY===e.availablePositions[o].originY&&t.connectionPair.overlayX===e.availablePositions[o].overlayX&&t.connectionPair.overlayY===e.availablePositions[o].overlayY&&(i=o,!0)})),this.updateCompValue("mcPlacement",i),this.tooltip&&(this.tooltip.setClassMap(),this.tooltip.markForCheck()),this.handlePositioningUpdate()},t.prototype.handlePositioningUpdate=function(){if(this.overlayRef=this.createOverlay(),"right"===this.mcPlacement||"left"===this.mcPlacement){var t=this.overlayRef.overlayElement.clientHeight,e=this.hostView.element.nativeElement.clientHeight;if(this.mcArrowPlacement===u.Center){var i=this.getTooltipArrowElem(),o=this.hostView.element.nativeElement.getBoundingClientRect().top,n=e/2,r=t/2;this.overlayRef.overlayElement.style.top=o+n-r+1+"px",i&&i.setAttribute("style","top: "+(r-1)+"px")}else{var s=(t-e)/2,a=parseInt(this.overlayRef.overlayElement.style.top||"0px",10);this.overlayRef.overlayElement.style.top=a+s-1+"px"}}},t.prototype.updateCompValue=function(t,e){this.isDynamicTooltip&&e&&this.tooltip&&(this.tooltip[t]=e,this.tooltip.markForCheck())},t.prototype.handleKeydown=function(t){this.isTooltipOpen&&t.keyCode===a.ESCAPE&&this.hide()},t.prototype.handleTouchend=function(){this.hide()},t.prototype.initElementRefListeners=function(){var t=this;this.clearListeners(),"hover"===this.mcTrigger&&this.manualListeners.set("mouseenter",(function(){return t.show()})).set("mouseleave",(function(){return t.hide()})).forEach((function(e,i){return t.elementRef.nativeElement.addEventListener(i,e)})),"focus"===this.mcTrigger&&this.manualListeners.set("focus",(function(){return t.show()})).set("blur",(function(){return t.hide()})).forEach((function(e,i){return t.elementRef.nativeElement.addEventListener(i,e)}))},t.prototype.clearListeners=function(){var t=this;this.manualListeners.forEach((function(e,i){t.elementRef.nativeElement.removeEventListener(i,e)})),this.manualListeners.clear()},t.prototype.show=function(){var t=this;if(!this.disabled){if(!this.tooltip){this.overlayRef=this.createOverlay(),this.detach(),this.portal=this.portal||new s.ComponentPortal(y,this.hostView),this.tooltip=this.overlayRef.attach(this.portal).instance,this.tooltip.afterHidden().pipe(p.takeUntil(this.destroyed)).subscribe((function(){return t.detach()})),this.isDynamicTooltip=!0;["mcTitle","mcPlacement","mcTrigger","mcTooltipDisabled","mcMouseEnterDelay","mcMouseLeaveDelay","mcTooltipClass"].forEach((function(e){return t.updateCompValue(e,t[e])})),this.tooltip.mcVisibleChange.pipe(p.takeUntil(this.$unsubscribe),p.distinctUntilChanged()).subscribe((function(e){t.mcVisible=e,t.mcVisibleChange.emit(e),t.isTooltipOpen=e}))}this.updatePosition(),this.tooltip.show()}},t.prototype.hide=function(){this.tooltip&&this.tooltip.hide()},t.prototype.updatePosition=function(){this.overlayRef||(this.overlayRef=this.createOverlay());var t=this.overlayRef.getConfig().positionStrategy,e=this.getOrigin(),i=this.getOverlayPosition();t.withPositions([Object.assign(Object.assign({},e.main),i.main),Object.assign(Object.assign({},e.fallback),i.fallback)]),this.tooltip&&(t.apply(),window.dispatchEvent(new Event("resize")))},t.prototype.getOrigin=function(){var t,e=this.mcPlacement,i=!this.direction||"ltr"===this.direction.value;if("top"===e||"bottom"===e)t={originX:"center",originY:"top"===e?"top":"bottom"};else if("top"===e||"left"===e&&i||"right"===e&&!i)t={originX:"start",originY:"center"};else{if(!("bottom"===e||"right"===e&&i||"left"===e&&!i))throw v(e);t={originX:"end",originY:"center"}}var o=this.invertPosition(t.originX,t.originY);return{main:t,fallback:{originX:o.x,originY:o.y}}},t.prototype.getOverlayPosition=function(){var t,e=this.mcPlacement,i=!this.direction||"ltr"===this.direction.value;if("top"===e)t={overlayX:"center",overlayY:"bottom"};else if("bottom"===e)t={overlayX:"center",overlayY:"top"};else if("top"===e||"left"===e&&i||"right"===e&&!i)t={overlayX:"end",overlayY:"center"};else{if(!("bottom"===e||"right"===e&&i||"left"===e&&!i))throw v(e);t={overlayX:"start",overlayY:"center"}}var o=this.invertPosition(t.overlayX,t.overlayY);return{main:t,fallback:{overlayX:o.x,overlayY:o.y}}},t.prototype.invertPosition=function(t,e){var i=t,o=e;return"top"===this.mcPlacement||"bottom"===this.mcPlacement?"top"===e?o="bottom":"bottom"===e&&(o="top"):"end"===t?i="start":"start"===t&&(i="end"),{x:i,y:o}},t.prototype.getTooltipArrowElem=function(){var t;return null===(t=this.overlayRef)||void 0===t?void 0:t.overlayElement.getElementsByClassName("mc-tooltip-arrow")[0]},t}();b.decorators=[{type:o.Directive,args:[{selector:'[mcTooltip], [attribute^="mcTooltip"]',exportAs:"mcTooltip",host:{"[class.mc-tooltip-open]":"isTooltipOpen","[class.disabled]":"parentDisabled","(keydown)":"handleKeydown($event)","(touchend)":"handleTouchend()"}}]}],b.ctorParameters=function(){return[{type:e.Overlay},{type:o.ElementRef},{type:o.NgZone},{type:e.ScrollDispatcher},{type:o.ViewContainerRef},{type:void 0,decorators:[{type:o.Inject,args:[d]}]},{type:n.Directionality,decorators:[{type:o.Optional}]}]},b.propDecorators={mcVisibleChange:[{type:o.Output}],mcTitle:[{type:o.Input,args:["mcTooltip"]}],setTitle:[{type:o.Input,args:["mcTitle"]}],disabled:[{type:o.Input,args:["mcTooltipDisabled"]}],mcMouseEnterDelay:[{type:o.Input}],mcMouseLeaveDelay:[{type:o.Input}],mcTrigger:[{type:o.Input}],mcPlacement:[{type:o.Input}],mcTooltipClass:[{type:o.Input}],mcVisible:[{type:o.Input}],mcArrowPlacement:[{type:o.Input}]};var T=function(){};T.decorators=[{type:o.NgModule,args:[{declarations:[y,b],exports:[y,b],imports:[i.CommonModule,e.OverlayModule],providers:[g],entryComponents:[y]}]}],t.ArrowPlacements=u,t.MC_TOOLTIP_SCROLL_STRATEGY=d,t.MC_TOOLTIP_SCROLL_STRATEGY_FACTORY_PROVIDER=g,t.McToolTipModule=T,t.McTooltip=b,t.McTooltipComponent=y,t.getMcTooltipInvalidPositionError=v,t.mcTooltipScrollStrategyFactory=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-tooltip.umd.min.js.map