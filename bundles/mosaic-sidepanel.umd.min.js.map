{"version":3,"file":"mosaic-sidepanel.umd.min.js","sources":["../../node_modules/tslib/tslib.es6.js","../../src/lib/sidepanel/sidepanel-directives.ts","../../src/lib/sidepanel/sidepanel-config.ts","../../src/lib/sidepanel/sidepanel-animations.ts","../../src/lib/sidepanel/sidepanel-container.component.ts","../../src/lib/sidepanel/sidepanel-ref.ts","../../src/lib/sidepanel/sidepanel.service.ts","../../src/lib/sidepanel/sidepanel.module.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Component, Directive, ElementRef, Input, OnChanges, OnInit, Optional, SimpleChanges } from '@angular/core';\n\nimport { McSidepanelRef } from './sidepanel-ref';\nimport { McSidepanelService } from './sidepanel.service';\n\n\n/**\n * Button that will close the current sidepanel.\n */\n@Directive({\n    selector: 'button[mc-sidepanel-close], button[mcSidepanelClose]',\n    host: {\n        '(click)': 'sidepanelRef.close(sidepanelResult)',\n        class: 'mc-sidepanel-close',\n        type: 'button'\n    }\n})\nexport class McSidepanelClose implements OnInit, OnChanges {\n    @Input('mc-sidepanel-close') sidepanelResult: any;\n\n    @Input('mcSidepanelClose') mcSidepanelClose: any;\n\n    constructor(\n        @Optional() public sidepanelRef: McSidepanelRef,\n        private elementRef: ElementRef<HTMLElement>,\n        private sidepanelService: McSidepanelService\n    ) {}\n\n    ngOnInit() {\n        if (!this.sidepanelRef) {\n            // When this directive is included in a sidepanel via TemplateRef (rather than being\n            // in a Component), the SidepanelRef isn't available via injection because embedded\n            // views cannot be given a custom injector. Instead, we look up the SidepanelRef by\n            // ID.\n            // This must occur in `onInit`, as the ID binding for the sidepanel container won't\n            // be resolved at constructor time. We use setTimeout by same reason.\n            setTimeout(() => {\n                this.sidepanelRef = getClosestSidepanel(this.elementRef, this.sidepanelService.openedSidepanels)!;\n            });\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const proxiedChange = changes.mcSidepanelClose || changes.sidepanelResult;\n\n        if (proxiedChange) {\n            this.sidepanelResult = proxiedChange.currentValue;\n        }\n    }\n}\n\n/**\n * Header of a sidepanel.\n */\n@Component({\n    selector: 'mc-sidepanel-header',\n    template: `\n        <div class=\"mc-sidepanel-title\">\n            <ng-content></ng-content>\n        </div>\n        <button *ngIf=\"closeable\" mc-sidepanel-close>\n            <span class=\"mc-sidepanel-close-x\">\n                <i mc-icon=\"mc-close-L_16\" class=\"mc-icon mc-icon_light\" color=\"second\"></i>\n            </span>\n        </button>\n    `,\n    host: {\n        class: 'mc-sidepanel-header'\n    }\n})\nexport class McSidepanelHeader {\n    @Input() closeable: boolean;\n}\n\n/**\n * Scrollable content container of a sidepanel.\n */\n@Directive({\n    selector: 'mc-sidepanel-body, [mc-sidepanel-body], mcSidepanelBody',\n    host: {\n        class: 'mc-sidepanel-body'\n    }\n})\nexport class McSidepanelBody {}\n\n/**\n * Footer of a sidepanel.\n */\n@Directive({\n    selector: 'mc-sidepanel-footer, [mc-sidepanel-footer], mcSidepanelFooter',\n    host: {\n        class: 'mc-sidepanel-footer'\n    }\n})\nexport class McSidepanelFooter {}\n\n/**\n * Actions block of a sidepanel footer.\n */\n@Directive({\n    selector: 'mc-sidepanel-actions, [mc-sidepanel-actions], mcSidepanelActions',\n    host: {\n        class: 'mc-sidepanel-actions'\n    }\n})\nexport class McSidepanelActions {}\n\n/**\n * Finds the closest McSidepanelRef to an element by looking at the DOM.\n * @param element Element relative to which to look for a sidepanel.\n * @param openSidepanels References to the currently-open sidepanels.\n */\nfunction getClosestSidepanel(element: ElementRef<HTMLElement>, openSidepanels: McSidepanelRef[]) {\n    let parent: HTMLElement | null = element.nativeElement.parentElement;\n\n    while (parent && !parent.classList.contains('mc-sidepanel-container')) {\n        parent = parent.parentElement;\n    }\n\n    return parent ? openSidepanels.find((sidepanel) => sidepanel.id === parent!.id) : null;\n}\n","import { InjectionToken } from '@angular/core';\n\n\n/** Injection token that can be used to access the data that was passed in to a sidepanel. */\nexport const MC_SIDEPANEL_DATA = new InjectionToken<any>('McSidepanelData');\n\nexport enum McSidepanelPosition {\n    Right = 'right',\n    Left = 'left',\n    Top = 'top',\n    Bottom = 'bottom'\n}\n\nexport class McSidepanelConfig<D = any> {\n    /** ID for the sidepanel. If omitted, a unique one will be generated. */\n    id?: string;\n\n    /** Data being injected into the child component. */\n    data?: D | null = null;\n\n    position?: McSidepanelPosition = McSidepanelPosition.Right;\n\n    /** Whether the sidepanel has a backdrop. */\n    hasBackdrop?: boolean = true;\n\n    /** When we open multiple sidepanels, backdrop appears only once, except cases then this flag is true. */\n    requiredBackdrop?: boolean = false;\n\n    /** Whether the user can use escape or clicking outside to close the sidepanel. */\n    disableClose?: boolean = false;\n\n    /** Custom class for the overlay pane. */\n    overlayPanelClass?: string | string[] = '';\n}\n","import { animate, AnimationTriggerMetadata, state, style, transition, trigger } from '@angular/animations';\nimport { AnimationCurves } from '@ptsecurity/mosaic/core';\n\nimport { McSidepanelPosition } from './sidepanel-config';\n\n\nexport enum McSidepanelAnimationState {\n    Void = 'void',\n    Visible = 'visible',\n    Hidden = 'hidden'\n}\n\n// TODO Find a way to use dynamic keys and avoid error \"Expression form not supported.\"\n// tslint:disable-next-line\nexport const mcSidepanelTransformAnimation: Record<McSidepanelPosition, { in: string; out: string }> = {\n    right: { in: 'translateX(100%)', out: 'translateX(0%)' },\n    left: { in: 'translateX(-100%)', out: 'translateX(0%)' },\n    top: { in: 'translateY(-100%)', out: 'translateY(0%)' },\n    bottom: { in: 'translateY(100%)', out: 'translateY(0%)' }\n};\n\nexport const mcSidepanelAnimations: {\n    readonly sidepanelState: AnimationTriggerMetadata;\n} = {\n    sidepanelState: trigger('state', [\n        state('hidden',\n            style({ transform: '{{transformIn}}' }),\n            { params: { transformIn: mcSidepanelTransformAnimation[McSidepanelPosition.Right].in }}\n        ),\n        state('visible',\n            style({ transform: '{{transformOut}}' }),\n            { params: { transformOut: mcSidepanelTransformAnimation[McSidepanelPosition.Right].out }}\n        ),\n        transition('visible => void, visible => hidden',\n            animate(`200ms ${AnimationCurves.AccelerationCurve}`)),\n        transition('void => visible',\n            animate(`200ms ${AnimationCurves.DecelerationCurve}`))\n    ])\n};\n","import { AnimationEvent } from '@angular/animations';\nimport {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ComponentRef,\n    ElementRef,\n    EmbeddedViewRef,\n    EventEmitter, Inject, InjectionToken,\n    OnDestroy,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\n\nimport { BasePortalOutlet, CdkPortalOutlet, ComponentPortal, TemplatePortal } from '@ptsecurity/cdk/portal';\n\nimport {\n    mcSidepanelAnimations,\n    McSidepanelAnimationState,\n    mcSidepanelTransformAnimation\n} from './sidepanel-animations';\n\nimport { McSidepanelConfig, McSidepanelPosition } from './sidepanel-config';\n\n\nexport const MC_SIDEPANEL_WITH_INDENT =\n    new InjectionToken<boolean>('mc-sidepanel-with-indent');\n\nexport const MC_SIDEPANEL_WITH_SHADOW =\n    new InjectionToken<boolean>('mc-sidepanel-with-shadow');\n\n@Component({\n    selector: 'mc-sidepanel-container',\n    templateUrl: './sidepanel-container.component.html',\n    styleUrls: ['./sidepanel.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    animations: [mcSidepanelAnimations.sidepanelState],\n    host: {\n        class: 'mc-sidepanel-container',\n        tabindex: '-1',\n        role: 'dialog',\n        'aria-modal': 'true',\n        '[attr.id]': 'id',\n        '[@state]': `{\n            value: animationState,\n            params: animationTransform\n        }`,\n        '(@state.start)': 'onAnimation($event)',\n        '(@state.done)': 'onAnimation($event)'\n    }\n})\nexport class McSidepanelContainerComponent extends BasePortalOutlet implements OnDestroy {\n    /** ID for the container DOM element. */\n    id: string;\n\n    /** The portal outlet inside of this container into which the content will be loaded. */\n    @ViewChild(CdkPortalOutlet) portalOutlet: CdkPortalOutlet;\n\n    /** The state of the sidepanel animations. */\n    animationState: McSidepanelAnimationState = McSidepanelAnimationState.Void;\n\n    animationTransform: { transformIn: string; transformOut: string };\n\n    /** Emits whenever the state of the animation changes. */\n    animationStateChanged = new EventEmitter<AnimationEvent>();\n\n    /** Whether the component has been destroyed. */\n    private destroyed: boolean;\n\n    constructor(\n        private elementRef: ElementRef<HTMLElement>,\n        private changeDetectorRef: ChangeDetectorRef,\n        public sidepanelConfig: McSidepanelConfig,\n        @Inject(MC_SIDEPANEL_WITH_INDENT) public withIndent: boolean,\n        @Inject(MC_SIDEPANEL_WITH_SHADOW) public withShadow: boolean) {\n        super();\n    }\n\n    ngOnDestroy(): void {\n        this.destroyed = true;\n    }\n\n    /** Attach a component portal as content to this sidepanel container. */\n    attachComponentPortal<T>(portal: ComponentPortal<T>): ComponentRef<T> {\n        this.validatePortalAttached();\n        this.setAnimation();\n        this.setPanelClass();\n\n        return this.portalOutlet.attachComponentPortal(portal);\n    }\n\n    /** Attach a template portal as content to this sidepanel container. */\n    attachTemplatePortal<C>(portal: TemplatePortal<C>): EmbeddedViewRef<C> {\n        this.validatePortalAttached();\n        this.setAnimation();\n        this.setPanelClass();\n\n        return this.portalOutlet.attachTemplatePortal(portal);\n    }\n\n    /** Begin animation of the sidepanel entrance into view. */\n    enter(): void {\n        if (!this.destroyed) {\n            this.animationState = McSidepanelAnimationState.Visible;\n            this.changeDetectorRef.detectChanges();\n        }\n    }\n\n    /** Begin animation of the sidepanel exiting from view. */\n    exit(): void {\n        if (!this.destroyed) {\n            this.animationState = McSidepanelAnimationState.Hidden;\n            this.changeDetectorRef.markForCheck();\n        }\n    }\n\n    onAnimation(event: AnimationEvent) {\n        this.animationStateChanged.emit(event);\n    }\n\n    private setAnimation() {\n        const position: McSidepanelPosition = this.sidepanelConfig.position!;\n\n        this.animationTransform = {\n            transformIn: mcSidepanelTransformAnimation[position].in,\n            transformOut: mcSidepanelTransformAnimation[position].out\n        };\n    }\n\n    private setPanelClass() {\n        const element: HTMLElement = this.elementRef.nativeElement;\n        const position: McSidepanelPosition = this.sidepanelConfig.position!;\n\n        element.classList.add(`mc-sidepanel-container_${position}`);\n\n        if (this.withShadow) {\n            element.classList.add('mc-sidepanel-container_shadowed');\n        }\n    }\n\n    private validatePortalAttached() {\n        if (this.portalOutlet.hasAttached()) {\n            throw Error('Attempting to attach sidepanel content after content is already attached');\n        }\n    }\n}\n","import { ESCAPE } from '@ptsecurity/cdk/keycodes';\nimport { OverlayRef } from '@ptsecurity/cdk/overlay';\nimport { merge, Observable, Subject } from 'rxjs';\nimport { filter, take } from 'rxjs/operators';\n\nimport { McSidepanelAnimationState } from './sidepanel-animations';\nimport { McSidepanelConfig } from './sidepanel-config';\nimport { McSidepanelContainerComponent } from './sidepanel-container.component';\n\n\n// Counter for unique sidepanel ids.\nlet uniqueId = 0;\n\nexport class McSidepanelRef<T = any, R = any> {\n    readonly id: string;\n\n    /** Instance of the component making up the content of the sidepanel. */\n    instance: T;\n\n    /** Subject for notifying the user that the sidepanel has been closed and dismissed. */\n    private readonly afterClosed$ = new Subject<R | undefined>();\n\n    /** Subject for notifying the user that the sidepanel has opened and appeared. */\n    private readonly afterOpened$ = new Subject<void>();\n\n    /** Result to be passed down to the `afterDismissed` stream. */\n    private result: R | undefined;\n\n    constructor(\n        public containerInstance: McSidepanelContainerComponent,\n        private overlayRef: OverlayRef,\n        public config: McSidepanelConfig) {\n\n        this.id = this.config.id || `mc-sidepanel-${uniqueId++}`;\n        this.containerInstance.id = this.id;\n\n        // Emit when opening animation completes\n        containerInstance.animationStateChanged.pipe(\n            filter(\n                (event) => event.phaseName === 'done' && event.toState === McSidepanelAnimationState.Visible\n            ),\n            take(1)\n        ).subscribe(() => {\n            this.afterOpened$.next();\n            this.afterOpened$.complete();\n        });\n\n        // Dispose overlay when closing animation is complete\n        containerInstance.animationStateChanged.pipe(\n            filter(\n                (event) => event.phaseName === 'done' && event.toState === McSidepanelAnimationState.Hidden\n            ),\n            take(1)\n        ).subscribe(() => {\n            overlayRef.dispose();\n            this.afterClosed$.next(this.result);\n            this.afterClosed$.complete();\n        });\n\n        if (!containerInstance.sidepanelConfig.disableClose) {\n            merge(\n                overlayRef.backdropClick(),\n                overlayRef.keydownEvents().pipe(\n                    // tslint:disable:deprecation\n                    // keyCode is deprecated, but IE11 and Edge don't support code property, which we need use instead\n                    filter((event) => event.keyCode === ESCAPE)\n                )\n            ).subscribe(() => this.close());\n        }\n    }\n\n    close(result?: R): void {\n        if (!this.afterClosed$.closed) {\n            // Transition the backdrop in parallel to the sidepanel.\n            this.containerInstance.animationStateChanged.pipe(\n                filter((event) => event.phaseName === 'done'),\n                take(1)\n            ).subscribe(() => this.overlayRef.detachBackdrop());\n\n            this.result = result;\n            this.containerInstance.exit();\n        }\n    }\n\n    /** Gets an observable that is notified when the sidepanel is finished closing. */\n    afterClosed(): Observable<R | undefined> {\n        return this.afterClosed$.asObservable();\n    }\n\n    /** Gets an observable that is notified when the sidepanel has opened and appeared. */\n    afterOpened(): Observable<void> {\n        return this.afterOpened$.asObservable();\n    }\n}\n","import {\n    ComponentRef,\n    Inject,\n    Injectable,\n    InjectionToken,\n    Injector, OnDestroy,\n    Optional,\n    SkipSelf,\n    TemplateRef\n} from '@angular/core';\nimport { Overlay, OverlayConfig, OverlayRef } from '@ptsecurity/cdk/overlay';\nimport { ComponentPortal, IComponentType, PortalInjector, TemplatePortal } from '@ptsecurity/cdk/portal';\n\nimport { MC_SIDEPANEL_DATA, McSidepanelConfig } from './sidepanel-config';\nimport {\n    McSidepanelContainerComponent,\n    MC_SIDEPANEL_WITH_INDENT,\n    MC_SIDEPANEL_WITH_SHADOW\n} from './sidepanel-container.component';\nimport { McSidepanelRef } from './sidepanel-ref';\n\n\n/** Injection token that can be used to specify default sidepanel options. */\nexport const MC_SIDEPANEL_DEFAULT_OPTIONS =\n    new InjectionToken<McSidepanelConfig>('mc-sidepanel-default-options');\n\n@Injectable()\nexport class McSidepanelService implements OnDestroy {\n    private openedSidepanelsAtThisLevel: McSidepanelRef[] = [];\n\n    /** Keeps track of the currently-open sidepanels. */\n    get openedSidepanels(): McSidepanelRef[] {\n        return this.parentSidepanelService ? this.parentSidepanelService.openedSidepanels :\n            this.openedSidepanelsAtThisLevel;\n    }\n\n    constructor(\n        private overlay: Overlay,\n        private injector: Injector,\n        @Optional() @Inject(MC_SIDEPANEL_DEFAULT_OPTIONS) private defaultOptions: McSidepanelConfig,\n        @Optional() @SkipSelf() private parentSidepanelService: McSidepanelService) {\n    }\n\n    ngOnDestroy() {\n        // Only close the sidepanels at this level on destroy\n        // since the parent service may still be active.\n        this.closeSidepanels(this.openedSidepanelsAtThisLevel);\n    }\n\n    open<T, D = any>(componentOrTemplateRef: IComponentType<T> | TemplateRef<T>,\n                     config?: McSidepanelConfig<D>): McSidepanelRef<T> {\n        const fullConfig = {\n            ...(this.defaultOptions || new McSidepanelConfig()),\n            ...config\n        };\n\n        if (fullConfig.id && this.getSidepanelById(fullConfig.id)) {\n            throw Error(`Sidepanel with id \"${fullConfig.id}\" exists already. The sidepanel id must be unique.`);\n        }\n\n        const overlayRef = this.createOverlay(fullConfig);\n        const container = this.attachContainer(overlayRef, fullConfig);\n        const ref = new McSidepanelRef(container, overlayRef, fullConfig);\n\n        if (componentOrTemplateRef instanceof TemplateRef) {\n            container.attachTemplatePortal(new TemplatePortal<T>(componentOrTemplateRef, null!, {\n                $implicit: fullConfig.data,\n                sidepanelRef: ref\n            } as any));\n        } else {\n            const injector = this.createInjector(fullConfig, ref, container);\n            const portal = new ComponentPortal(componentOrTemplateRef, undefined, injector);\n            const contentRef = container.attachComponentPortal(portal);\n\n            ref.instance = contentRef.instance;\n        }\n\n        this.openedSidepanels.push(ref);\n        ref.afterClosed().subscribe(() => this.removeOpenSidepanel(ref));\n        container.enter();\n\n        return ref;\n    }\n\n    /**\n     * Closes all of the currently-open sidepanels.\n     */\n    closeAll(): void {\n        this.closeSidepanels(this.openedSidepanels);\n    }\n\n    /**\n     * Finds an open sidepanel by its id.\n     * @param id ID to use when looking up the sidepanel.\n     */\n    getSidepanelById(id: string): McSidepanelRef | undefined {\n        return this.openedSidepanels.find((sidepanel) => sidepanel.id === id);\n    }\n\n    /**\n     * Attaches the sidepanel container component to the overlay.\n     */\n    private attachContainer(overlayRef: OverlayRef, config: McSidepanelConfig): McSidepanelContainerComponent {\n        const openedSidepanelsWithSamePosition = this.getOpenedSidepanelsWithSamePosition(config);\n\n        const injector = new PortalInjector(this.injector, new WeakMap<any>([\n            [McSidepanelConfig, config],\n            [MC_SIDEPANEL_WITH_INDENT, openedSidepanelsWithSamePosition.length >= 1],\n            [MC_SIDEPANEL_WITH_SHADOW, openedSidepanelsWithSamePosition.length < 2] // tslint:disable-line\n        ]));\n\n        const containerPortal = new ComponentPortal(McSidepanelContainerComponent, undefined, injector);\n        const containerRef: ComponentRef<McSidepanelContainerComponent> = overlayRef.attach(containerPortal);\n\n        return containerRef.instance;\n    }\n\n    /**\n     * Creates a custom injector to be used inside the sidepanel. This allows a component loaded inside\n     * of a sidepanel to close itself and, optionally, to return a value.\n     * @param config Config object that is used to construct the sidepanel.\n     * @param sidepanelRef Reference to the sidepanel.\n     * @param sidepanelContainer Sidepanel container element that wraps all of the contents.\n     * @returns The custom injector that can be used inside the sidepanel.\n     */\n    private createInjector<T>(\n        config: McSidepanelConfig,\n        sidepanelRef: McSidepanelRef<T>,\n        sidepanelContainer: McSidepanelContainerComponent): PortalInjector {\n\n        // The McSidepanelContainerComponent is injected in the portal as the McSidepanelContainerComponent and\n        // the sidepanel's content are created out of the same ViewContainerRef and as such, are siblings for injector\n        // purposes. To allow the hierarchy that is expected, the McSidepanelContainerComponent is explicitly\n        // added to the injection tokens.\n        const injectionTokens = new WeakMap<any>([\n            [McSidepanelContainerComponent, sidepanelContainer],\n            [MC_SIDEPANEL_DATA, config.data],\n            [McSidepanelRef, sidepanelRef]\n        ]);\n\n        return new PortalInjector(this.injector, injectionTokens);\n    }\n\n    /**\n     * Creates a new overlay and places it in the correct location.\n     * @param config The user-specified sidepanel config.\n     */\n    private createOverlay(config: McSidepanelConfig): OverlayRef {\n        const overlayConfig = new OverlayConfig({\n            hasBackdrop: config.hasBackdrop,\n            backdropClass: this.getBackdropClass(config),\n            maxWidth: '100%',\n            panelClass: config.overlayPanelClass,\n            scrollStrategy: this.overlay.scrollStrategies.block(),\n            positionStrategy: this.overlay.position().global()\n        });\n\n        return this.overlay.create(overlayConfig);\n    }\n\n    private closeSidepanels(sidepanels: McSidepanelRef[]) {\n        const reversedOpenedSidepanels = [...sidepanels.reverse()];\n\n        reversedOpenedSidepanels.forEach((sidepanelRef: McSidepanelRef) => {\n            sidepanelRef.close();\n        });\n    }\n\n    private getBackdropClass(config: McSidepanelConfig): string {\n        const hasOpenedSidepanelWithBackdrop =\n            this.openedSidepanels.some((sidepanelRef) => sidepanelRef.config.hasBackdrop!);\n\n        return config.requiredBackdrop || !hasOpenedSidepanelWithBackdrop ? 'cdk-overlay-dark-backdrop' :\n            'cdk-overlay-transparent-backdrop';\n    }\n\n    private getOpenedSidepanelsWithSamePosition(config: McSidepanelConfig): McSidepanelRef[] {\n        return this.openedSidepanels.filter((sidepanelRef) => sidepanelRef.config.position === config.position);\n    }\n\n    /**\n     * Removes a sidepanel from the array of open sidepanels.\n     * @param sidepanelRef Sidepanel to be removed.\n     */\n    private removeOpenSidepanel(sidepanelRef: McSidepanelRef) {\n        const index = this.openedSidepanels.indexOf(sidepanelRef);\n\n        if (index > -1) {\n            this.openedSidepanels.splice(index, 1);\n        }\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { OverlayModule } from '@ptsecurity/cdk/overlay';\nimport { PortalModule } from '@ptsecurity/cdk/portal';\nimport { McCommonModule } from '@ptsecurity/mosaic/core';\nimport { McIconModule } from '@ptsecurity/mosaic/icon';\n\nimport { McSidepanelContainerComponent } from './sidepanel-container.component';\nimport {\n    McSidepanelActions,\n    McSidepanelBody,\n    McSidepanelClose,\n    McSidepanelFooter,\n    McSidepanelHeader\n} from './sidepanel-directives';\nimport { McSidepanelService } from './sidepanel.service';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        OverlayModule,\n        PortalModule,\n        McCommonModule,\n        McIconModule\n    ],\n    providers: [McSidepanelService],\n    declarations: [\n        McSidepanelContainerComponent,\n        McSidepanelClose,\n        McSidepanelHeader,\n        McSidepanelBody,\n        McSidepanelFooter,\n        McSidepanelActions\n    ],\n    entryComponents: [McSidepanelContainerComponent],\n    exports: [\n        McSidepanelContainerComponent,\n        McSidepanelClose,\n        McSidepanelHeader,\n        McSidepanelBody,\n        McSidepanelFooter,\n        McSidepanelActions\n    ]\n})\nexport class McSidepanelModule {}\n"],"names":["__extends","d","b","__","this","constructor","extendStatics","prototype","Object","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","getClosestSidepanel","element","openSidepanels","parent","nativeElement","parentElement","classList","contains","find","sidepanel","id","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","n","call","apply","MC_SIDEPANEL_DATA","InjectionToken","McSidepanelPosition","McSidepanelAnimationState","McSidepanelConfig","data","position","Right","hasBackdrop","requiredBackdrop","disableClose","overlayPanelClass","mcSidepanelTransformAnimation","right","in","out","left","top","bottom","mcSidepanelAnimations","sidepanelState","trigger","state","style","transform","params","transformIn","transformOut","transition","animate","AnimationCurves","AccelerationCurve","DecelerationCurve","MC_SIDEPANEL_WITH_INDENT","MC_SIDEPANEL_WITH_SHADOW","McSidepanelContainerComponent","_super","elementRef","changeDetectorRef","sidepanelConfig","withIndent","withShadow","_this","animationState","Void","animationStateChanged","EventEmitter","tslib_1.__extends","ngOnDestroy","destroyed","attachComponentPortal","portal","validatePortalAttached","setAnimation","setPanelClass","portalOutlet","attachTemplatePortal","enter","Visible","detectChanges","exit","Hidden","markForCheck","onAnimation","event","emit","animationTransform","add","hasAttached","Error","tslib_1.__decorate","ViewChild","CdkPortalOutlet","tslib_1.__metadata","Component","selector","template","styles","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","animations","host","class","tabindex","role","aria-modal","[attr.id]","[@state]","(@state.start)","(@state.done)","tslib_1.__param","Inject","ElementRef","ChangeDetectorRef","Boolean","BasePortalOutlet","uniqueId","McSidepanelRef","containerInstance","overlayRef","config","afterClosed$","Subject","afterOpened$","pipe","filter","phaseName","toState","take","subscribe","next","complete","dispose","result","merge","backdropClick","keydownEvents","keyCode","ESCAPE","close","closed","detachBackdrop","afterClosed","asObservable","afterOpened","MC_SIDEPANEL_DEFAULT_OPTIONS","McSidepanelService","overlay","injector","defaultOptions","parentSidepanelService","openedSidepanelsAtThisLevel","get","openedSidepanels","closeSidepanels","open","componentOrTemplateRef","fullConfig","tslib_1.__assign","getSidepanelById","createOverlay","container","attachContainer","ref","TemplateRef","TemplatePortal","$implicit","sidepanelRef","createInjector","ComponentPortal","undefined","contentRef","instance","push","removeOpenSidepanel","closeAll","openedSidepanelsWithSamePosition","getOpenedSidepanelsWithSamePosition","PortalInjector","WeakMap","containerPortal","attach","sidepanelContainer","injectionTokens","overlayConfig","OverlayConfig","backdropClass","getBackdropClass","maxWidth","panelClass","scrollStrategy","scrollStrategies","block","positionStrategy","global","sidepanels","reverse","slice","forEach","hasOpenedSidepanelWithBackdrop","some","index","indexOf","splice","Injectable","Optional","SkipSelf","Overlay","Injector","McSidepanelClose","sidepanelService","ngOnInit","setTimeout","ngOnChanges","changes","proxiedChange","mcSidepanelClose","sidepanelResult","currentValue","Input","Directive","(click)","type","McSidepanelHeader","McSidepanelBody","McSidepanelFooter","McSidepanelActions","McSidepanelModule","NgModule","imports","CommonModule","OverlayModule","PortalModule","McCommonModule","McIconModule","providers","declarations","entryComponents","exports"],"mappings":"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"}