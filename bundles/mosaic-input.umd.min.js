/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@ptsecurity/cdk/coercion"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/cdk/platform"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("@angular/common"),require("@ptsecurity/cdk/a11y")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/input",["exports","@angular/core","@angular/forms","@ptsecurity/cdk/coercion","@ptsecurity/cdk/keycodes","@ptsecurity/cdk/platform","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","rxjs","@angular/common","@ptsecurity/cdk/a11y"],e):e((t.ng=t.ng||{},t.ng.mosaic=t.ng.mosaic||{},t.ng.mosaic.input={}),t.ng.core,t.ng.forms,t.ng.cdk.coercion,t.ng.cdk.keycodes,t.ng.cdk.platform,t.ng.mosaic.core,t.ng.mosaic.formField,t.rxjs,t.ng.common,t.ng.cdk.a11y)}(this,function(t,e,n,o,i,r,s,u,a,p,c){"use strict";function l(t,e){function n(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function d(t,e,n,o){var i,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(r<3?i(s):r>3?i(e,n,s):i(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function f(t,e){return function(n,o){e(n,o,t)}}function h(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function m(t){return Error('Input type "'+t+"\" isn't supported by mcInput.")}function y(t){return!isFinite(t)||isNaN(t)?null:t}function g(t){var e=t.toString().split(".");return 1===e.length?1:Math.pow(10,e[1].length)}function _(t,e){var n=Math.max(g(t),g(e));return y((t*n+e*n)/n)}var v=function(t,e){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},b=new e.InjectionToken("MC_INPUT_VALUE_ACCESSOR"),C=function(t,e,n,o){var i;return null===t?(i=_(n,o),null===i?null:Math.min(i,e)):(i=_(t,o),null===i?null:Math.max(Math.min(i,e),n))},I=function(t,e,n,o){var i;return null===t?(i=_(e,-o),null===i?null:Math.max(i,n)):(i=_(t,-o),null===i?null:Math.min(Math.max(i,n),e))},x=["button","checkbox","file","hidden","image","radio","range","reset","submit"],N=10,E=1,S=0,M=function(){function t(t,e,n,o){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=o}return t}(),O=s.mixinErrorState(M),k=function(){function t(t,e,n,o,i,r,s){this._platform=t,this._elementRef=e,this._model=n,this.focused=!1,this.stateChanges=new a.Subject,this.step=this.isDigit(o)?parseFloat(o):E,this.bigStep=this.isDigit(i)?parseFloat(i):N,this.min=this.isDigit(r)?parseFloat(r):-1/0,this.max=this.isDigit(s)?parseFloat(s):1/0,this._host=this._elementRef.nativeElement;var u=this;"valueAsNumber"in this._host&&Object.defineProperty(Object.getPrototypeOf(this._host),"valueAsNumber",{get:function(){var t=parseFloat(u.normalizeSplitter(this.value));return isNaN(t)?null:t}})}o=t,t.prototype._focusChanged=function(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())},t.prototype.onKeyDown=function(t){var e=this,n=t.keyCode,o=[i.NUMPAD_MINUS,i.DASH,i.FF_MINUS],r=[i.DELETE,i.BACKSPACE,i.TAB,i.ESCAPE,i.ENTER],s=[i.LEFT_ARROW,i.RIGHT_ARROW],u=[i.HOME,i.END].concat(s).concat(r).concat(o),a=function(t){return"."===t.key||"Decimal"===t.key},p=function(t){return"."===t.key||","===t.key};if(!(-1!==u.indexOf(n)||function(t){return t.keyCode===i.A&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===i.C&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===i.V&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===i.X&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode>=i.F1&&t.keyCode<=i.F12}(t)||function(t){return e._platform.EDGE||e._platform.TRIDENT?a(t):p(t)}(t))&&(t.shiftKey||!function(t){return t.keyCode>=i.ZERO&&t.keyCode<=i.NINE||t.keyCode>=i.NUMPAD_ZERO&&t.keyCode<=i.NUMPAD_NINE}(t))){t.preventDefault();var c=t.shiftKey?this.bigStep:this.step;n===i.UP_ARROW&&this.stepUp(c),n===i.DOWN_ARROW&&this.stepDown(c)}},t.prototype.onPaste=function(t){var e=t.clipboardData.getData("text");e=this.normalizeSplitter(e),this.isDigit(e)||t.preventDefault()},t.prototype.stepUp=function(t){this._elementRef.nativeElement.focus();var e=C(this._host.valueAsNumber,this.max,this.min,t);this._host.value=null===e?"":e.toString(),this._model.update.emit(this._host.valueAsNumber)},t.prototype.stepDown=function(t){this._elementRef.nativeElement.focus();var e=I(this._host.valueAsNumber,this.max,this.min,t);this._host.value=null===e?"":e.toString(),this._model.update.emit(this._host.valueAsNumber)},t.prototype.normalizeSplitter=function(t){return t?t.replace(/,/g,"."):t},t.prototype.isDigit=function(t){return this.isFloat(t)||this.isInt(t)},t.prototype.isFloat=function(t){return/^-?\d+\.\d+$/.test(t)},t.prototype.isInt=function(t){return/^-?\d+$/.test(t)};var o;return d([e.Input(),h("design:type",Number)],t.prototype,"bigStep",void 0),d([e.Input(),h("design:type",Number)],t.prototype,"step",void 0),d([e.Input(),h("design:type",Number)],t.prototype,"min",void 0),d([e.Input(),h("design:type",Number)],t.prototype,"max",void 0),t=o=d([e.Directive({selector:'input[mcInput][type="number"]',exportAs:"mcNumericalInput",providers:[n.NgModel,{provide:u.McFormFieldNumberControl,useExisting:o}],host:{"(blur)":"_focusChanged(false)","(focus)":"_focusChanged(true)","(paste)":"onPaste($event)","(keydown)":"onKeyDown($event)"}}),f(3,e.Attribute("step")),f(4,e.Attribute("big-step")),f(5,e.Attribute("min")),f(6,e.Attribute("max")),h("design:paramtypes",[r.Platform,e.ElementRef,n.NgModel,String,String,String,String])],t)}(),A=function(t){function i(e,n,o,i,s,u){var p=t.call(this,s,o,i,n)||this;return p._elementRef=e,p.ngControl=n,p.focused=!1,p.stateChanges=new a.Subject,p.controlType="mc-input",p._uid="mc-input-"+S++,p._disabled=!1,p._required=!1,p._type="text",p._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(function(t){return r.getSupportedInputTypes().has(t)}),p._inputValueAccessor=u||p._elementRef.nativeElement,p._previousNativeValue=p.value,p.id=p.id,p}l(i,t),p=i,Object.defineProperty(i.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=o.coerceBooleanProperty(t),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"required",{get:function(){return this._required},set:function(t){this._required=o.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t||"text",this._validateType(),r.getSupportedInputTypes().has(this._type)&&(this._elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())},enumerable:!0,configurable:!0}),i.prototype.ngOnChanges=function(){this.stateChanges.next()},i.prototype.ngOnDestroy=function(){this.stateChanges.complete()},i.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue()},i.prototype.focus=function(){this._elementRef.nativeElement.focus()},i.prototype._focusChanged=function(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())},i.prototype._onInput=function(){},Object.defineProperty(i.prototype,"empty",{get:function(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()},enumerable:!0,configurable:!0}),i.prototype.onContainerClick=function(){this.focus()},i.prototype._dirtyCheckNativeValue=function(){var t=this.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())},i.prototype._validateType=function(){if(x.indexOf(this._type)>-1)throw m(this._type)},i.prototype._isNeverEmpty=function(){return this._neverEmptyInputTypes.indexOf(this._type)>-1},i.prototype._isBadInput=function(){var t=this._elementRef.nativeElement.validity;return t&&t.badInput};var p;return d([e.Input(),h("design:type",s.ErrorStateMatcher)],i.prototype,"errorStateMatcher",void 0),d([e.Input(),h("design:type",Boolean),h("design:paramtypes",[Boolean])],i.prototype,"disabled",null),d([e.Input(),h("design:type",String),h("design:paramtypes",[String])],i.prototype,"id",null),d([e.Input(),h("design:type",String)],i.prototype,"placeholder",void 0),d([e.Input(),h("design:type",Boolean),h("design:paramtypes",[Boolean])],i.prototype,"required",null),d([e.Input(),h("design:type",String),h("design:paramtypes",[String])],i.prototype,"type",null),d([e.Input(),h("design:type",String),h("design:paramtypes",[String])],i.prototype,"value",null),i=p=d([e.Directive({selector:"input[mcInput]",exportAs:"mcInput",host:{class:"mc-input","[attr.id]":"id","[attr.placeholder]":"placeholder","[disabled]":"disabled","[required]":"required","(blur)":"_focusChanged(false)","(focus)":"_focusChanged(true)","(input)":"_onInput()"},providers:[{provide:u.McFormFieldControl,useExisting:p}]}),f(1,e.Optional()),f(1,e.Self()),f(2,e.Optional()),f(3,e.Optional()),f(5,e.Optional()),f(5,e.Self()),f(5,e.Inject(b)),h("design:paramtypes",[e.ElementRef,n.NgControl,n.NgForm,n.FormGroupDirective,s.ErrorStateMatcher,Object])],i)}(O),D=function(){function t(){}return t=d([e.Directive({selector:"input[mcInputMonospace]",exportAs:"McInputMonospace",host:{class:"mc-input_monospace"}})],t)}(),R={provide:n.NG_VALIDATORS,useExisting:e.forwardRef(function(){return P}),multi:!0},P=function(){function t(){}return t.prototype.ngOnChanges=function(t){"min"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=n.Validators.min(parseInt(this.min,10))},d([e.Input(),h("design:type",String)],t.prototype,"min",void 0),t=d([e.Directive({selector:"[min][formControlName],[min][formControl],[min][ngModel]",providers:[R],host:{"[attr.min]":"min ? min : null"}})],t)}(),j={provide:n.NG_VALIDATORS,useExisting:e.forwardRef(function(){return F}),multi:!0},F=function(){function t(){}return t.prototype.ngOnChanges=function(t){"max"in t&&(this._createValidator(),this._onChange&&this._onChange())},t.prototype.validate=function(t){return this._validator(t)},t.prototype.registerOnValidatorChange=function(t){this._onChange=t},t.prototype._createValidator=function(){this._validator=n.Validators.max(parseInt(this.max,10))},d([e.Input(),h("design:type",String)],t.prototype,"max",void 0),t=d([e.Directive({selector:"[max][formControlName],[max][formControl],[max][ngModel]",providers:[j],host:{"[attr.max]":"max ? max : null"}})],t)}(),T=function(){function t(){}return t=d([e.NgModule({imports:[p.CommonModule,c.A11yModule,s.McCommonModule,n.FormsModule],exports:[A,k,D,P,F],declarations:[A,k,D,P,F]})],t)}();t.ɵd18=j,t.ɵb18=R,t.ɵe18=F,t.ɵc18=P,t.ɵa18=b,t.McInputModule=T,t.BIG_STEP=N,t.SMALL_STEP=E,t.McInputBase=M,t._McInputMixinBase=O,t.McNumberInput=k,t.McInput=A,t.McInputMono=D,t.stepUp=C,t.stepDown=I,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-input.umd.min.js.map
