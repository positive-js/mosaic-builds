/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@ptsecurity/cdk/coercion"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("@angular/common"),require("@ptsecurity/cdk/a11y")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/textarea",["exports","@angular/core","@angular/forms","@ptsecurity/cdk/coercion","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","rxjs","@angular/common","@ptsecurity/cdk/a11y"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.textarea={}),e.ng.core,e.ng.forms,e.ng.cdk.coercion,e.ng.mosaic.core,e.ng.mosaic.formField,e.rxjs,e.ng.common,e.ng.cdk.a11y)}(this,function(e,t,r,n,o,i,a,s,c){"use strict";function u(e,t){function r(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},l=new t.InjectionToken("MC_TEXTAREA_VALUE_ACCESSOR"),d=0,h=function(){function e(e,t,r,n){this.defaultErrorStateMatcher=e,this.parentForm=t,this.parentFormGroup=r,this.ngControl=n}return e}(),f=o.mixinErrorState(h),g=function(e){function s(t,r,n,o,i,s,c){var u=e.call(this,i,n,o,r)||this;u.elementRef=t,u.ngControl=r,u.ngZone=c,u.canGrow=!0,u.focused=!1,u.stateChanges=new a.Subject,u.controlType="mc-textarea",u.uid="mc-textsrea-"+d++,u._disabled=!1,u._required=!1,u.lineHeight=0,u.freeRowsHeight=0,u.minHeight=0,u.valueAccessor=s||u.elementRef.nativeElement,u.previousNativeValue=u.value,u.id=u.id;var p=a.fromEvent(t.nativeElement,"input");return u.growSubscription=p.subscribe(u.grow.bind(u)),u}return u(s,e),Object.defineProperty(s.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=n.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(e){this._required=n.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return this.valueAccessor.value},set:function(e){e!==this.value&&(this.valueAccessor.value=e,this.stateChanges.next())},enumerable:!0,configurable:!0}),s.prototype.ngOnInit=function(){var e=this;setTimeout(function(){return e.grow()},0),this.lineHeight=parseInt(getComputedStyle(this.elementRef.nativeElement).lineHeight,10);var t=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingTop,10),r=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingBottom,10);this.minHeight=2*this.lineHeight+t+r,this.freeRowsHeight=this.lineHeight},s.prototype.ngOnChanges=function(){this.stateChanges.next()},s.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.growSubscription.unsubscribe()},s.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this.dirtyCheckNativeValue()},s.prototype.grow=function(){var e=this;this.canGrow&&this.ngZone.runOutsideAngular(function(){var t=e.elementRef.nativeElement,r=parseInt(window.getComputedStyle(t).height,10),n=r-t.clientHeight;t.style.height=0;var o=Math.max(e.minHeight,t.scrollHeight+n+e.freeRowsHeight);t.style.height=o+"px"})},s.prototype.focus=function(){this.elementRef.nativeElement.focus()},s.prototype.focusChanged=function(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())},Object.defineProperty(s.prototype,"empty",{get:function(){return!this.elementRef.nativeElement.value&&!this.isBadInput()},enumerable:!0,configurable:!0}),s.prototype.onContainerClick=function(){this.focus()},s.prototype.dirtyCheckNativeValue=function(){var e=this.value;this.previousNativeValue!==e&&(this.previousNativeValue=e,this.stateChanges.next())},s.prototype.isBadInput=function(){var e=this.elementRef.nativeElement.validity;return e&&e.badInput},s.prototype.getGrowHeight=function(){var e=this.elementRef.nativeElement,t=parseInt(window.getComputedStyle(e).height.toString(),10),r=t-e.clientHeight;return Math.max(this.minHeight,e.scrollHeight+r)},s.decorators=[{type:t.Directive,args:[{selector:"textarea[mcTextarea]",exportAs:"mcTextarea",host:{class:"mc-textarea","[class.mc-textarea-resizable]":"!canGrow","[attr.id]":"id","[attr.placeholder]":"placeholder","[attr.aria-invalid]":"errorState","[disabled]":"disabled","[required]":"required","(blur)":"focusChanged(false)","(focus)":"focusChanged(true)"},providers:[{provide:i.McFormFieldControl,useExisting:s}]}]}],s.ctorParameters=function(){return[{type:t.ElementRef},{type:r.NgControl,decorators:[{type:t.Optional},{type:t.Self}]},{type:r.NgForm,decorators:[{type:t.Optional}]},{type:r.FormGroupDirective,decorators:[{type:t.Optional}]},{type:o.ErrorStateMatcher},{type:void 0,decorators:[{type:t.Optional},{type:t.Self},{type:t.Inject,args:[l]}]},{type:t.NgZone}]},s.propDecorators={canGrow:[{type:t.Input}],errorStateMatcher:[{type:t.Input}],disabled:[{type:t.Input}],id:[{type:t.Input}],placeholder:[{type:t.Input}],required:[{type:t.Input}],value:[{type:t.Input}]},s}(f),m=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[s.CommonModule,c.A11yModule,o.McCommonModule,r.FormsModule],exports:[g],declarations:[g]}]}],e}();e.MC_TEXTAREA_VALUE_ACCESSOR=l,e.McTextareaBase=h,e.McTextareaMixinBase=f,e.McTextarea=g,e.McTextareaModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-textarea.umd.min.js.map
