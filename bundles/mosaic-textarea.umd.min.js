/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/coercion"),require("@angular/core"),require("@angular/forms"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("@angular/cdk/a11y"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/textarea",["exports","@angular/cdk/coercion","@angular/core","@angular/forms","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","rxjs","@angular/cdk/a11y","@angular/common"],t):(e=e||self,t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.textarea={}),e.ng.cdk.coercion,e.ng.core,e.ng.forms,e.ng.mosaic.core,e.ng.mosaic.formField,e.rxjs,e.ng.cdk.a11y,e.ng.common))}(this,function(e,t,r,n,o,i,a,s,u){"use strict";function c(e,t){function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},p=new r.InjectionToken("MC_TEXTAREA_VALUE_ACCESSOR"),d=0,h=function(){function e(e,t,r,n){this.defaultErrorStateMatcher=e,this.parentForm=t,this.parentFormGroup=r,this.ngControl=n}return e}(),g=o.mixinErrorState(h),f=function(e){function s(t,r,n,o,i,s,u){var c=e.call(this,i,n,o,r)||this;c.elementRef=t,c.ngControl=r,c.ngZone=u,c.canGrow=!0,c.focused=!1,c.stateChanges=new a.Subject,c.controlType="mc-textarea",c.uid="mc-textsrea-"+d++,c._disabled=!1,c._required=!1,c.lineHeight=0,c.freeRowsHeight=0,c.minHeight=0,c.valueAccessor=s||c.elementRef.nativeElement,c.previousNativeValue=c.value,c.id=c.id;var l=a.fromEvent(t.nativeElement,"input");return c.growSubscription=l.subscribe(c.grow.bind(c)),c}return c(s,e),Object.defineProperty(s.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=t.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(e){this._required=t.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return this.valueAccessor.value},set:function(e){e!==this.value&&(this.valueAccessor.value=e,this.stateChanges.next())},enumerable:!0,configurable:!0}),s.prototype.ngOnInit=function(){var e=this;setTimeout(function(){return e.grow()},0),this.lineHeight=parseInt(getComputedStyle(this.elementRef.nativeElement).lineHeight,10);var t=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingTop,10),r=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingBottom,10);this.minHeight=2*this.lineHeight+t+r,this.freeRowsHeight=this.lineHeight},s.prototype.ngOnChanges=function(){this.stateChanges.next()},s.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.growSubscription.unsubscribe()},s.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this.dirtyCheckNativeValue()},s.prototype.grow=function(){var e=this;this.canGrow&&this.ngZone.runOutsideAngular(function(){var t=e.elementRef.nativeElement,r=parseInt(window.getComputedStyle(t).height,10),n=r-t.clientHeight;t.style.minHeight=0;var o=Math.max(e.minHeight,+t.scrollHeight+n+e.freeRowsHeight);t.style.minHeight=o+"px"})},s.prototype.focus=function(){this.elementRef.nativeElement.focus()},s.prototype.focusChanged=function(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())},Object.defineProperty(s.prototype,"empty",{get:function(){return!this.elementRef.nativeElement.value&&!this.isBadInput()},enumerable:!0,configurable:!0}),s.prototype.onContainerClick=function(){this.focus()},s.prototype.dirtyCheckNativeValue=function(){var e=this.value;this.previousNativeValue!==e&&(this.previousNativeValue=e,this.stateChanges.next())},s.prototype.isBadInput=function(){var e=this.elementRef.nativeElement.validity;return e&&e.badInput},s.prototype.getGrowHeight=function(){var e=this.elementRef.nativeElement,t=parseInt(window.getComputedStyle(e).height.toString(),10),r=t-e.clientHeight;return Math.max(this.minHeight,+e.scrollHeight+r)},s.decorators=[{type:r.Directive,args:[{selector:"textarea[mcTextarea]",exportAs:"mcTextarea",host:{class:"mc-textarea","[class.mc-textarea-resizable]":"!canGrow","[attr.id]":"id","[attr.placeholder]":"placeholder","[attr.aria-invalid]":"errorState","[disabled]":"disabled","[required]":"required","(blur)":"focusChanged(false)","(focus)":"focusChanged(true)"},providers:[{provide:i.McFormFieldControl,useExisting:s}]}]}],s.ctorParameters=function(){return[{type:r.ElementRef},{type:n.NgControl,decorators:[{type:r.Optional},{type:r.Self}]},{type:n.NgForm,decorators:[{type:r.Optional}]},{type:n.FormGroupDirective,decorators:[{type:r.Optional}]},{type:o.ErrorStateMatcher},{type:void 0,decorators:[{type:r.Optional},{type:r.Self},{type:r.Inject,args:[p]}]},{type:r.NgZone}]},s.propDecorators={canGrow:[{type:r.Input}],errorStateMatcher:[{type:r.Input}],disabled:[{type:r.Input}],id:[{type:r.Input}],placeholder:[{type:r.Input}],required:[{type:r.Input}],value:[{type:r.Input}]},s}(g),m=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[u.CommonModule,s.A11yModule,o.McCommonModule,n.FormsModule],exports:[f],declarations:[f]}]}],e}();e.MC_TEXTAREA_VALUE_ACCESSOR=p,e.McTextarea=f,e.McTextareaBase=h,e.McTextareaMixinBase=g,e.McTextareaModule=m,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-textarea.umd.min.js.map
