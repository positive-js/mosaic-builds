/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@ptsecurity/cdk/coercion"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("@angular/common"),require("@ptsecurity/cdk/a11y")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/textarea",["exports","@angular/core","@angular/forms","@ptsecurity/cdk/coercion","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","rxjs","@angular/common","@ptsecurity/cdk/a11y"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.textarea={}),e.ng.core,e.ng.forms,e.ng.cdk.coercion,e.ng.mosaic.core,e.ng.mosaic.formField,e.rxjs,e.ng.common,e.ng.cdk.a11y)}(this,function(e,t,n,r,o,i,a,s,c){"use strict";function u(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function l(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function p(e,t){return function(n,r){t(n,r,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},g=new t.InjectionToken("MC_TEXTAREA_VALUE_ACCESSOR"),h=0,m=function(){function e(e,t,n,r){this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r}return e}(),y=o.mixinErrorState(m),v=function(e){function s(t,n,r,o,i,s,c){var u=e.call(this,i,r,o,n)||this;u.elementRef=t,u.ngControl=n,u.ngZone=c,u.canGrow=!0,u.focused=!1,u.stateChanges=new a.Subject,u.controlType="mc-textarea",u.uid="mc-textsrea-"+h++,u._disabled=!1,u._required=!1,u.lineHeight=0,u.freeRowsHeight=0,u.minHeight=0,u.valueAccessor=s||u.elementRef.nativeElement,u.previousNativeValue=u.value,u.id=u.id;var l=a.fromEvent(t.nativeElement,"input");return u.growSubscription=l.subscribe(u.grow.bind(u)),u}u(s,e),c=s,Object.defineProperty(s.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=r.coerceBooleanProperty(e),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"required",{get:function(){return this._required},set:function(e){this._required=r.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"value",{get:function(){return this.valueAccessor.value},set:function(e){e!==this.value&&(this.valueAccessor.value=e,this.stateChanges.next())},enumerable:!0,configurable:!0}),s.prototype.ngOnInit=function(){var e=this;setTimeout(function(){return e.grow()},0),this.lineHeight=parseInt(getComputedStyle(this.elementRef.nativeElement).lineHeight,10);var t=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingTop,10),n=parseInt(getComputedStyle(this.elementRef.nativeElement).paddingBottom,10);this.minHeight=2*this.lineHeight+t+n,this.freeRowsHeight=this.lineHeight},s.prototype.ngOnChanges=function(){this.stateChanges.next()},s.prototype.ngOnDestroy=function(){this.stateChanges.complete(),this.growSubscription.unsubscribe()},s.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this.dirtyCheckNativeValue()},s.prototype.grow=function(){var e=this;this.canGrow&&this.ngZone.runOutsideAngular(function(){var t=e.elementRef.nativeElement,n=parseInt(window.getComputedStyle(t).height,10),r=n-t.clientHeight;t.style.height=0;var o=Math.max(e.minHeight,t.scrollHeight+r+e.freeRowsHeight);t.style.height=o+"px"})},s.prototype.focus=function(){this.elementRef.nativeElement.focus()},s.prototype.focusChanged=function(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())},Object.defineProperty(s.prototype,"empty",{get:function(){return!this.elementRef.nativeElement.value&&!this.isBadInput()},enumerable:!0,configurable:!0}),s.prototype.onContainerClick=function(){this.focus()},s.prototype.dirtyCheckNativeValue=function(){var e=this.value;this.previousNativeValue!==e&&(this.previousNativeValue=e,this.stateChanges.next())},s.prototype.isBadInput=function(){var e=this.elementRef.nativeElement.validity;return e&&e.badInput},s.prototype.getGrowHeight=function(){var e=this.elementRef.nativeElement,t=parseInt(window.getComputedStyle(e).height.toString(),10),n=t-e.clientHeight;return Math.max(this.minHeight,e.scrollHeight+n)};var c;return l([t.Input(),d("design:type",Boolean)],s.prototype,"canGrow",void 0),l([t.Input(),d("design:type",o.ErrorStateMatcher)],s.prototype,"errorStateMatcher",void 0),l([t.Input(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],s.prototype,"disabled",null),l([t.Input(),d("design:type",String),d("design:paramtypes",[String])],s.prototype,"id",null),l([t.Input(),d("design:type",String)],s.prototype,"placeholder",void 0),l([t.Input(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],s.prototype,"required",null),l([t.Input(),d("design:type",String),d("design:paramtypes",[String])],s.prototype,"value",null),s=c=l([t.Directive({selector:"textarea[mcTextarea]",exportAs:"mcTextarea",host:{class:"mc-textarea","[class.mc-textarea-resizable]":"!canGrow","[attr.id]":"id","[attr.placeholder]":"placeholder","[attr.aria-invalid]":"errorState","[disabled]":"disabled","[required]":"required","(blur)":"focusChanged(false)","(focus)":"focusChanged(true)"},providers:[{provide:i.McFormFieldControl,useExisting:c}]}),p(1,t.Optional()),p(1,t.Self()),p(2,t.Optional()),p(3,t.Optional()),p(5,t.Optional()),p(5,t.Self()),p(5,t.Inject(g)),d("design:paramtypes",[t.ElementRef,n.NgControl,n.NgForm,n.FormGroupDirective,o.ErrorStateMatcher,Object,t.NgZone])],s)}(y),b=function(){function e(){}return e=l([t.NgModule({imports:[s.CommonModule,c.A11yModule,o.McCommonModule,n.FormsModule],exports:[v],declarations:[v]})],e)}();e.MC_TEXTAREA_VALUE_ACCESSOR=g,e.McTextareaBase=m,e.McTextareaMixinBase=y,e.McTextarea=v,e.McTextareaModule=b,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-textarea.umd.min.js.map
