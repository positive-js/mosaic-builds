{"version":3,"file":"ptsecurity-mosaic-sidebar.umd.js","sources":["../../../packages/mosaic/sidebar/sidebar-animations.ts","../../../packages/mosaic/sidebar/sidebar.component.ts","../../../packages/mosaic/sidebar/sidebar.module.ts","../../../packages/mosaic/sidebar/ptsecurity-mosaic-sidebar.ts"],"sourcesContent":["import { animate, AnimationTriggerMetadata, state, style, transition, trigger } from '@angular/animations';\n\n\nexport enum McSidebarAnimationState {\n    Opened = 'opened',\n    Closed = 'closed'\n}\n\nexport const mcSidebarAnimations: { readonly sidebarState: AnimationTriggerMetadata } = {\n    sidebarState: trigger('state', [\n        state(\n            'opened',\n            style({\n                minWidth: '{{ openedStateMinWidth }}',\n                width: '{{ openedStateWidth }}',\n                maxWidth: '{{ openedStateMaxWidth }}'\n            }),\n            { params: { openedStateMinWidth: '', openedStateWidth: '', openedStateMaxWidth: '' }}\n        ),\n        state(\n            'closed',\n            style({\n                minWidth: '{{ closedStateWidth }}',\n                width: '{{ closedStateWidth }}',\n                maxWidth: '{{ closedStateWidth }}'\n            }),\n            { params: { closedStateWidth: '' }}\n        ),\n        transition('opened => closed', [animate('0.1s')]),\n        transition('closed => opened', [animate('0.2s')])\n    ])\n};\n","import {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    Directive, ElementRef,\n    EventEmitter,\n    Input,\n    NgZone,\n    OnDestroy, OnInit,\n    Output,\n    ViewEncapsulation\n} from '@angular/core';\nimport { isControl, isInput, isLeftBracket, isRightBracket } from '@ptsecurity/cdk/keycodes';\n\nimport { mcSidebarAnimations, McSidebarAnimationState } from './sidebar-animations';\n\n\nexport enum SidebarPositions {\n    Left = 'left',\n    Right = 'right'\n}\n\n// tslint:disable-next-line:naming-convention\ninterface McSidebarParams {\n    openedStateMinWidth: string;\n    openedStateWidth: string;\n    openedStateMaxWidth: string;\n\n    closedStateWidth: string;\n}\n\n\n@Directive({\n    selector: '[mc-sidebar-opened]',\n    exportAs: 'mcSidebarOpened'\n})\nexport class McSidebarOpened {\n    @Input() minWidth: string;\n    @Input() width: string;\n    @Input() maxWidth: string;\n}\n\n@Directive({\n    selector: '[mc-sidebar-closed]',\n    exportAs: 'mcSidebarClosed'\n})\nexport class McSidebarClosed {\n    @Input() width: string;\n}\n\n\n@Component({\n    selector: 'mc-sidebar',\n    exportAs: 'mcSidebar',\n    templateUrl: 'sidebar.component.html',\n    styleUrls: ['./sidebar.scss'],\n    host: {\n        class: 'mc-sidebar',\n        '[@state]': `{\n            value: animationState,\n            params: params\n        }`,\n        '(@state.start)': 'onAnimationStart()',\n        '(@state.done)': 'onAnimationDone()'\n    },\n    animations: [mcSidebarAnimations.sidebarState],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class McSidebar implements OnDestroy, OnInit, AfterContentInit {\n    @Input()\n    get opened(): boolean {\n        return this._opened;\n    }\n\n    set opened(value: boolean) {\n        if (this._opened) {\n            this.saveWidth();\n        }\n\n        this._opened = value;\n    }\n    private _opened: boolean = true;\n\n    @Input() position: SidebarPositions;\n\n    params: McSidebarParams = {\n        openedStateWidth: 'inherit',\n        openedStateMinWidth: 'inherit',\n        openedStateMaxWidth: 'inherit',\n\n        closedStateWidth: '32px'\n    };\n\n    @Output() readonly stateChanged: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    @ContentChild(McSidebarOpened, { static: false }) openedContent: McSidebarOpened;\n\n    @ContentChild(McSidebarClosed, { static: false }) closedContent: McSidebarClosed;\n\n    get animationState(): McSidebarAnimationState {\n        return this._opened ? McSidebarAnimationState.Opened : McSidebarAnimationState.Closed;\n    }\n\n    internalState: boolean = true;\n\n    private documentKeydownListener: (event: KeyboardEvent) => void;\n\n    constructor(private ngZone: NgZone, private elementRef: ElementRef) {}\n\n    ngOnInit(): void {\n        if (this.position === SidebarPositions.Left || this.position === SidebarPositions.Right) {\n            this.registerKeydownListener();\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.position === SidebarPositions.Left || this.position === SidebarPositions.Right) {\n            this.unRegisterKeydownListener();\n        }\n    }\n\n    toggle(): void {\n        this.opened = !this.opened;\n    }\n\n    onAnimationStart() {\n        if (this._opened) {\n            this.internalState = this._opened;\n        }\n    }\n\n    onAnimationDone() {\n        this.internalState = this._opened;\n\n        this.stateChanged.emit(this._opened);\n    }\n\n    ngAfterContentInit(): void {\n        this.params = {\n            openedStateWidth: this.openedContent.width || 'inherit',\n            openedStateMinWidth: this.openedContent.minWidth || 'inherit',\n            openedStateMaxWidth: this.openedContent.maxWidth || 'inherit',\n\n            closedStateWidth: this.closedContent.width || '32px'\n        };\n    }\n\n    private registerKeydownListener(): void {\n        this.documentKeydownListener = (event) => {\n            if (isControl(event) || isInput(event)) { return; }\n\n            if (\n                (this.position === SidebarPositions.Left && isLeftBracket(event)) ||\n                (this.position === SidebarPositions.Right && isRightBracket(event))\n            ) {\n                this.ngZone.run(() => this._opened = !this._opened);\n            }\n        };\n\n        this.ngZone.runOutsideAngular(() => {\n            // tslint:disable-next-line: no-unbound-method\n            document.addEventListener('keypress', this.documentKeydownListener, true);\n        });\n    }\n\n    private unRegisterKeydownListener(): void {\n        // tslint:disable-next-line: no-unbound-method\n        document.removeEventListener('keypress', this.documentKeydownListener, true);\n    }\n\n    private saveWidth() {\n        this.params.openedStateWidth = `${this.elementRef.nativeElement.offsetWidth}px`;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { McSidebar, McSidebarClosed, McSidebarOpened } from './sidebar.component';\n\n\n@NgModule({\n    imports: [CommonModule],\n    declarations: [\n        McSidebarClosed,\n        McSidebarOpened,\n        McSidebar\n    ],\n    exports: [\n        McSidebarClosed,\n        McSidebarOpened,\n        McSidebar\n    ]\n})\nexport class McSidebarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {mcSidebarAnimations as Éµa} from './sidebar-animations';"],"names":["trigger","state","style","transition","animate","SidebarPositions","Directive","Input","EventEmitter","isControl","isInput","isLeftBracket","isRightBracket","Component","ViewEncapsulation","ChangeDetectionStrategy","NgZone","ElementRef","Output","ContentChild","NgModule","CommonModule"],"mappings":"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"}