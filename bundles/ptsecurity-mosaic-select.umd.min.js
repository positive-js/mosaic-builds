!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/overlay"),require("@angular/common"),require("@angular/core"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("@ptsecurity/mosaic/icon"),require("@ptsecurity/mosaic/tags"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/collections"),require("@angular/forms"),require("@ptsecurity/cdk/a11y"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/mosaic/input"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/select",["exports","@angular/cdk/overlay","@angular/common","@angular/core","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","@ptsecurity/mosaic/icon","@ptsecurity/mosaic/tags","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/collections","@angular/forms","@ptsecurity/cdk/a11y","@ptsecurity/cdk/keycodes","@ptsecurity/mosaic/input","rxjs","rxjs/operators"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ptsecurity=e.ptsecurity||{},e.ptsecurity.mosaic=e.ptsecurity.mosaic||{},e.ptsecurity.mosaic.select={}),e.ng.cdk.overlay,e.ng.common,e.ng.core,e.ptsecurity.mosaic.core,e.ptsecurity.mosaic["form-field"],e.ptsecurity.mosaic.icon,e.ptsecurity.mosaic.tags,e.ng.cdk.bidi,e.ng.cdk.coercion,e.ng.cdk.collections,e.ng.forms,e.mc.cdk.a11y,e.mc.cdk.keycodes,e.ptsecurity.mosaic.input,e.rxjs,e.rxjs.operators)}(this,(function(e,t,i,n,r,o,s,a,c,l,p,h,d,u,g,m,y){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};Object.create;function v(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}Object.create;var b=0,C=function(e,t){this.source=e,this.value=t},S=function(){function e(e){this.searchChangesSubscription=new m.Subscription,this.isSearchChanged=!1,e.canCleanerClearByEsc=!1}return e.prototype.focus=function(){this.input.focus()},e.prototype.reset=function(){this.input.ngControl.reset()},e.prototype.ngAfterContentInit=function(){var e=this;if(!this.input)throw Error("McSelectSearch does not work without mcInput");if(!this.input.ngControl)throw Error("McSelectSearch does not work without ngControl");Promise.resolve().then((function(){e.searchChangesSubscription=e.input.ngControl.valueChanges.subscribe((function(){e.isSearchChanged=!0}))}))},e.prototype.ngOnDestroy=function(){this.searchChangesSubscription.unsubscribe()},e.prototype.handleKeydown=function(e){e.keyCode===u.ESCAPE&&this.input.value&&(this.reset(),e.stopPropagation()),[u.SPACE,u.HOME,u.END].includes(e.keyCode)&&e.stopPropagation()},e}();S.decorators=[{type:n.Directive,args:[{selector:"[mcSelectSearch]",exportAs:"mcSelectSearch",host:{"(keydown)":"handleKeydown($event)"}}]}],S.ctorParameters=function(){return[{type:o.McFormField}]},S.propDecorators={input:[{type:n.ContentChild,args:[g.McInput,{static:!1}]}]};var w=function(){};w.decorators=[{type:n.Directive,args:[{selector:"[mc-select-search-empty-result]",exportAs:"mcSelectSearchEmptyResult"}]}];var O=function(){};O.decorators=[{type:n.Directive,args:[{selector:"mc-select-trigger"}]}];var x=function(e,t,i,n,r){this.elementRef=e,this.defaultErrorStateMatcher=t,this.parentForm=i,this.parentFormGroup=n,this.ngControl=r},k=function(e){function t(t,i,r,o,s,a,c,l,p,h,d,u,g,f,v){var C=e.call(this,s,o,l,p,d)||this;return C._changeDetectorRef=t,C._ngZone=i,C._renderer=r,C.rawValidators=a,C._dir=c,C._parentFormField=h,C.ngModel=u,C.formControlName=g,C._scrollStrategyFactory=f,C.mcValidation=v,C.controlType="select",C.hiddenItems=0,C.triggerFontSize=0,C.previousSelectionModelSelected=[],C.transformOrigin="top",C.panelDoneAnimatingStream=new m.Subject,C.scrollStrategy=C._scrollStrategyFactory(),C.offsetY=0,C.positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}],C.hiddenItemsText="...ещё",C.backdropClass="cdk-overlay-transparent-backdrop",C.optionSelectionChanges=m.defer((function(){return C.options?m.merge.apply(void 0,_(C.options.map((function(e){return e.onSelectionChange})),C.selectionModel.selected.map((function(e){return e.onSelectionChange})))):C._ngZone.onStable.asObservable().pipe(y.take(1),y.switchMap((function(){return C.optionSelectionChanges})))})),C.openedChange=new n.EventEmitter,C.openedStream=C.openedChange.pipe(y.filter((function(e){return e})),y.map((function(){}))),C.closedStream=C.openedChange.pipe(y.filter((function(e){return!e})),y.map((function(){}))),C.selectionChange=new n.EventEmitter,C.valueChange=new n.EventEmitter,C._hasBackdrop=!1,C._required=!1,C._multiple=!1,C._focused=!1,C.panelOpen=!1,C.closeSubscription=m.Subscription.EMPTY,C.scrollTop=0,C.uid="mc-select-"+b++,C.destroy=new m.Subject,C.onChange=function(){},C.onTouched=function(){},C._compareWith=function(e,t){return e===t},C.ngControl&&(C.ngControl.valueAccessor=C),C.id=C.id,C}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,e),Object.defineProperty(t.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=l.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){this._placeholder=e,this.stateChanges.next()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=l.coerceBooleanProperty(e),this.stateChanges.next()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},set:function(e){if(this.selectionModel)throw r.getMcSelectDynamicMultipleError();this._multiple=l.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compareWith",{get:function(){return this._compareWith},set:function(e){if("function"!=typeof e)throw r.getMcSelectNonFunctionValueError();this._compareWith=e,this.selectionModel&&this.initializeSelection()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this.writeValue(e),this._value=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid,this.stateChanges.next()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focused",{get:function(){return this._focused||this.panelOpen},set:function(e){this._focused=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmptySearchResult",{get:function(){return this.search&&0===this.options.length&&!!this.search.input.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowCleaner",{get:function(){return this.cleaner&&this.selectionModel.hasValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.multiple?this.selectionModel.selected:this.selectionModel.selected[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"triggerValue",{get:function(){return this.empty?"":this.selectionModel.selected[0].viewValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"triggerValues",{get:function(){if(this.empty)return[];var e=this.selectionModel.selected;return this.isRtl()&&e.reverse(),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this.selectionModel||this.selectionModel.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var e=this;this.selectionModel=new p.SelectionModel(this.multiple),this.stateChanges.next(),this.panelDoneAnimatingStream.pipe(y.distinctUntilChanged(),y.takeUntil(this.destroy)).subscribe((function(){e.panelOpen?(e.scrollTop=0,e.search&&e.search.focus(),e.openedChange.emit(!0)):(e.openedChange.emit(!1),e._changeDetectorRef.markForCheck())}))},t.prototype.ngAfterContentInit=function(){var e=this;this.mcValidation.useValidation&&r.setMosaicValidation(this),this.initKeyManager(),this.selectionModel.changed.pipe(y.takeUntil(this.destroy)).subscribe((function(e){e.added.forEach((function(e){return e.select()})),e.removed.forEach((function(e){return e.deselect()}))})),this.options.changes.pipe(y.startWith(null),y.takeUntil(this.destroy)).subscribe((function(){e.resetOptions(),e.initializeSelection()}))},t.prototype.ngAfterViewInit=function(){var e=this;this.tags.changes.subscribe((function(){setTimeout((function(){return e.calculateHiddenItems()}),0)}))},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},t.prototype.ngOnChanges=function(e){e.disabled&&this.stateChanges.next()},t.prototype.ngOnDestroy=function(){this.destroy.next(),this.destroy.complete(),this.stateChanges.complete(),this.closeSubscription.unsubscribe()},t.prototype.hiddenItemsTextFormatter=function(e,t){return e+" "+t},t.prototype.clearValue=function(e){e.stopPropagation(),this.selectionModel.clear(),this.keyManager.setActiveItem(-1),this.propagateChanges()},t.prototype.resetSearch=function(){this.search&&(this.search.reset(),this.search.isSearchChanged=!1)},t.prototype.toggle=function(){this.panelOpen?this.close():this.open()},t.prototype.open=function(){var e,t=this;this.disabled||!(null===(e=this.options)||void 0===e?void 0:e.length)||this.panelOpen||(this.triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this.triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement)["font-size"]),this.panelOpen=!0,this.keyManager.withHorizontalOrientation(null),this.highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this._ngZone.onStable.asObservable().pipe(y.take(1)).subscribe((function(){t.scrollActiveOptionIntoView(),t.triggerFontSize&&t.overlayDir.overlayRef&&t.overlayDir.overlayRef.overlayElement&&(t.overlayDir.overlayRef.overlayElement.style.fontSize=t.triggerFontSize+"px")})))},t.prototype.close=function(){this.panelOpen&&(this.resetSearch(),this.panelOpen=!1,this.keyManager.withHorizontalOrientation(this.isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this.onTouched())},t.prototype.writeValue=function(e){this.options&&this.setSelectionByValue(e)},t.prototype.registerOnChange=function(e){this.onChange=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t.prototype.setDisabledState=function(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()},t.prototype.isRtl=function(){return!!this._dir&&"rtl"===this._dir.value},t.prototype.handleKeydown=function(e){this.disabled||(this.panelOpen?this.handleOpenKeydown(e):this.handleClosedKeydown(e))},t.prototype.onFocus=function(){this.disabled||(this._focused=!0,this.stateChanges.next())},t.prototype.onBlur=function(){this._focused=!1,this.disabled||this.panelOpen||(this.onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())},t.prototype.onAttached=function(){var e=this;this.overlayDir.positionChange.pipe(y.take(1)).subscribe((function(){e._changeDetectorRef.detectChanges(),e.setOverlayPosition(),e.optionsContainer.nativeElement.scrollTop=e.scrollTop,e.updateScrollSize()})),this.closeSubscription=this.closingActions().subscribe((function(){return e.close()}))},t.prototype.getPanelTheme=function(){return this._parentFormField?"mc-"+this._parentFormField.color:""},t.prototype.focus=function(){this.elementRef.nativeElement.focus()},t.prototype.onContainerClick=function(){this.focus()},t.prototype.onRemoveMatcherItem=function(e,t){t.stopPropagation(),e.deselect()},t.prototype.calculateHiddenItems=function(){var e=this;if(!this.customTrigger&&!this.empty&&this.multiple){var t=0,i=this.getTotalItemsWidthInMatcher(),n=0;if(this.tags.forEach((function(i){i.nativeElement.offsetTop<i.nativeElement.offsetHeight&&(n+=e.getItemWidth(i.nativeElement),t++)})),this.hiddenItems=this.selected.length-t,this.hiddenItems){var r=this.trigger.nativeElement.querySelector(".mc-select__match-hidden-text"),o=this.trigger.nativeElement.querySelector(".mc-select__match-list"),s=r.offsetTop<r.offsetHeight,a=o.getBoundingClientRect().width,c=a+86;if(s&&i<c&&(this.hiddenItems=0),n===a||n+86<a)return void this._changeDetectorRef.markForCheck();!s&&i+86>c&&this.hiddenItems++}this._changeDetectorRef.markForCheck()}},t.prototype.getItemHeight=function(){return this.options.first?this.options.first.getHeight():0},t.prototype.closingActions=function(){var e=this;return m.merge(this.overlayDir.overlayRef.outsidePointerEvents().pipe(y.filter((function(t){return!e.elementRef.nativeElement.contains(t.target)}))),this.overlayDir.overlayRef.detachments())},t.prototype.getHeightOfOptionsContainer=function(){return this.optionsContainer.nativeElement.getClientRects()[0].height},t.prototype.updateScrollSize=function(){this.options.first&&this.keyManager.withScrollSize(Math.floor(this.getHeightOfOptionsContainer()/this.options.first.getHeight()))},t.prototype.getTotalItemsWidthInMatcher=function(){var e=this,t=this.trigger.nativeElement.cloneNode(!0);t.querySelector(".mc-select__match-hidden-text").remove(),this._renderer.setStyle(t,"position","absolute"),this._renderer.setStyle(t,"visibility","hidden"),this._renderer.setStyle(t,"top","-100%"),this._renderer.setStyle(t,"left","0"),this._renderer.appendChild(this.trigger.nativeElement,t);var i=0;return t.querySelectorAll("mc-tag").forEach((function(t){i+=e.getItemWidth(t)})),t.remove(),i},t.prototype.getItemWidth=function(e){var t=window.getComputedStyle(e);return parseInt(t.width)+parseInt(t.marginLeft)+parseInt(t.marginRight)},t.prototype.handleClosedKeydown=function(e){var t=e.keyCode,i=[u.DOWN_ARROW,u.UP_ARROW,u.LEFT_ARROW,u.RIGHT_ARROW].includes(t);[u.ENTER,u.SPACE].includes(t)||(this.multiple||e.altKey)&&i?(e.preventDefault(),this.open()):this.multiple||this.keyManager.onKeydown(e)},t.prototype.handleOpenKeydown=function(e){var t=e.keyCode,i=t===u.DOWN_ARROW||t===u.UP_ARROW;if(i&&e.altKey)e.preventDefault(),this.close();else if(t===u.HOME)e.preventDefault(),this.keyManager.setFirstItemActive();else if(t===u.END)e.preventDefault(),this.keyManager.setLastItemActive();else if(t===u.PAGE_UP)e.preventDefault(),this.keyManager.setPreviousPageItemActive();else if(t===u.PAGE_DOWN)e.preventDefault(),this.keyManager.setNextPageItemActive();else if(t!==u.ENTER&&t!==u.SPACE||!this.keyManager.activeItem)if(this._multiple&&t===u.A&&e.ctrlKey){e.preventDefault();var n=this.options.some((function(e){return!e.selected}));this.options.forEach((function(e){n&&!e.disabled?e.select():e.deselect()}))}else{var r=this.keyManager.activeItemIndex;this.keyManager.onKeydown(e),this._multiple&&i&&e.shiftKey&&this.keyManager.activeItem&&this.keyManager.activeItemIndex!==r&&this.keyManager.activeItem.selectViaInteraction(),this.search&&this.search.focus()}else e.preventDefault(),this.keyManager.activeItem.selectViaInteraction()},t.prototype.initializeSelection=function(){var e=this;Promise.resolve().then((function(){e.setSelectionByValue(e.ngControl?e.ngControl.value:e._value)}))},t.prototype.setSelectionByValue=function(e){var t=this;if(this.previousSelectionModelSelected=this.selectionModel.selected,this.multiple&&e){if(!Array.isArray(e))throw r.getMcSelectNonArrayValueError();this.selectionModel.clear(),e.forEach((function(e){return t.selectValue(e)})),this.sortValues()}else{this.selectionModel.clear();var i=this.selectValue(e);i&&this.keyManager.setActiveItem(i)}this._changeDetectorRef.markForCheck()},t.prototype.getCorrespondOption=function(e){var t=this;return _(this.options.toArray(),this.previousSelectionModelSelected).find((function(i){try{return null!=i.value&&t.compareWith(i.value,e)}catch(e){return n.isDevMode()&&console.warn(e),!1}}))},t.prototype.selectValue=function(e){var t=this.getCorrespondOption(e);return t&&this.selectionModel.select(t),t},t.prototype.initKeyManager=function(){var e=this;this.keyManager=new d.ActiveDescendantKeyManager(this.options).withTypeAhead(200,this.search?-1:0).withVerticalOrientation().withHorizontalOrientation(this.isRtl()?"rtl":"ltr"),this.keyManager.tabOut.pipe(y.takeUntil(this.destroy)).subscribe((function(){e.focus(),e.close()})),this.keyManager.change.pipe(y.takeUntil(this.destroy)).subscribe((function(){e.panelOpen&&e.panel?e.scrollActiveOptionIntoView():e.panelOpen||e.multiple||!e.keyManager.activeItem||e.keyManager.activeItem.selectViaInteraction()}))},t.prototype.resetOptions=function(){var e=this,t=m.merge(this.options.changes,this.destroy);this.optionSelectionChanges.pipe(y.takeUntil(t)).subscribe((function(t){e.onSelect(t.source,t.isUserInput),e.search&&e.search.isSearchChanged&&(Promise.resolve().then((function(){return e.keyManager.updateActiveItem(0)})),e.search.isSearchChanged=!1),t.isUserInput&&!e.multiple&&e.panelOpen&&(e.close(),e.focus())})),m.merge.apply(void 0,_(this.options.map((function(e){return e.stateChanges})))).pipe(y.takeUntil(t)).subscribe((function(){e._changeDetectorRef.markForCheck(),e.stateChanges.next()}))},t.prototype.onSelect=function(e,t){var i=this.selectionModel.isSelected(e);null!=e.value||this._multiple?(e.selected?this.selectionModel.select(e):this.selectionModel.deselect(e),t&&this.keyManager.setActiveItem(e),this.multiple&&(this.sortValues(),t&&(this.search?this.search.focus():this.focus()))):(e.deselect(),this.selectionModel.clear(),this.propagateChanges(e.value)),i!==this.selectionModel.isSelected(e)&&this.propagateChanges(),this.stateChanges.next()},t.prototype.sortValues=function(){var e=this;if(this.multiple){var t=this.options.toArray();this.selectionModel.sort((function(i,n){return e.sortComparator?e.sortComparator(i,n,t):t.indexOf(i)-t.indexOf(n)})),this.stateChanges.next()}},t.prototype.propagateChanges=function(e){var t=null;t=this.multiple?this.selected.map((function(e){return e.value})):this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this.onChange(t),this.selectionChange.emit(new C(this,t)),this._changeDetectorRef.markForCheck()},t.prototype.highlightCorrectOption=function(){this.keyManager&&(this.empty?this.keyManager.setFirstItemActive():this.keyManager.setActiveItem(this.selectionModel.selected[0]))},t.prototype.scrollActiveOptionIntoView=function(){this.keyManager.activeItem&&this.keyManager.activeItem.focus()},t.prototype.setOverlayPosition=function(){var e;this.resetOverlay();var t,i,n=this.getOverlayRect(),o=this.getOverlayWidth(),s=this.isRtl(),a=2*r.SELECT_PANEL_PADDING_X,c=this.selectionModel.selected[0]||this.options.first;t=c&&c.group?r.SELECT_PANEL_INDENT_PADDING_X:r.SELECT_PANEL_PADDING_X,s||(t*=-1);var l=0-(n.left+t-(s?a:0)),p=n.right+t-o+(s?0:a);(l>0||p>0)&&(t=(e=v(this.calculateOverlayXPosition(n,o,t),2))[0],i=e[1],this.overlayDir.overlayRef.overlayElement.style.maxWidth=i+"px"),this.overlayDir.offsetX=Math.round(t),this.overlayDir.overlayRef.updatePosition()},t.prototype.calculateOverlayXPosition=function(e,t,i){var n,o,s=i,a=this.triggerRect.left,c=t-this.triggerRect.right,l=a<=c,p=this.triggerRect.width+r.SELECT_PANEL_INDENT_PADDING_X;if(l)n=c+p-r.SELECT_PANEL_VIEWPORT_PADDING,o=e.width<n?e.width:n;else{var h=void 0;n=a+p-r.SELECT_PANEL_VIEWPORT_PADDING,e.width<n?(o=e.width,h=this.triggerRect.right-o):(o=n,h=this.triggerRect.right-(o-r.SELECT_PANEL_INDENT_PADDING_X)),s-=this.triggerRect.left-h}return[s,o]},t.prototype.resetOverlay=function(){this.overlayDir.offsetX=0,this.overlayDir.overlayRef.overlayElement.style.maxWidth="unset",this.overlayDir.overlayRef.updatePosition()},t.prototype.getOverlayRect=function(){return this.overlayDir.overlayRef.overlayElement.getBoundingClientRect()},t.prototype.getOverlayWidth=function(){return this.scrollStrategy._overlayRef.hostElement.clientWidth},t}(r.mixinTabIndex(r.mixinDisabled(r.mixinErrorState(x))));k.decorators=[{type:n.Component,args:[{selector:"mc-select",exportAs:"mcSelect",template:'<div cdk-overlay-origin\n     class="mc-select__trigger"\n     (click)="toggle()"\n     [class.mc-select__trigger_multiple]="multiple"\n     #origin="cdkOverlayOrigin"\n     #trigger>\n    <div class="mc-select__matcher" [ngSwitch]="empty">\n        <span class="mc-select__placeholder" *ngSwitchCase="true">{{ placeholder || \'\\u00A0\' }}</span>\n        <span *ngSwitchCase="false" [ngSwitch]="!!customTrigger">\n            <div *ngSwitchDefault [ngSwitch]="multiple" class="mc-select__match-container">\n                <span *ngSwitchCase="false" class="mc-select__matcher-text">{{ triggerValue }}</span>\n                <div *ngSwitchCase="true" class="mc-select__match-list">\n                    <mc-tag *ngFor="let option of triggerValues"\n                            [disabled]="option.disabled || disabled"\n                            [selectable]="false"\n                            [class.mc-error]="errorState">\n                        {{ option.viewValue }}\n                        <i mc-icon="mc-close-S_16"\n                           *ngIf="!option.disabled && !disabled"\n                           (click)="onRemoveMatcherItem(option, $event)">\n                        </i>\n                    </mc-tag>\n                </div>\n                <div class="mc-select__match-hidden-text" [style.display]="hiddenItems > 0 ? \'block\' : \'none\'">\n                    {{ hiddenItemsTextFormatter(hiddenItemsText, hiddenItems) }}\n                </div>\n            </div>\n            <ng-content select="mc-select-trigger" *ngSwitchCase="true"></ng-content>\n        </span>\n    </div>\n\n    <div class="mc-select__cleaner" *ngIf="canShowCleaner" (click)="clearValue($event)">\n        <ng-content select="mc-cleaner"></ng-content>\n    </div>\n\n    <div class="mc-select__arrow-wrapper">\n        <i class="mc-select__arrow" mc-icon="mc-angle-down-L_16"></i>\n    </div>\n</div>\n\n<ng-template\n    cdk-connected-overlay\n    cdkConnectedOverlayLockPosition\n    [cdkConnectedOverlayHasBackdrop]="hasBackdrop"\n    [cdkConnectedOverlayBackdropClass]="backdropClass"\n    [cdkConnectedOverlayScrollStrategy]="scrollStrategy"\n    [cdkConnectedOverlayOrigin]="origin"\n    [cdkConnectedOverlayOpen]="panelOpen"\n    [cdkConnectedOverlayPositions]="positions"\n    [cdkConnectedOverlayMinWidth]="triggerRect?.width"\n    [cdkConnectedOverlayOffsetY]="offsetY"\n    (backdropClick)="close()"\n    (attach)="onAttached()"\n    (detach)="close()">\n    <div\n        #panel\n        class="mc-select__panel {{ getPanelTheme() }}"\n        [ngClass]="panelClass"\n        [style.transformOrigin]="transformOrigin"\n        [style.font-size.px]="triggerFontSize"\n        (keydown)="handleKeydown($event)">\n\n        <div *ngIf="search" class="mc-select__search-container">\n            <ng-content select="[mcSelectSearch]"></ng-content>\n        </div>\n\n        <div #optionsContainer\n             class="mc-select__content"\n             [@fadeInContent]="\'showing\'"\n             (@fadeInContent.done)="panelDoneAnimatingStream.next($event.toState)">\n\n            <div *ngIf="isEmptySearchResult" class="mc-select__no-options-message">\n                <ng-content select="[mc-select-search-empty-result]"></ng-content>\n            </div>\n            <ng-content></ng-content>\n        </div>\n    </div>\n</ng-template>\n',inputs:["disabled","tabIndex"],encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush,host:{"[attr.id]":"id","[attr.tabindex]":"tabIndex","[attr.disabled]":"disabled || null",class:"mc-select","[class.mc-disabled]":"disabled","[class.mc-invalid]":"errorState","(keydown)":"handleKeydown($event)","(focus)":"onFocus()","(blur)":"onBlur()","(window:resize)":"calculateHiddenItems()"},animations:[r.mcSelectAnimations.transformPanel,r.mcSelectAnimations.fadeInContent],providers:[{provide:o.McFormFieldControl,useExisting:k},{provide:r.MC_OPTION_PARENT_COMPONENT,useExisting:k}],styles:[".mc-option{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;position:relative;max-width:100%;height:var(--mc-option-size-height,32px);border:var(--mc-option-size-border-width,2px) solid transparent;cursor:pointer;outline:none;padding-left:var(--mc-option-size-horizontal-padding,16px);padding-right:var(--mc-option-size-horizontal-padding,16px);-webkit-tap-highlight-color:transparent}.mc-option.mc-disabled{cursor:default}.mc-option .mc-pseudo-checkbox{margin-right:8px}.mc-option .mc-option-overlay{position:absolute;top:calc(-1 * var(--mc-option-size-border-width, 2px));left:calc(-1 * var(--mc-option-size-border-width, 2px));right:calc(-1 * var(--mc-option-size-border-width, 2px));bottom:calc(-1 * var(--mc-option-size-border-width, 2px));pointer-events:none;border-radius:inherit}.mc-option-text{display:inline-block;flex-grow:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.mc-select{box-sizing:border-box;display:inline-block;width:100%;outline:none}.mc-select .mc-select__trigger{display:flex;box-sizing:border-box;position:relative;height:var(--mc-select-size-height,30px);cursor:pointer;padding-left:calc(var(--mc-select-size-left-padding, 16px) - var(--mc-form-field-size-border-width, 1px));padding-right:calc(var(--mc-select-size-right-padding, 8px) - var(--mc-form-field-size-border-width, 1px))}.mc-select .mc-select__trigger.mc-select__trigger_multiple{padding-left:calc(var(--mc-select-size-left-padding-multiple, 8px) - var(--mc-form-field-size-border-width, 1px))}.mc-select .mc-select__trigger.mc-select__trigger_multiple .mc-tag.mc-disabled .mc-tag__text{margin-right:7px}.mc-select.mc-disabled .mc-select__trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mc-select__no-options-message{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;position:relative;max-width:100%;height:var(--mc-option-size-height,32px);cursor:default;outline:none;padding-left:var(--mc-option-size-horizontal-padding,16px);padding-right:var(--mc-option-size-horizontal-padding,16px)}.mc-select__matcher{display:flex;align-items:center;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mc-select__matcher>span{width:100%}.mc-select__match-list{display:flex;flex-wrap:wrap;overflow:hidden;max-height:calc(var(--mc-select-size-height, 30px) - var(--mc-select-panel-size-border-width, 1px))}.mc-select__match-list .mc-tag{margin-right:4px}.mc-select__match-container{display:flex;flex-direction:row;justify-content:space-between;width:100%}.mc-select__match-container .mc-select__match-hidden-text{flex:0 0 70px;align-self:center;padding:0 8px;text-align:right}.mc-select__arrow-wrapper{align-self:center}.mc-form-field-appearance-fill .mc-select__arrow-wrapper,.mc-form-field-appearance-standard .mc-select__arrow-wrapper{transform:translateY(-50%)}.mc-form-field-appearance-outline .mc-select__arrow-wrapper{transform:translateY(-25%)}.mc-select__panel{min-width:100%;max-width:var(--mc-select-panel-size-max-width,640px);overflow:hidden;border-width:var(--mc-select-panel-size-border-width,1px);border-style:solid;border-bottom-left-radius:var(--mc-select-panel-size-border-radius,3px);border-bottom-right-radius:var(--mc-select-panel-size-border-radius,3px)}.mc-select__panel .mc-optgroup-label,.mc-select__panel .mc-option{font-size:inherit;line-height:var(--mc-option-size-height,32px);height:var(--mc-option-size-height,32px)}.mc-select__content{max-height:var(--mc-select-panel-size-max-height,232px);padding:var(--mc-select-panel-size-vertical-padding,4px) 0;overflow:auto}.mc-select__content .cdk-virtual-scroll-viewport{min-height:var(--mc-select-panel-size-max-height,232px)-8px;max-height:var(--mc-select-panel-size-max-height,232px)-8px}.mc-form-field-type-select:not(.mc-disabled) .mc-form-field-flex{cursor:pointer}.mc-select__search-container{border-bottom-width:1px;border-bottom-style:solid}"]}]}],k.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:n.NgZone},{type:n.Renderer2},{type:r.ErrorStateMatcher},{type:n.ElementRef},{type:Array,decorators:[{type:n.Optional},{type:n.Inject,args:[h.NG_VALIDATORS]}]},{type:c.Directionality,decorators:[{type:n.Optional}]},{type:h.NgForm,decorators:[{type:n.Optional}]},{type:h.FormGroupDirective,decorators:[{type:n.Optional}]},{type:o.McFormField,decorators:[{type:n.Optional}]},{type:h.NgControl,decorators:[{type:n.Self},{type:n.Optional}]},{type:h.NgModel,decorators:[{type:n.Optional},{type:n.Self}]},{type:h.FormControlName,decorators:[{type:n.Optional},{type:n.Self}]},{type:void 0,decorators:[{type:n.Inject,args:[r.MC_SELECT_SCROLL_STRATEGY]}]},{type:void 0,decorators:[{type:n.Optional},{type:n.Inject,args:[r.MC_VALIDATION]}]}]},k.propDecorators={trigger:[{type:n.ViewChild,args:["trigger",{static:!1}]}],panel:[{type:n.ViewChild,args:["panel",{static:!1}]}],optionsContainer:[{type:n.ViewChild,args:["optionsContainer",{static:!1}]}],overlayDir:[{type:n.ViewChild,args:[t.CdkConnectedOverlay,{static:!1}]}],tags:[{type:n.ViewChildren,args:[a.McTag]}],customTrigger:[{type:n.ContentChild,args:[O,{static:!1}]}],cleaner:[{type:n.ContentChild,args:["mcSelectCleaner",{static:!0}]}],options:[{type:n.ContentChildren,args:[r.McOption,{descendants:!0}]}],optionGroups:[{type:n.ContentChildren,args:[r.McOptgroup]}],search:[{type:n.ContentChild,args:[S,{static:!1}]}],hiddenItemsText:[{type:n.Input}],panelClass:[{type:n.Input}],backdropClass:[{type:n.Input}],errorStateMatcher:[{type:n.Input}],sortComparator:[{type:n.Input}],openedChange:[{type:n.Output}],openedStream:[{type:n.Output,args:["opened"]}],closedStream:[{type:n.Output,args:["closed"]}],selectionChange:[{type:n.Output}],valueChange:[{type:n.Output}],hasBackdrop:[{type:n.Input}],placeholder:[{type:n.Input}],required:[{type:n.Input}],multiple:[{type:n.Input}],compareWith:[{type:n.Input}],value:[{type:n.Input}],id:[{type:n.Input}],hiddenItemsTextFormatter:[{type:n.Input}]};var M=function(){};M.decorators=[{type:n.NgModule,args:[{imports:[i.CommonModule,t.OverlayModule,r.McOptionModule,s.McIconModule,a.McTagsModule],exports:[o.McFormFieldModule,k,S,w,O,r.McOptionModule,i.CommonModule],declarations:[k,S,w,O],providers:[r.MC_SELECT_SCROLL_STRATEGY_PROVIDER]}]}],e.McSelect=k,e.McSelectBase=x,e.McSelectChange=C,e.McSelectModule=M,e.McSelectSearch=S,e.McSelectSearchEmptyResult=w,e.McSelectTrigger=O,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-select.umd.min.js.map