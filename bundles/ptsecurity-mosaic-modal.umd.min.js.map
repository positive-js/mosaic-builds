{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../packages/mosaic/modal/modal-control.service.ts","../../../packages/mosaic/modal/modal.type.ts","../../../packages/mosaic/modal/modal-ref.class.ts","../../../packages/mosaic/modal/modal-util.ts","../../../packages/mosaic/modal/modal.component.ts","../../../packages/mosaic/modal/css-unit.pipe.ts","../../../packages/mosaic/modal/modal.directive.ts","../../../packages/mosaic/modal/modal.service.ts","../../../packages/mosaic/modal/modal.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","create","__values","o","s","Symbol","iterator","m","i","length","next","value","done","TypeError","McModalControlService","parentService","this","rootOpenModals","rootAfterAllClose","Subject","rootRegisteredMetaMap","Map","defineProperty","afterAllClose","openModals","registeredMetaMap","registerModal","modalRef","_this","hasRegistered","afterOpenSubscription","afterOpen","subscribe","push","afterCloseSubscription","afterClose","removeOpenModal","set","has","closeAll","close","index","indexOf","splice","Injectable","decorators","type","Optional","SkipSelf","ModalSize","modalUtilObject","ModalUtil","document","lastPosition","x","y","listenDocumentClick","getLastClickPosition","addEventListener","event","clientX","clientY","McModalComponent","overlay","renderer","cfr","elementRef","viewContainer","modalControl","changeDetector","_super","mcModalType","_mcVisible","mcVisibleChange","EventEmitter","mcZIndex","mcSize","Normal","mcCloseByESC","_mcClosable","_mcMask","_mcMaskClosable","mcAfterOpen","mcAfterClose","mcOkType","_mcOkLoading","mcOnOk","_mcCancelLoading","mcOnCancel","isTopOverflow","isBottomOverflow","transformOrigin","mcGetContainer","String","__","constructor","__extends","asObservable","mcOkText","mcCancelText","mcVisible","animationState","ngOnInit","isComponent","mcContent","createDynamicComponent","isModalButtons","mcFooter","formatModalButtons","mcComponent","container","HTMLElement","appendChild","nativeElement","OverlayRef","overlayElement","ngOnChanges","changes","handleVisibleStateChange","firstChange","ngAfterViewInit","contentComponentRef","bodyContainer","insert","hostView","_a","getElement","getElementsByTagName","focus","_c","autoFocusedButtons","toArray","_d","autoFocusedButton","autofocus","checkOverflow","ngOnDestroy","dispose","modalBody","scrollTop","offsetHeight","scrollHeight","open","changeVisibleFromInside","result","destroy","markForCheck","triggerOk","onClickOkCancel","triggerCancel","getInstance","getContentComponentRef","getContentComponent","instance","getMcFooter","getElementsByClassName","item","onClickMask","$event","mcMask","mcMaskClosable","target","classList","contains","isModalType","onKeyDown","keyCode","ESCAPE","preventDefault","ctrlKey","ENTER","querySelector","click","onClickCloseBtn","trigger","ok","cancel","loadingKey","emit","caseClose_1","doClose","isPromise","handleThen","then","catch","isNonEmptyString","isTemplateRef","TemplateRef","Type","isArray","getButtonCallableProp","options","prop","args","apply","onButtonClick","button","loading","visible","animation","closeResult","changeBodyOverflow","Promise","resolve","animateTo","changeAnimationState","state","maskAnimationClassMap","_b","modalAnimationClassMap","changeDetectorRef","isVisible","window","setTimeout","updateTransformOrigin","buttons","map","assign","size","autoLoading","show","disabled","component","factory","resolveComponentFactory","childInjector","Injector","providers","provide","McModalRef","useValue","parent","injector","mcComponentParams","detectChanges","modalElement","modalContainer","offsetLeft","offsetTop","plusNum","setStyle","body","removeStyle","obj","Component","selector","template","encapsulation","ViewEncapsulation","None","changeDetection","ChangeDetectionStrategy","OnPush","host","(keydown)","Overlay","Renderer2","ComponentFactoryResolver","ElementRef","ViewContainerRef","ChangeDetectorRef","Inject","DOCUMENT","Input","Output","ViewChild","static","read","ViewChildren","CssUnitPipe","transform","defaultUnit","formatted","isNaN","Pipe","name","Directive","class","ModalBuilderForService","createModal","undefined","changeProps","destroyModal","overlayRef","keydownEvents","pipe","filter","attach","ComponentPortal","McModalService","confirm","confirmType","console","warn","mcClassName","success","simpleConfirm","delete","NgModule","imports","CommonModule","OverlayModule","A11yModule","McButtonModule","McIconModule","exports","McModalTitle","McModalBody","McModalFooter","declarations","McModalMainAction","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Injectable, Optional, SkipSelf } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\n\nimport { McModalRef } from './modal-ref.class';\n\n\ninterface IRegisteredMeta {\n    modalRef: McModalRef;\n    afterOpenSubscription: Subscription;\n    afterCloseSubscription: Subscription;\n}\n\n@Injectable()\nexport class McModalControlService {\n    // Track singleton afterAllClose through over the injection tree\n    get afterAllClose(): Subject<void> {\n        return this.parentService ? this.parentService.afterAllClose : this.rootAfterAllClose;\n    }\n\n    // Track singleton openModals array through over the injection tree\n    get openModals(): McModalRef[] {\n        return this.parentService ? this.parentService.openModals : this.rootOpenModals;\n    }\n\n    // @ts-ignore\n    private rootOpenModals: McModalRef[] = this.parentService ? null : [];\n    // @ts-ignore\n    private rootAfterAllClose: Subject<void> = this.parentService ? null : new Subject<void>();\n    // @ts-ignore\n    private rootRegisteredMetaMap: Map<McModalRef, IRegisteredMeta> = this.parentService ? null : new Map();\n\n    // Registered modal for later usage\n    private get registeredMetaMap(): Map<McModalRef, IRegisteredMeta> {\n        return this.parentService ? this.parentService.registeredMetaMap : this.rootRegisteredMetaMap;\n    }\n\n    constructor(\n        @Optional() @SkipSelf() private parentService: McModalControlService) {\n    }\n\n    // Register a modal to listen its open/close\n    registerModal(modalRef: McModalRef): void {\n        if (!this.hasRegistered(modalRef)) {\n            const afterOpenSubscription = modalRef.afterOpen.subscribe(() => this.openModals.push(modalRef));\n            const afterCloseSubscription = modalRef.afterClose.subscribe(() => this.removeOpenModal(modalRef));\n\n            this.registeredMetaMap.set(modalRef, {modalRef, afterOpenSubscription, afterCloseSubscription});\n        }\n    }\n\n    hasRegistered(modalRef: McModalRef): boolean {\n        return this.registeredMetaMap.has(modalRef);\n    }\n\n    // Close all registered opened modals\n    closeAll(): void {\n        let i = this.openModals.length;\n\n        while (i--) {\n            this.openModals[i].close();\n        }\n    }\n\n    private removeOpenModal(modalRef: McModalRef): void {\n        const index = this.openModals.indexOf(modalRef);\n\n        if (index > -1) {\n            this.openModals.splice(index, 1);\n\n            if (!this.openModals.length) {\n                this.afterAllClose.next();\n            }\n        }\n    }\n}\n","import { OverlayRef } from '@angular/cdk/overlay';\nimport { EventEmitter, TemplateRef, Type } from '@angular/core';\n\n\nexport type OnClickCallback<T> = ((instance: T) => (false | void | {}) | Promise<false | void | {}>);\n\n// Different modal styles we have supported\nexport type ModalType = 'default' | 'confirm' | 'custom';\n\n// Subtypes of Confirm Modal\nexport type ConfirmType = 'confirm' | 'success' | 'warn';\n\nexport enum ModalSize {\n    Small = 'small',\n    Normal = 'normal',\n    Large = 'large'\n}\n\n// Public options for using by service\nexport interface IModalOptions<T = any, R = any> {\n    mcModalType?: ModalType;\n    mcVisible?: boolean;\n    mcZIndex?: number;\n    mcWidth?: number | string;\n    mcSize?: ModalSize;\n    mcWrapClassName?: string;\n    mcClassName?: string;\n    mcStyle?: object;\n    mcTitle?: string | TemplateRef<{}>;\n    mcContent?: string | TemplateRef<{}> | Type<T>;\n    mcComponent?: Type<T>; // The instance of component opened into the dialog.\n    mcComponentParams?: Partial<T>;\n    mcClosable?: boolean;\n    mcMask?: boolean;\n    mcMaskClosable?: boolean;\n    mcMaskStyle?: object;\n    mcBodyStyle?: object;\n    mcFooter?: string | TemplateRef<{}> | IModalButtonOptions<T>[]; // Default Modal ONLY\n    mcGetContainer?: HTMLElement | OverlayRef | (() => HTMLElement | OverlayRef) | null; // STATIC\n    mcAfterOpen?: EventEmitter<void>;\n    mcAfterClose?: EventEmitter<R>;\n    mcCloseByESC?: boolean;\n\n    // --- Predefined OK & Cancel buttons\n    mcOkText?: string;\n    mcOkType?: string;\n    mcOkLoading?: boolean;\n    mcOnOk?: EventEmitter<T> | OnClickCallback<T>;\n    mcCancelText?: string;\n    mcCancelLoading?: boolean;\n    mcOnCancel?: EventEmitter<T> | OnClickCallback<T>;\n}\n\n// tslint:disable-next-line:no-any\nexport interface IModalOptionsForService<T = any> extends IModalOptions<T> {\n    mcOnOk?: OnClickCallback<T>;\n    mcOnCancel?: OnClickCallback<T>;\n}\n\nexport interface IModalButtonOptions<T = any> {\n    label: string;\n    // tslint:disable-next-line\n    type?: string;\n    shape?: string;\n    ghost?: boolean;\n    size?: string;\n    // Default: true, indicate whether show loading automatically while onClick returned a Promise\n    autoLoading?: boolean;\n\n    // [NOTE] \"componentInstance\" will refer to the component's instance when using Component\n    show?: boolean | ((this: IModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n    loading?: boolean | ((this: IModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n    disabled?: boolean | ((this: IModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n\n    autoFocus?: boolean;\n    mcModalMainAction?: boolean;\n\n    onClick?(this: IModalButtonOptions<T>, contentComponentInstance?: T): (void | {}) | Promise<(void | {})>;\n}\n","import { Observable } from 'rxjs';\n\nimport { McModalComponent } from './modal.component';\n\n\n/**\n * API class that public to users to handle the modal instance.\n * McModalRef is aim to avoid accessing to the modal instance directly by users.\n */\n// tslint:disable-next-line:naming-convention\nexport abstract class McModalRef<T = any, R = any> {\n    abstract afterOpen: Observable<void>;\n    abstract afterClose: Observable<R>;\n\n    abstract open(): void;\n\n    abstract close(result?: R): void;\n\n    abstract destroy(result?: R): void;\n\n    /**\n     * Trigger the mcOnOk/mcOnCancel by manual\n     */\n    abstract triggerOk(): void;\n\n    abstract triggerCancel(): void;\n\n    // /**\n    //  * Return the ComponentRef of mcContent when specify mcContent as a Component\n    //  * Note: this method may return undefined if the Component has not ready yet.\n    //    (it only available after Modal's ngOnInit)\n    //  */\n    // abstract getContentComponentRef(): ComponentRef<{}>;\n\n    /**\n     * Return the component instance of mcContent when specify mcContent as a Component\n     * Note: this method may return undefined if the Component has not ready yet.\n     * (it only available after Modal's ngOnInit)\n     */\n    abstract getContentComponent(): T;\n\n    /**\n     * Get the dom element of this Modal\n     */\n    abstract getElement(): HTMLElement;\n\n    /**\n     * Get the instance of the Modal itself\n     */\n    abstract getInstance(): McModalComponent;\n\n    /**\n     * Call markForCheck for change detector\n     */\n    abstract markForCheck();\n}\n","export interface IClickPosition {\n    x: number;\n    y: number;\n}\n\nexport class ModalUtil {\n    private lastPosition: IClickPosition;\n\n    constructor(private document: Document) {\n        this.lastPosition = {x: -1, y: -1};\n        this.listenDocumentClick();\n    }\n\n    getLastClickPosition(): IClickPosition {\n        return this.lastPosition;\n    }\n\n    listenDocumentClick(): void {\n        this.document.addEventListener('click', (event: MouseEvent) => {\n            this.lastPosition = {x: event.clientX, y: event.clientY};\n        });\n    }\n}\n\nexport const modalUtilObject = new ModalUtil(document);\n","import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { DOCUMENT } from '@angular/common';\nimport {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ComponentFactoryResolver,\n    ComponentRef,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Injector,\n    Input,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    Output,\n    QueryList,\n    Renderer2,\n    SimpleChanges,\n    TemplateRef,\n    Type,\n    ViewChild,\n    ViewChildren,\n    ViewContainerRef,\n    ViewEncapsulation\n} from '@angular/core';\nimport { ESCAPE, ENTER } from '@ptsecurity/cdk/keycodes';\nimport { Observable } from 'rxjs';\n\nimport { McModalControlService } from './modal-control.service';\nimport { McModalRef } from './modal-ref.class';\nimport { modalUtilObject as ModalUtil } from './modal-util';\nimport { IModalButtonOptions, IModalOptions, ModalSize, ModalType, OnClickCallback } from './modal.type';\n\n\n// Duration when perform animations (ms)\nexport const MODAL_ANIMATE_DURATION = 200;\n\ntype AnimationState = 'enter' | 'leave' | null;\n\n\n@Component({\n    selector: 'mc-modal',\n    templateUrl: './modal.component.html',\n    styleUrls: ['./modal.scss'],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        '(keydown)': 'onKeyDown($event)'\n    }\n})\nexport class McModalComponent<T = any, R = any> extends McModalRef<T, R>\n    implements OnInit, OnChanges, AfterViewInit, OnDestroy, IModalOptions {\n\n    @Input() mcModalType: ModalType = 'default';\n\n    // The instance of component opened into the dialog.\n    @Input() mcComponent: Type<T>;\n    // If not specified, will use <ng-content>\n    @Input() mcContent: string | TemplateRef<{}> | Type<T>;\n    // available when mcContent is a component\n    @Input() mcComponentParams: T;\n    // Default Modal ONLY\n    @Input() mcFooter: string | TemplateRef<{}> | IModalButtonOptions<T>[];\n\n    @Input()\n    get mcVisible() { return this._mcVisible; }\n    set mcVisible(value) { this._mcVisible = value; }\n\n    private _mcVisible = false;\n\n    @Output() mcVisibleChange = new EventEmitter<boolean>();\n\n    @Input() mcZIndex: number = 1000;\n    @Input() mcWidth: number | string;\n    @Input() mcSize: ModalSize = ModalSize.Normal;\n    @Input() mcWrapClassName: string;\n    @Input() mcClassName: string;\n    @Input() mcStyle: object;\n    @Input() mcTitle: string | TemplateRef<{}>;\n    @Input() mcCloseByESC: boolean = true;\n\n    @Input()\n    get mcClosable() { return this._mcClosable; }\n    set mcClosable(value) { this._mcClosable = value; }\n    private _mcClosable = true;\n\n    @Input()\n    get mcMask() { return this._mcMask; }\n    set mcMask(value) { this._mcMask = value; }\n    private _mcMask = true;\n\n    @Input()\n    get mcMaskClosable() { return this._mcMaskClosable; }\n    set mcMaskClosable(value) { this._mcMaskClosable = value; }\n    private _mcMaskClosable = false;\n\n    @Input() mcMaskStyle: object;\n    @Input() mcBodyStyle: object;\n\n    // Trigger when modal open(visible) after animations\n    @Output() mcAfterOpen = new EventEmitter<void>();\n    // Trigger when modal leave-animation over\n    @Output() mcAfterClose = new EventEmitter<R>();\n\n    // --- Predefined OK & Cancel buttons\n    @Input() mcOkText: string;\n    @Input() mcOkType = 'primary';\n\n    @Input()\n    get mcOkLoading() { return this._mcOkLoading; }\n    set mcOkLoading(value) { this._mcOkLoading = value; }\n    private _mcOkLoading = false;\n\n    @Input() @Output() mcOnOk: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n    @Input() mcCancelText: string;\n\n    @Input()\n    get mcCancelLoading() { return this._mcCancelLoading; }\n    set mcCancelLoading(value) { this._mcCancelLoading = value; }\n    private _mcCancelLoading = false;\n\n    @Input() @Output() mcOnCancel: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n\n    @ViewChild('modalContainer', { static: true }) modalContainer: ElementRef;\n    @ViewChild('bodyContainer', { read: ViewContainerRef, static: false }) bodyContainer: ViewContainerRef;\n    // Only aim to focus the ok button that needs to be auto focused\n    @ViewChildren('autoFocusedButton', { read: ElementRef }) autoFocusedButtons: QueryList<ElementRef>;\n\n    @ViewChild('modalBody') modalBody: ElementRef;\n\n    isTopOverflow: boolean = false;\n    isBottomOverflow: boolean = false;\n\n    maskAnimationClassMap: object;\n    modalAnimationClassMap: object;\n    // The origin point that animation based on\n    transformOrigin = '0px 0px 0px';\n\n    // Observable alias for mcAfterOpen\n    get afterOpen(): Observable<void> {\n        return this.mcAfterOpen.asObservable();\n    }\n\n    // Observable alias for mcAfterClose\n    get afterClose(): Observable<R> {\n        return this.mcAfterClose.asObservable();\n    }\n\n    get okText(): string {\n        return this.mcOkText;\n    }\n\n    get cancelText(): string {\n        return this.mcCancelText;\n    }\n\n    // Indicate whether this dialog should hidden\n    get hidden(): boolean {\n        return !this.mcVisible && !this.animationState;\n    }\n\n    // Handle the reference when using mcContent as Component\n    private contentComponentRef: ComponentRef<T>;\n    // Current animation state\n    private animationState: AnimationState;\n    private container: HTMLElement | OverlayRef;\n\n    constructor(\n        private overlay: Overlay,\n        private renderer: Renderer2,\n        private cfr: ComponentFactoryResolver,\n        private elementRef: ElementRef,\n        private viewContainer: ViewContainerRef,\n        private modalControl: McModalControlService,\n        private changeDetector: ChangeDetectorRef,\n        @Inject(DOCUMENT) private document: any\n    ) {\n        super();\n    }\n\n    @Input() mcGetContainer: HTMLElement | OverlayRef | (() => HTMLElement | OverlayRef) = () => this.overlay.create();\n\n    ngOnInit() {\n        // Create component along without View\n        if (this.isComponent(this.mcContent)) {\n            this.createDynamicComponent(this.mcContent as Type<T>);\n        }\n\n        // Setup default button options\n        if (this.isModalButtons(this.mcFooter)) {\n            this.mcFooter = this.formatModalButtons(this.mcFooter as IModalButtonOptions<T>[]);\n        }\n\n        if (this.isComponent(this.mcComponent)) {\n            this.createDynamicComponent(this.mcComponent);\n        }\n\n        // Place the modal dom to elsewhere\n        this.container = typeof this.mcGetContainer === 'function' ? this.mcGetContainer() : this.mcGetContainer;\n        if (this.container instanceof HTMLElement) {\n            this.container.appendChild(this.elementRef.nativeElement);\n        } else if (this.container instanceof OverlayRef) {\n            // NOTE: only attach the dom to overlay, the view container is not changed actually\n            this.container.overlayElement.appendChild(this.elementRef.nativeElement);\n        }\n\n        // Register modal when afterOpen/afterClose is stable\n        this.modalControl.registerModal(this);\n    }\n\n    // [NOTE] NOT available when using by service!\n    // Because ngOnChanges never be called when using by service,\n    // here we can't support \"mcContent\"(Component) etc. as inputs that initialized dynamically.\n    // BUT: User also can change \"mcContent\" dynamically to trigger UI changes\n    // (provided you don't use \bComponent that needs initializations)\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes.mcVisible) {\n            // Do not trigger animation while initializing\n            this.handleVisibleStateChange(this.mcVisible, !changes.mcVisible.firstChange);\n        }\n    }\n\n    ngAfterViewInit() {\n        // If using Component, it is the time to attach View while bodyContainer is ready\n        if (this.contentComponentRef) {\n            this.bodyContainer.insert(this.contentComponentRef.hostView);\n        }\n        this.getElement().getElementsByTagName('button')[0]?.focus();\n\n        for (const autoFocusedButton of this.autoFocusedButtons.toArray()) {\n            if (autoFocusedButton.nativeElement.autofocus) {\n                (autoFocusedButton.nativeElement as HTMLButtonElement).focus();\n\n                break;\n            }\n        }\n\n        this.checkOverflow();\n    }\n\n    ngOnDestroy() {\n        if (this.container instanceof OverlayRef) {\n            this.container.dispose();\n        }\n    }\n\n    checkOverflow(): void {\n        const nativeElement = this.modalBody?.nativeElement;\n\n        if (!nativeElement) { return; }\n\n        const scrollTop: number = nativeElement.scrollTop;\n        const offsetHeight: number = nativeElement.offsetHeight;\n        const scrollHeight: number = nativeElement.scrollHeight;\n\n        this.isTopOverflow = scrollTop > 0;\n\n        this.isBottomOverflow = (scrollTop as number + offsetHeight as number) < scrollHeight;\n    }\n\n    open() {\n        this.changeVisibleFromInside(true);\n    }\n\n    close(result?: R) {\n        this.changeVisibleFromInside(false, result);\n    }\n\n    // Destroy equals Close\n    destroy(result?: R) {\n        this.close(result);\n    }\n\n    markForCheck() {\n        this.changeDetector.markForCheck();\n    }\n\n    triggerOk() {\n        this.onClickOkCancel('ok');\n    }\n\n    triggerCancel() {\n        this.onClickOkCancel('cancel');\n    }\n\n    getInstance(): McModalComponent {\n        return this;\n    }\n\n    getContentComponentRef(): ComponentRef<T> {\n        return this.contentComponentRef;\n    }\n\n    getContentComponent(): T {\n        return this.contentComponentRef && this.contentComponentRef.instance;\n    }\n\n    getElement(): HTMLElement {\n        return this.elementRef && this.elementRef.nativeElement;\n    }\n\n    getMcFooter(): HTMLElement {\n        return this.getElement().getElementsByClassName('mc-modal-footer').item(0) as HTMLElement;\n    }\n\n    onClickMask($event: MouseEvent) {\n        if (\n            this.mcMask &&\n            this.mcMaskClosable &&\n            ($event.target as HTMLElement).classList.contains('mc-modal-wrap') &&\n            this.mcVisible\n        ) {\n            this.onClickOkCancel('cancel');\n        }\n    }\n\n    // tslint:disable-next-line: no-reserved-keywords\n    isModalType(type: ModalType): boolean {\n        return this.mcModalType === type;\n    }\n\n    onKeyDown(event: KeyboardEvent): void {\n\n        // tslint:disable-next-line:deprecation .key isn't supported in Edge\n        if (event.keyCode === ESCAPE && this.container && (this.container instanceof OverlayRef)) {\n\n            this.close();\n            event.preventDefault();\n        }\n        // tslint:disable-next-line:deprecation .key isn't supported in Edge\n        if (event.ctrlKey && event.keyCode === ENTER) {\n            if (this.mcModalType === 'confirm') {\n                this.triggerOk();\n            }\n\n            (this.getElement().querySelector('[mc-modal-main-action]') as HTMLElement)?.click();\n\n            event.preventDefault();\n        }\n    }\n\n    // AoT\n    onClickCloseBtn() {\n        if (this.mcVisible) {\n            this.onClickOkCancel('cancel');\n        }\n    }\n\n    // AoT\n    // tslint:disable-next-line: no-reserved-keywords\n    onClickOkCancel(type: 'ok' | 'cancel') {\n        const trigger = { ok: this.mcOnOk, cancel: this.mcOnCancel }[type];\n        const loadingKey = { ok: 'mcOkLoading', cancel: 'mcCancelLoading' }[type];\n\n        if (trigger instanceof EventEmitter) {\n            trigger.emit(this.getContentComponent());\n        } else if (typeof trigger === 'function') {\n\n            const result = trigger(this.getContentComponent());\n            // Users can return \"false\" to prevent closing by default\n            const caseClose = (doClose: boolean | void | {}) => (doClose !== false) && this.close(doClose as R);\n\n            if (isPromise(result)) {\n                this[loadingKey] = true;\n                const handleThen = (doClose) => {\n                    this[loadingKey] = false;\n                    caseClose(doClose);\n                };\n                (result as Promise<void>).then(handleThen).catch(handleThen);\n            } else {\n                caseClose(result);\n            }\n        }\n    }\n\n    // AoT\n    isNonEmptyString(value: {}): boolean {\n        return typeof value === 'string' && value !== '';\n    }\n\n    // AoT\n    isTemplateRef(value: {}): boolean {\n        return value instanceof TemplateRef;\n    }\n\n    // AoT\n    isComponent(value: {}): boolean {\n        return value instanceof Type;\n    }\n\n    // AoT\n    isModalButtons(value: {}): boolean {\n        return Array.isArray(value) && value.length > 0;\n    }\n\n    // Lookup a button's property, if the prop is a function, call & then return the result, otherwise, return itself.\n    // AoT\n    getButtonCallableProp(options: IModalButtonOptions<T>, prop: string): {} {\n        const value = options[prop];\n        const args: any[] = [];\n        if (this.contentComponentRef) {\n            args.push(this.contentComponentRef.instance);\n        }\n\n        return typeof value === 'function' ? value.apply(options, args) : value;\n    }\n\n    // On mcFooter's modal button click\n    // AoT\n    onButtonClick(button: IModalButtonOptions<T>) {\n        // Call onClick directly\n        // tslint:disable-next-line:no-inferred-empty-object-type  rule seems to be broken\n        const result = this.getButtonCallableProp(button, 'onClick');\n        if (isPromise(result)) {\n            button.loading = true;\n            (result as Promise<{}>).then(() => button.loading = false).catch(() => button.loading = false);\n        }\n    }\n\n    // Do rest things when visible state changed\n    private handleVisibleStateChange(visible: boolean, animation: boolean = true, closeResult?: R): Promise<any> {\n        // Hide scrollbar at the first time when shown up\n        if (visible) {\n            this.changeBodyOverflow(1);\n        }\n\n        return Promise\n            .resolve(animation && this.animateTo(visible))\n            // Emit open/close event after animations over\n            .then(() => {\n                if (visible) {\n                    this.mcAfterOpen.emit();\n                } else {\n                    this.mcAfterClose.emit(closeResult);\n                    // Show/hide scrollbar when animation is over\n                    this.changeBodyOverflow();\n                }\n            });\n    }\n\n    // Change mcVisible from inside\n    private changeVisibleFromInside(visible: boolean, closeResult?: R): Promise<void> {\n        if (this.mcVisible !== visible) {\n            // Change mcVisible value immediately\n            this.mcVisible = visible;\n            this.mcVisibleChange.emit(visible);\n\n            return this.handleVisibleStateChange(visible, true, closeResult);\n        }\n\n        return Promise.resolve();\n    }\n\n    private changeAnimationState(state: AnimationState) {\n        this.animationState = state;\n        if (state) {\n            this.maskAnimationClassMap = {\n                [`fade-${state}`]: true,\n                [`fade-${state}-active`]: true\n            };\n\n            this.modalAnimationClassMap = {\n                [`zoom-${state}`]: true,\n                [`zoom-${state}-active`]: true\n            };\n        } else {\n            // @ts-ignore\n            this.maskAnimationClassMap = this.modalAnimationClassMap = null;\n        }\n\n        if (this.contentComponentRef) {\n            this.contentComponentRef.changeDetectorRef.markForCheck();\n        } else {\n            this.changeDetector.markForCheck();\n        }\n    }\n\n    private animateTo(isVisible: boolean): Promise<any> {\n        // Figure out the lastest click position when shows up\n        if (isVisible) {\n            // [NOTE] Using timeout due to the document.click event is fired later than visible change,\n            // so if not postponed to next event-loop, we can't get the lastest click position\n            window.setTimeout(() => this.updateTransformOrigin());\n        }\n\n        this.changeAnimationState(isVisible ? 'enter' : 'leave');\n\n        // Return when animation is over\n        return new Promise((resolve) => {\n            return window.setTimeout(\n                () => {\n                    this.changeAnimationState(null);\n                    resolve();\n                },\n                MODAL_ANIMATE_DURATION\n            );\n        });\n    }\n\n    private formatModalButtons(buttons: IModalButtonOptions<T>[]): IModalButtonOptions<T>[] {\n        return buttons.map((button) => {\n\n            return {\n                ...{\n                    type: 'default',\n                    size: 'default',\n                    autoLoading: true,\n                    show: true,\n                    loading: false,\n                    disabled: false\n                },\n                ...button\n            };\n        });\n    }\n\n    /**\n     * Create a component dynamically but not attach to any View\n     * (this action will be executed when bodyContainer is ready)\n     * @param component Component class\n     */\n    private createDynamicComponent(component: Type<T>) {\n        const factory = this.cfr.resolveComponentFactory(component);\n        const childInjector = Injector.create({\n            providers: [{provide: McModalRef, useValue: this}],\n            parent: this.viewContainer.injector\n        });\n\n        this.contentComponentRef = factory.create(childInjector);\n\n        if (this.mcComponentParams) {\n            Object.assign(this.contentComponentRef.instance, this.mcComponentParams);\n        }\n\n        // Do the first change detection immediately\n        // (or we do detection at ngAfterViewInit, multi-changes error will be thrown)\n        this.contentComponentRef.changeDetectorRef.detectChanges();\n    }\n\n    // Update transform-origin to the last click position on document\n    private updateTransformOrigin() {\n        const modalElement = this.modalContainer.nativeElement as HTMLElement;\n        const lastPosition = ModalUtil.getLastClickPosition();\n\n        if (lastPosition) {\n            this.transformOrigin = `${lastPosition.x - modalElement.offsetLeft}px ${lastPosition.y - modalElement.offsetTop}px 0px`;\n        }\n    }\n\n    /**\n     * Take care of the body's overflow to decide the existense of scrollbar\n     * @param plusNum The number that the openModals.length will increase soon\n     */\n    private changeBodyOverflow(plusNum: number = 0) {\n        const openModals = this.modalControl.openModals;\n\n        if (openModals.length + plusNum > 0) {\n            this.renderer.setStyle(this.document.body, 'overflow', 'hidden');\n        } else {\n            this.renderer.removeStyle(this.document.body, 'overflow');\n        }\n    }\n}\n\n////////////\n\nfunction isPromise(obj: {} | void): boolean {\n    // tslint:disable-next-line: no-unbound-method\n    return !!obj &&\n        (typeof obj === 'object' || typeof obj === 'function') &&\n        typeof (obj as Promise<{}>).then === 'function' &&\n        typeof (obj as Promise<{}>).catch === 'function';\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n\n@Pipe({\n    name: 'toCssUnit'\n})\nexport class CssUnitPipe implements PipeTransform {\n    transform(value: number | string, defaultUnit: string = 'px'): string {\n        const formatted = +value;\n\n        return isNaN(formatted) ? `${value}` : `${formatted}${defaultUnit}`;\n    }\n}\n","import { Directive } from '@angular/core';\n\n\n@Directive({\n    selector: `[mc-modal-title], mc-modal-title, [mcModalTitle]`,\n    host: {\n        class: 'mc-modal-header mc-modal-title'\n    }\n})\nexport class McModalTitle {}\n\n@Directive({\n    selector: `[mc-modal-body], mc-modal-body, [mcModalBody]`,\n    host: {\n        class: 'mc-modal-body'\n    }\n})\nexport class McModalBody {}\n\n@Directive({\n    selector: `[mc-modal-footer], mc-modal-footer, [mcModalFooter]`,\n    host: {\n        class: 'mc-modal-footer'\n    }\n})\nexport class McModalFooter {}\n\n@Directive({\n    selector: `[mc-modal-main-action]`\n})\nexport class McModalMainAction {}\n","import { Overlay, OverlayRef } from '@angular/cdk/overlay';\nimport { ComponentPortal } from '@angular/cdk/portal';\nimport { ComponentRef, Injectable } from '@angular/core';\nimport { ESCAPE } from '@ptsecurity/cdk/keycodes';\nimport { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { McModalControlService } from './modal-control.service';\nimport { McModalRef } from './modal-ref.class';\nimport { McModalComponent } from './modal.component';\nimport { ConfirmType, IModalOptions, IModalOptionsForService } from './modal.type';\n\n\n// A builder used for managing service creating modals\nexport class ModalBuilderForService {\n    // Modal ComponentRef, \"null\" means it has been destroyed\n    private modalRef: ComponentRef<McModalComponent> | null;\n    private overlayRef: OverlayRef;\n\n    constructor(private overlay: Overlay, options: IModalOptionsForService = {}) {\n        this.createModal();\n\n        if (!('mcGetContainer' in options)) {\n            options.mcGetContainer = undefined;\n        }\n\n        this.changeProps(options);\n        this.modalRef!.instance.open();\n        this.modalRef!.instance.mcAfterClose.subscribe(() => this.destroyModal());\n\n        this.overlayRef.keydownEvents()\n            // @ts-ignore\n            .pipe(filter((event: KeyboardEvent) => {\n                // tslint:disable-next-line:deprecation replacement .key isn't supported in Edge\n                return event.keyCode === ESCAPE && options.mcCloseByESC;\n            }))\n            .subscribe(() => this.modalRef!.instance.close());\n    }\n\n    getInstance(): McModalComponent | null {\n        return this.modalRef && this.modalRef.instance;\n    }\n\n    destroyModal(): void {\n        if (this.modalRef) {\n            this.overlayRef.dispose();\n            this.modalRef = null;\n        }\n    }\n\n    private changeProps(options: IModalOptions): void {\n        if (this.modalRef) {\n            // here not limit user's inputs at runtime\n            Object.assign(this.modalRef.instance, options);\n        }\n    }\n\n    // Create component to ApplicationRef\n    private createModal(): void {\n        this.overlayRef = this.overlay.create();\n        this.modalRef = this.overlayRef.attach(new ComponentPortal(McModalComponent));\n    }\n}\n\n@Injectable()\nexport class McModalService {\n    // Track of the current close modals (we assume invisible is close this time)\n    get openModals(): McModalRef[] {\n        return this.modalControl.openModals;\n    }\n\n    get afterAllClose(): Observable<void> {\n        return this.modalControl.afterAllClose.asObservable();\n    }\n\n    constructor(\n        private overlay: Overlay,\n        private modalControl: McModalControlService\n    ) {}\n\n    // Closes all of the currently-open dialogs\n    closeAll(): void {\n        this.modalControl.closeAll();\n    }\n\n    create<T>(options: IModalOptionsForService<T> = {}): McModalRef<T> {\n\n        if (typeof options.mcOnCancel !== 'function') {\n            // Leave a empty function to close this modal by default\n            // tslint:disable-next-line\n            options.mcOnCancel = () => {};\n        }\n\n        if (!('mcCloseByESC' in options)) {\n            options.mcCloseByESC = true;\n        }\n\n        return new ModalBuilderForService(this.overlay, options).getInstance()!;\n    }\n\n    confirm<T>(options: IModalOptionsForService<T> = {}, confirmType: ConfirmType = 'confirm'): McModalRef<T> {\n        if ('mcFooter' in options) {\n            console.warn(`The Confirm-Modal doesn't support \"mcFooter\", this property will be ignored.`);\n        }\n\n        // NOTE: only support function currently by calling confirm()\n        if (typeof options.mcOnOk !== 'function') {\n            // Leave a empty function to close this modal by default\n            // tslint:disable-next-line\n            options.mcOnOk = () => {};\n        }\n\n        options.mcModalType = 'confirm';\n        options.mcClassName = `mc-confirm mc-confirm-${confirmType} ${options.mcClassName || ''}`;\n\n        return this.create(options);\n    }\n\n    open<T>(options: IModalOptionsForService<T> = {}): McModalRef<T> {\n\n        options.mcModalType = 'custom';\n\n        return this.create(options);\n    }\n\n    success<T>(options: IModalOptionsForService<T> = {}): McModalRef<T> {\n        return this.simpleConfirm(options, 'success');\n    }\n\n    // tslint:disable-next-line: no-reserved-keywords\n    delete<T>(options: IModalOptionsForService<T> = {}): McModalRef<T> {\n        return this.simpleConfirm(options, 'warn');\n    }\n\n    private simpleConfirm<T>(options: IModalOptionsForService<T> = {}, confirmType: ConfirmType): McModalRef<T> {\n        // Remove the Cancel button if the user not specify a Cancel button\n        if (!('mcCancelText' in options)) {\n            // @ts-ignore\n            options.mcCancelText = null;\n        }\n\n        return this.confirm(options, confirmType);\n    }\n}\n","import { A11yModule } from '@angular/cdk/a11y';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { McButtonModule } from '@ptsecurity/mosaic/button';\nimport { McIconModule } from '@ptsecurity/mosaic/icon';\n\nimport { CssUnitPipe } from './css-unit.pipe';\nimport { McModalControlService } from './modal-control.service';\nimport { McModalComponent } from './modal.component';\nimport { McModalBody, McModalFooter, McModalTitle, McModalMainAction } from './modal.directive';\nimport { McModalService } from './modal.service';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        OverlayModule,\n        A11yModule,\n        McButtonModule,\n        McIconModule\n    ],\n    exports: [\n        McModalComponent,\n        McModalTitle,\n        McModalBody,\n        McModalFooter\n    ],\n    declarations: [\n        McModalComponent,\n        McModalTitle,\n        McModalBody,\n        McModalFooter,\n        CssUnitPipe,\n        McModalMainAction\n    ],\n    providers: [\n        McModalControlService,\n        McModalService\n    ],\n    entryComponents: [McModalComponent]\n})\nexport class McModalModule {}\n"]}