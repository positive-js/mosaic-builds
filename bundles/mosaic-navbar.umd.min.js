/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/a11y"),require("@ptsecurity/mosaic/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@ptsecurity/cdk/platform")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/navbar",["exports","@angular/core","@ptsecurity/cdk/a11y","@ptsecurity/mosaic/core","rxjs","rxjs/operators","@angular/common","@ptsecurity/cdk/platform"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.navbar={}),e.ng.core,e.ng.cdk.a11y,e.ng.mosaic.core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.cdk.platform)}(this,function(e,t,n,i,r,o,a,s){"use strict";function c(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},p="mc-navbar-container",m="mc-navbar-item",d="mc-navbar-brand",u="mc-navbar-title",h=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"mc-navbar-logo",host:{class:"mc-navbar-logo"}}]}],e}(),f=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:d,host:{class:d}}]}],e}(),b=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:u,host:{class:u}}]}],e}(),v=function(){function e(e){this.elementRef=e}return e}(),g=i.mixinDisabled(v),y=function(e){function i(t,n){var i=e.call(this,t)||this;return i.elementRef=t,i._focusMonitor=n,i.tabIndex=0,i}return c(i,e),Object.defineProperty(i.prototype,"collapsedTitle",{set:function(e){this.elementRef.nativeElement.setAttribute("computedTitle",encodeURI(e))},enumerable:!0,configurable:!0}),i.prototype.ngOnInit=function(){this.denyClickIfDisabled(),this._focusMonitor.monitor(this.elementRef.nativeElement,!0)},i.prototype.ngOnDestroy=function(){this._focusMonitor.stopMonitoring(this.elementRef.nativeElement)},i.prototype.denyClickIfDisabled=function(){var e=this,t=this.elementRef.nativeElement.eventListeners("click");t.forEach(function(t){return e.elementRef.nativeElement.removeEventListener("click",t)}),this.elementRef.nativeElement.addEventListener("click",function(t){e.elementRef.nativeElement.hasAttribute("disabled")&&t.stopImmediatePropagation()},!0),t.forEach(function(t){return e.elementRef.nativeElement.addEventListener("click",t)})},i.decorators=[{type:t.Component,args:[{selector:m,template:"<ng-content></ng-content>",encapsulation:t.ViewEncapsulation.None,inputs:["disabled"],host:{"[attr.tabIndex]":"disabled ? -1 : tabIndex","[attr.disabled]":"disabled || null",class:"mc-navbar-item"}}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:n.FocusMonitor}]},i.propDecorators={tabIndex:[{type:t.Input}],collapsedTitle:[{type:t.Input}]},i}(g),C=function(){function e(){this.position="left"}return Object.defineProperty(e.prototype,"cssClasses",{get:function(){return"left"===this.position?"mc-navbar-left":"mc-navbar-right"},enumerable:!0,configurable:!0}),e.decorators=[{type:t.Directive,args:[{selector:p}]}],e.propDecorators={position:[{type:t.Input}],cssClasses:[{type:t.HostBinding,args:["class"]}]},e}(),I=function(){function e(e,t){this.element=e,this.width=t,this.collapsed=!1}return e.prototype.processCollapsed=function(e){this.collapsed=e,this.updateCollapsedClass()},e.prototype.updateCollapsedClass=function(){this.collapsed?this.element.classList.add("mc-navbar-collapsed-title"):this.element.classList.remove("mc-navbar-collapsed-title")},e}(),x=function(){function e(e,t,n){void 0===n&&(n=[]),this.element=e,this.width=t,this.itemsForCollapse=n}return Object.defineProperty(e.prototype,"canCollapse",{get:function(){return this.itemsForCollapse.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsedItemsWidth",{get:function(){return void 0!==this._collapsedItemsWidth?this._collapsedItemsWidth:(this.calculateAndCacheCollapsedItemsWidth(),this._collapsedItemsWidth)},enumerable:!0,configurable:!0}),e.prototype.processCollapsed=function(e){this.itemsForCollapse.length>0&&this.updateTitle(e),this.itemsForCollapse.forEach(function(t){return t.processCollapsed(e)})},e.prototype.calculateAndCacheCollapsedItemsWidth=function(){this._collapsedItemsWidth=this.itemsForCollapse.reduce(function(e,t){return e+t.width},0)},e.prototype.getTitle=function(){var e=this.element.getAttribute("computedTitle");return e?decodeURI(e):this.itemsForCollapse.length>0?this.itemsForCollapse[0].element.innerText:""},e.prototype.updateTitle=function(e){e?this.element.setAttribute("title",this.getTitle()):this.element.removeAttribute("title")},e}(),W=function(){function e(e){this._elementRef=e,this.forceRecalculateItemsWidth=!1,this.resizeDebounceInterval=100,this.firstLevelElement=p,this.secondLevelElements=[m,d,u];var t=r.fromEvent(window,"resize").pipe(o.debounceTime(this.resizeDebounceInterval));this.resizeSubscription=t.subscribe(this.updateCollapsed.bind(this))}return Object.defineProperty(e.prototype,"maxAllowedWidth",{get:function(){return this._elementRef.nativeElement.querySelector("nav").getBoundingClientRect().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsWidths",{get:function(){return void 0===this._itemsWidths||this.forceRecalculateItemsWidth?(this.calculateAndCacheItemsWidth(),this._itemsWidths):this._itemsWidths},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalItemsWidth",{get:function(){return void 0===this.totalItemsWidths||this.forceRecalculateItemsWidth?(this.calculateAndCacheTotalItemsWidth(),this.totalItemsWidths):this.totalItemsWidths},enumerable:!0,configurable:!0}),e.prototype.updateCollapsed=function(){for(var e=this.totalItemsWidth-this.maxAllowedWidth,t=this.itemsWidths.length-1;t>=0;t--){var n=this.itemsWidths[t];n.canCollapse&&(n.processCollapsed(e>0),e-=n.collapsedItemsWidth)}},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){return e.updateCollapsed()},0)},e.prototype.ngOnDestroy=function(){this.resizeSubscription.unsubscribe()},e.prototype.calculateAndCacheTotalItemsWidth=function(){this.totalItemsWidths=this.itemsWidths.reduce(function(e,t){return e+t.width},0)},e.prototype.getOuterElementWidth=function(e){return e.getBoundingClientRect().width+parseInt(getComputedStyle(e).getPropertyValue("margin-right"))+parseInt(getComputedStyle(e).getPropertyValue("margin-left"))},e.prototype.calculateAndCacheItemsWidth=function(){var e=this,t=this.secondLevelElements.map(function(t){return e.firstLevelElement+">"+t}),n=Array.from(this._elementRef.nativeElement.querySelectorAll(t));this._itemsWidths=n.map(function(t){return new x(t,e.getOuterElementWidth(t),e.getItemsForCollapse(t))})},e.prototype.getItemsForCollapse=function(e){return e.querySelector("[mc-icon],mc-navbar-logo,[mc-navbar-logo]")?Array.from(e.querySelectorAll(u)).map(function(e){return new I(e,e.getBoundingClientRect().width)}):[]},e.decorators=[{type:t.Component,args:[{selector:"mc-navbar",template:'\n        <nav class="mc-navbar">\n            <ng-content select="['+p+"],"+p+'"></ng-content>\n        </nav>\n    ',styles:[".mc-navbar-left,.mc-navbar-right,mc-navbar-container{height:100%;display:flex;flex-shrink:0;flex-direction:row;justify-content:space-between;align-items:center}.mc-navbar{position:relative;height:48px;padding:0 0;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.mc-navbar [mc-icon]+mc-navbar-title{margin-left:8px}.mc-navbar [mc-icon]{min-width:16px;min-height:16px}.mc-navbar mc-navbar-title:not(.mc-navbar-collapsed-title)+[mc-icon]{margin-left:8px}.mc-navbar-brand,.mc-navbar-item,.mc-navbar-title,mc-navbar-brand,mc-navbar-item,mc-navbar-item:first-child{height:100%;position:relative;display:flex;align-items:center;padding-left:16px;padding-right:16px}.mc-navbar-brand,mc-navbar-brand{padding-left:0;padding-right:12px;margin-right:24px}.mc-navbar-brand .mc-navbar-title,mc-navbar-brand .mc-navbar-title{padding-left:12px;padding-right:0}.mc-navbar-title{white-space:nowrap}.mc-navbar-item:not([disabled]){cursor:pointer}.mc-navbar-item .mc-navbar-title,mc-navbar-brand,mc-navbar-item,mc-navbar-item:first-child{padding:0}mc-navbar-item.mc-progress:not([disabled]){cursor:pointer}.mc-navbar-item[disabled],mc-navbar-item[disabled] .mc-navbar-item{cursor:default}mc-navbar-title.mc-navbar-collapsed-title{display:none}"],encapsulation:t.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:t.ElementRef}]},e}(),E=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[a.CommonModule,n.A11yModule,s.PlatformModule],exports:[W,C,b,y,f,h],declarations:[W,C,b,y,f,h]}]}],e}();e.McNavbarModule=E,e.McNavbarLogo=h,e.McNavbarBrand=f,e.McNavbarTitle=b,e.McNavbarItemBase=v,e.McNavbarMixinBase=g,e.McNavbarItem=y,e.McNavbarContainer=C,e.McNavbar=W,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-navbar.umd.min.js.map
