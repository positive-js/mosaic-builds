!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@ptsecurity/mosaic/icon"),require("@angular/cdk/coercion")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/splitter",["exports","@angular/common","@angular/core","@ptsecurity/mosaic/icon","@angular/cdk/coercion"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ptsecurity=e.ptsecurity||{},e.ptsecurity.mosaic=e.ptsecurity.mosaic||{},e.ptsecurity.mosaic.splitter={}),e.ng.common,e.ng.core,e.ptsecurity.mosaic.icon,e.ng.cdk.coercion)}(this,(function(e,t,i,r,n){"use strict";var o;e.Direction=void 0,(o=e.Direction||(e.Direction={})).Horizontal="horizontal",o.Vertical="vertical";var s=function(){function t(t,i){this.elementRef=t,this.renderer=i,this._direction=e.Direction.Vertical,this._order=0,this._size=6,this.dragged=!1}return Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"order",{get:function(){return this._order},set:function(e){this._order=n.coerceNumberProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(e){this._size=n.coerceNumberProperty(e)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.setStyle("flex-basis",n.coerceCssPixelValue(this.size)),this.setStyle(this.isVertical()?"height":"width",n.coerceCssPixelValue(this.size)),this.setStyle("order",this.order),this.isVertical()||this.setStyle("height","100%"),this.setStyle("flex-direction",this.isVertical()?"row":"column")},t.prototype.isVertical=function(){return this.direction===e.Direction.Vertical},t.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},t}();s.decorators=[{type:i.Directive,args:[{selector:"mc-gutter",host:{class:"mc-gutter","[class.mc-gutter_vertical]":"isVertical()","[class.mc-gutter_dragged]":"dragged","(mousedown)":"dragged = true"}}]}],s.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2}]},s.propDecorators={direction:[{type:i.Input}],order:[{type:i.Input}],size:[{type:i.Input}]};var c=function(){function t(e,t,i,r){this.elementRef=e,this.changeDetectorRef=t,this.ngZone=i,this.renderer=r,this.areas=[],this.isDragging=!1,this.areaPositionDivider=2,this.listeners=[],this._hideGutters=!1,this._disabled=!1,this._gutterSize=6}return Object.defineProperty(t.prototype,"hideGutters",{get:function(){return this._hideGutters},set:function(e){this._hideGutters=n.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=n.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gutterSize",{get:function(){return this._gutterSize},set:function(e){var t=n.coerceNumberProperty(e);this._gutterSize=t>0?t:this.gutterSize},enumerable:!1,configurable:!0}),t.prototype.addArea=function(e){var t=this.areas.length,i=t*this.areaPositionDivider,r=e.getSize();e.setOrder(i),this.areas.push({area:e,index:t,order:i,initialSize:r})},t.prototype.ngOnInit=function(){this.direction||(this.direction=e.Direction.Horizontal),this.setStyle("flex-direction",this.isVertical()?"column":"row")},t.prototype.onMouseDown=function(e,t,i){var r=this;if(!this.disabled){e.preventDefault();var n=this.areas[t],o=this.areas[i],s={x:e.screenX,y:e.screenY};n.initialSize=n.area.getSize(),o.initialSize=o.area.getSize(),this.areas.forEach((function(e){var t=e.area.getSize();e.area.disableFlex(),e.area.setSize(t)})),this.ngZone.runOutsideAngular((function(){r.listeners.push(r.renderer.listen("document","mouseup",(function(){return r.onMouseUp()})))})),this.ngZone.runOutsideAngular((function(){r.listeners.push(r.renderer.listen("document","mousemove",(function(e){return r.onMouseMove(e,s,n,o)})))})),this.isDragging=!0}},t.prototype.removeArea=function(e){var t=-1;this.areas.some((function(i,r){return i.area===e&&(t=r,!0)})),-1!==t&&this.areas.splice(t,1)},t.prototype.isVertical=function(){return this.direction===e.Direction.Vertical},t.prototype.updateGutter=function(){var e=this;this.gutters.forEach((function(t){t.dragged&&(t.dragged=!1,e.changeDetectorRef.detectChanges())}))},t.prototype.onMouseMove=function(e,t,i,r){if(this.isDragging&&!this.disabled){var n=e.screenX,o=e.screenY,s=this.isVertical()?t.y-o:t.x-n,c=i.initialSize-s,a=r.initialSize+s,l=i.area.getMinSize(),u=r.area.getMinSize();c<=l||a<=u||(c<=0?(i.area.setSize(0),r.area.setSize(r.initialSize+i.initialSize)):a<=0?(i.area.setSize(r.initialSize+i.initialSize),r.area.setSize(0)):(i.area.setSize(c),r.area.setSize(a)))}},t.prototype.onMouseUp=function(){for(;this.listeners.length>0;){var e=this.listeners.pop();e&&e()}this.isDragging=!1,this.updateGutter()},t.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},t}();c.decorators=[{type:i.Component,args:[{selector:"mc-splitter",exportAs:"mcSplitter",host:{class:"mc-splitter"},preserveWhitespaces:!1,template:'<ng-content></ng-content>\n\n<ng-template ngFor let-area [ngForOf]="areas" let-index="index" let-last="last">\n    <mc-gutter *ngIf="last === false"\n               [direction]="direction"\n               [attr.disabled]="disabled || null"\n               [style.display]="hideGutters ? \'none\' : \'flex\'"\n               [size]="gutterSize"\n               [order]="index * 2 + 1"\n               (mousedown)="onMouseDown($event, index, index + 1)">\n    </mc-gutter>\n</ng-template>\n',encapsulation:i.ViewEncapsulation.None,changeDetection:i.ChangeDetectionStrategy.OnPush,styles:[".mc-splitter{display:flex;flex-wrap:nowrap;align-items:stretch}.mc-gutter,.mc-splitter,.mc-splitter .mc-splitter-area{overflow:hidden}.mc-gutter{display:flex;flex-grow:0;flex-shrink:0;justify-content:center;align-items:center}.mc-gutter.mc-gutter_vertical>.mc-icon{transform:rotate(90deg)}"]}]}],c.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:i.NgZone},{type:i.Renderer2}]},c.propDecorators={gutters:[{type:i.ViewChildren,args:[s]}],hideGutters:[{type:i.Input}],direction:[{type:i.Input}],disabled:[{type:i.Input}],gutterSize:[{type:i.Input}]};var a=function(){function t(e,t,i){this.elementRef=e,this.renderer=t,this.splitter=i}return t.prototype.disableFlex=function(){this.renderer.removeStyle(this.elementRef.nativeElement,"flex")},t.prototype.ngOnInit=function(){this.splitter.addArea(this),this.removeStyle("max-width"),this.splitter.direction===e.Direction.Vertical?(this.setStyle("width","100%"),this.removeStyle("height")):(this.setStyle("height","100%"),this.removeStyle("width"))},t.prototype.ngOnDestroy=function(){this.splitter.removeArea(this)},t.prototype.setOrder=function(e){this.setStyle("order",e)},t.prototype.setSize=function(e){if(e){var t=n.coerceNumberProperty(e);this.setStyle(this.getSizeProperty(),n.coerceCssPixelValue(t))}},t.prototype.getSize=function(){return this.elementRef.nativeElement[this.getOffsetSizeProperty()]},t.prototype.getMinSize=function(){var e=getComputedStyle(this.elementRef.nativeElement);return parseFloat(e[this.getMinSizeProperty()])},t.prototype.isVertical=function(){return this.splitter.direction===e.Direction.Vertical},t.prototype.getMinSizeProperty=function(){return this.isVertical()?"min-height":"minWidth"},t.prototype.getOffsetSizeProperty=function(){return this.isVertical()?"offsetHeight":"offsetWidth"},t.prototype.getSizeProperty=function(){return this.isVertical()?"height":"width"},t.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},t.prototype.removeStyle=function(e){this.renderer.removeStyle(this.elementRef.nativeElement,e)},t}();a.decorators=[{type:i.Directive,args:[{selector:"[mc-splitter-area]",host:{class:"mc-splitter-area"}}]}],a.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2},{type:c}]};var l=function(){};l.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,r.McIconModule],exports:[s,a,c],declarations:[s,a,c]}]}],e.McGutterDirective=s,e.McSplitterAreaDirective=a,e.McSplitterComponent=c,e.McSplitterModule=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-splitter.umd.min.js.map