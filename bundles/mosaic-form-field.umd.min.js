/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/mosaic/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@ptsecurity/mosaic/icon")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/form-field",["exports","@angular/core","@ptsecurity/cdk/keycodes","@ptsecurity/mosaic/core","rxjs","rxjs/operators","@angular/common","@ptsecurity/mosaic/icon"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.formField={}),e.ng.core,e.ng.cdk.keycodes,e.ng.mosaic.core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.mosaic.icon)}(this,function(e,t,n,o,r,i,c,s){"use strict";function a(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function l(){return Error("mc-form-field must contain a McFormFieldControl.")}var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},u=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"mc-cleaner",template:'<i class="mc-icon_light" mc-icon="mc-close-M_16" color="second"></i>'}]}],e}(),d=function(){function e(){}return e}(),f=function(){function e(){}return e}(),m=0,h=function(){function e(){this.id="mc-hint-"+m++}return e.decorators=[{type:t.Directive,args:[{selector:"mc-hint",host:{class:"mc-hint","[attr.id]":"id"}}]}],e.propDecorators={id:[{type:t.Input}]},e}(),g=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[mcPrefix]"}]}],e}(),_=function(){function e(){this.stepUp=new t.EventEmitter,this.stepDown=new t.EventEmitter}return e.prototype.onStepUp=function(e){this.stepUp.emit(),e.preventDefault()},e.prototype.onStepDown=function(e){this.stepDown.emit(),e.preventDefault()},e.decorators=[{type:t.Component,args:[{selector:"mc-stepper",template:'\n        <i class="mc mc-icon mc-icon_light mc-second mc-stepper-step-up mc-angle-down-L_16"\n           (mousedown)="onStepUp($event)">\n        </i>\n        <i class="mc mc-icon mc-icon_light mc-second mc-stepper-step-down mc-angle-down-L_16"\n           (mousedown)="onStepDown($event)">\n        </i>\n    '}]}],e.propDecorators={stepUp:[{type:t.Output}],stepDown:[{type:t.Output}]},e}(),b=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"[mcSuffix]"}]}],e}(),y=0,C=function(){function e(e){this._elementRef=e}return e}(),x=o.mixinColor(C),w=function(e){function o(t,n){var o=e.call(this,t)||this;return o._elementRef=t,o._changeDetectorRef=n,o._labelId="mc-form-field-label-"+y++,o.hovered=!1,o.canCleanerClearByEsc=!0,o}return a(o,e),o.prototype.ngAfterContentInit=function(){var e=this;this._validateControlChild(),this._control.controlType&&(this._elementRef.nativeElement.classList.add("mc-form-field-type-"+this._control.controlType),this._numberControl&&this.hasStepper&&(this._stepper.stepUp.subscribe(this.onStepUp.bind(this)),this._stepper.stepDown.subscribe(this.onStepDown.bind(this)))),this._control.stateChanges.pipe(i.startWith()).subscribe(function(){e._changeDetectorRef.markForCheck()}),this._numberControl&&this._numberControl.stateChanges.pipe(i.startWith()).subscribe(function(){e._changeDetectorRef.markForCheck()});var t=this._control.ngControl&&this._control.ngControl.valueChanges||r.EMPTY;r.merge(t).subscribe(function(){return e._changeDetectorRef.markForCheck()})},o.prototype.ngAfterContentChecked=function(){this._validateControlChild()},o.prototype.ngAfterViewInit=function(){this._changeDetectorRef.detectChanges()},o.prototype.clearValue=function(e){e.stopPropagation(),this._control&&this._control.ngControl&&(this._control.ngControl.reset(),this._control.focus())},o.prototype.onContainerClick=function(e){this._control.onContainerClick&&this._control.onContainerClick(e)},o.prototype.onKeyDown=function(e){this.canCleanerClearByEsc&&e.keyCode===n.ESCAPE&&this._control.focused&&this.hasCleaner&&(this._control&&this._control.ngControl&&this._control.ngControl.reset(),e.preventDefault())},o.prototype.onHoverChanged=function(e){e!==this.hovered&&(this.hovered=e,this._changeDetectorRef.markForCheck())},o.prototype.onStepUp=function(){this._numberControl&&this._numberControl.stepUp(this._numberControl.step)},o.prototype.onStepDown=function(){this._numberControl&&this._numberControl.stepDown(this._numberControl.step)},o.prototype.getConnectedOverlayOrigin=function(){return this.connectionContainerRef||this._elementRef},o.prototype._shouldForward=function(e){var t=this._control?this._control.ngControl:null;return t&&t[e]},o.prototype._validateControlChild=function(){if(!this._control)throw l()},Object.defineProperty(o.prototype,"hasHint",{get:function(){return this._hint&&this._hint.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasSuffix",{get:function(){return this._suffix&&this._suffix.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasPrefix",{get:function(){return this._prefix&&this._prefix.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasCleaner",{get:function(){return this._cleaner&&this._cleaner.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"hasStepper",{get:function(){return!!this._stepper},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canShowCleaner",{get:function(){return!!(this.hasCleaner&&this._control&&this._control.ngControl)&&(this._control.ngControl.value&&!this._control.disabled)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"disabled",{get:function(){return this._control&&this._control.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"canShowStepper",{get:function(){return this._numberControl&&!this.disabled&&(this._numberControl.focused||this.hovered)},enumerable:!0,configurable:!0}),o.decorators=[{type:t.Component,args:[{selector:"mc-form-field",exportAs:"mcFormField",template:'<div class="mc-form-field__container" (click)="onContainerClick($event)"><div class="mc-form-field__prefix" *ngIf="hasPrefix"><ng-content select="[mcPrefix]"></ng-content></div><div class="mc-form-field__infix"><ng-content></ng-content></div><div class="mc-form-field__suffix" *ngIf="hasSuffix"><ng-content select="[mcSuffix]"></ng-content></div><div class="mc-form-field__cleaner" *ngIf="canShowCleaner && !hasSuffix" (click)="clearValue($event)"><ng-content select="mc-cleaner"></ng-content></div><ng-content *ngIf="canShowStepper" select="mc-stepper"></ng-content></div><div class="mc-form-field__hint" *ngIf="hasHint"><ng-content select="mc-hint"></ng-content></div>',styles:[".mc-form-field{position:relative;display:inline-block;width:100%;border-radius:3px}.mc-form-field__hint{margin-top:4px}.mc-form-field__container{position:relative;border-width:1px;border-style:solid;border-color:initial;border-radius:3px}.mc-form-field_without-borders .mc-form-field__container{border-color:transparent}.mc-form-field__prefix,.mc-form-field__suffix{position:absolute;top:0;bottom:0;width:32px;display:flex;flex-direction:row;justify-content:center;align-items:center}.mc-form-field__prefix{left:0}.mc-form-field__suffix{right:0}.mc-form-field_has-cleaner .mc-input,.mc-form-field_has-stepper .mc-input,.mc-form-field_has-suffix .mc-input{padding-right:32px}.mc-form-field_has-prefix .mc-input{padding-left:32px}mc-cleaner{position:absolute;display:flex;flex-direction:row;justify-content:center;align-items:center;top:0;bottom:0;right:0;width:32px;cursor:pointer}mc-stepper{position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;top:0;bottom:0;right:0;width:32px}mc-stepper .mc-stepper-step-down,mc-stepper .mc-stepper-step-up{cursor:pointer;width:32px;text-align:center}mc-stepper .mc-stepper-step-up{transform:scaleY(-1)} .mc-input{background:0 0;padding:0;margin:0;border:none;outline:0;box-sizing:border-box;padding:5px 16px;width:100%;min-height:30px}.mc-input::-ms-clear{display:none;width:0;height:0}.mc-input::-ms-reveal{display:none;width:0;height:0}.mc-input::-webkit-search-cancel-button,.mc-input::-webkit-search-decoration,.mc-input::-webkit-search-results-button,.mc-input::-webkit-search-results-decoration{display:none}.mc-input{display:inline-block}input.mc-input[type=number]{-moz-appearance:textfield}input.mc-input[type=number]::-webkit-inner-spin-button,input.mc-input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none}input.mc-input:invalid{box-shadow:unset} .mc-textarea{background:0 0;margin:0;border:none;outline:0;resize:none;overflow:auto;width:100%;box-sizing:border-box;padding:5px 16px}.mc-textarea{display:inline-block;-webkit-appearance:none;vertical-align:bottom}.mc-textarea:not(.mc-textarea-resizable){box-sizing:border-box;overflow-y:hidden}.mc-textarea.mc-textarea-resizable{resize:vertical;min-height:50px}.mc-textarea:invalid{box-shadow:unset}"],host:{class:"mc-form-field","[class.mc-form-field_invalid]":"_control.errorState","[class.mc-disabled]":"_control.disabled","[class.mc-form-field_has-prefix]":"hasPrefix","[class.mc-form-field_has-suffix]":"hasSuffix","[class.mc-form-field_has-cleaner]":"canShowCleaner","[class.mc-form-field_has-stepper]":"canShowStepper","[class.mc-focused]":"_control.focused","[class.ng-untouched]":'_shouldForward("untouched")',"[class.ng-touched]":'_shouldForward("touched")',"[class.ng-pristine]":'_shouldForward("pristine")',"[class.ng-dirty]":'_shouldForward("dirty")',"[class.ng-valid]":'_shouldForward("valid")',"[class.ng-invalid]":'_shouldForward("invalid")',"[class.ng-pending]":'_shouldForward("pending")',"(keydown)":"onKeyDown($event)","(mouseenter)":"onHoverChanged(true)","(mouseleave)":"onHoverChanged(false)"},inputs:["color"],encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],o.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ChangeDetectorRef}]},o.propDecorators={_control:[{type:t.ContentChild,args:[d,{static:!1}]}],_numberControl:[{type:t.ContentChild,args:[f,{static:!1}]}],_stepper:[{type:t.ContentChild,args:[_,{static:!1}]}],_hint:[{type:t.ContentChildren,args:[h]}],_suffix:[{type:t.ContentChildren,args:[b]}],_prefix:[{type:t.ContentChildren,args:[g]}],_cleaner:[{type:t.ContentChildren,args:[u]}],connectionContainerRef:[{type:t.ViewChild,args:["connectionContainer",{static:!0}]}]},o}(x),v=function(){function e(){}return e.decorators=[{type:t.Directive,args:[{selector:"mc-form-field[mcFormFieldWithoutBorders]",exportAs:"mcFormFieldWithoutBorders",host:{class:"mc-form-field_without-borders"}}]}],e}(),F=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[w,v,h,g,b,u,_],imports:[c.CommonModule,s.McIconModule],exports:[w,v,h,g,b,u,_]}]}],e}();e.McFormFieldModule=F,e.McFormFieldBase=C,e._McFormFieldMixinBase=x,e.McFormField=w,e.McFormFieldWithoutBorders=v,e.McFormFieldControl=d,e.McFormFieldNumberControl=f,e.getMcFormFieldMissingControlError=l,e.McHint=h,e.McSuffix=b,e.McPrefix=g,e.McCleaner=u,e.McStepper=_,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-form-field.umd.min.js.map
