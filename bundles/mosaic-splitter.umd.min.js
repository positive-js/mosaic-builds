/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/coercion"),require("@angular/common"),require("@ptsecurity/mosaic/icon")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/splitter",["exports","@angular/core","@ptsecurity/cdk/coercion","@angular/common","@ptsecurity/mosaic/icon"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.splitter={}),e.ng.core,e.ng.cdk.coercion,e.ng.common,e.ng.mosaic.icon)}(this,function(e,t,i,r,n){"use strict";var o=function(){function e(e,t,i){this.elementRef=e,this.ngZone=t,this.renderer=i,this.areas=[],this._disabled=!1,this._gutterSize=6,this.isDragging=!1,this.areaPositionDivider=2,this.listeners=[]}return Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=i.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gutterSize",{get:function(){return this._gutterSize},set:function(e){var t=i.coerceNumberProperty(e);this._gutterSize=t>0?t:this.gutterSize},enumerable:!0,configurable:!0}),e.prototype.addArea=function(e){var t=this.areas.length,i=t*this.areaPositionDivider,r=e.getSize();e.setOrder(i),this.areas.push({area:e,index:t,order:i,initialSize:r})},e.prototype.ngOnInit=function(){this.direction||(this.direction="horizontal"),this.setStyle("flex-direction",this.isVertical()?"column":"row")},e.prototype.onMouseDown=function(e,t,i){var r=this;if(!this.disabled){e.preventDefault();var n=this.areas[t],o=this.areas[i],s={x:e.screenX,y:e.screenY};n.initialSize=n.area.getSize(),o.initialSize=o.area.getSize(),this.areas.forEach(function(e){var t=e.area.getSize();e.area.disableFlex(),e.area.setSize(t)}),this.ngZone.runOutsideAngular(function(){r.listeners.push(r.renderer.listen("document","mouseup",function(){return r.onMouseUp()}))}),this.ngZone.runOutsideAngular(function(){r.listeners.push(r.renderer.listen("document","mousemove",function(e){return r.onMouseMove(e,s,n,o)}))}),this.isDragging=!0}},e.prototype.removeArea=function(e){var t=-1;this.areas.some(function(i,r){return i.area===e&&(t=r,!0)}),-1!==t&&this.areas.splice(t,1)},e.prototype.isVertical=function(){return"vertical"===this.direction},e.prototype.onMouseMove=function(e,t,i,r){if(this.isDragging&&!this.disabled){var n={x:e.screenX,y:e.screenY},o=this.isVertical()?t.y-n.y:t.x-n.x,s=i.initialSize-o,a=r.initialSize+o,c=i.area.getMinSize(),l=r.area.getMinSize();if(s<=c||a<=l){var u=i.initialSize-c;i.area.setSize(c),r.area.setSize(r.initialSize+u)}else s<=0?(i.area.setSize(0),r.area.setSize(r.initialSize+i.initialSize)):a<=0?(i.area.setSize(r.initialSize+i.initialSize),r.area.setSize(0)):(i.area.setSize(s),r.area.setSize(a))}},e.prototype.onMouseUp=function(){for(;this.listeners.length>0;){var e=this.listeners.pop();e&&e()}this.isDragging=!1},e.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},e.decorators=[{type:t.Component,args:[{selector:"mc-splitter",preserveWhitespaces:!1,styles:["mc-splitter{display:flex;flex-wrap:nowrap;align-items:stretch;overflow:hidden}mc-splitter-area{overflow:hidden}mc-gutter{display:flex;flex-grow:0;flex-shrink:0;overflow:hidden;justify-content:center;align-items:center}.icon-vertical{transform:rotate(90deg)}"],template:'<ng-content></ng-content><ng-template ngFor let-area [ngForOf]="areas" let-index="index" let-last="last"><mc-gutter *ngIf="last === false" [direction]="direction" [disabled]="disabled" [size]="gutterSize" [order]="index * 2 + 1" (mousedown)="onMouseDown($event, index, index + 1)"><i mc-icon="mc-ellipsis_16" color="second" [class.icon-vertical]="direction === \'vertical\'" *ngIf="!disabled"></i></mc-gutter></ng-template>',encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.NgZone},{type:t.Renderer2}]},e.propDecorators={direction:[{type:t.Input}],disabled:[{type:t.Input}],gutterSize:[{type:t.Input}]},e}(),s=function(){function e(e,t){this.renderer=e,this.elementRef=t,this._direction="vertical",this._disabled=!1,this._order=0,this._size=6}return Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=i.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(e){this._order=i.coerceNumberProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=i.coerceNumberProperty(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.setStyle("cursor",this.getCursor(this.getState())),this.setStyle("flex-basis",i.coerceCssPixelValue(this.size)),this.setStyle(this.isVertical()?"height":"width",i.coerceCssPixelValue(this.size)),this.setStyle("order",this.order),this.isVertical()||this.setStyle("height","100%"),this.disabled&&this.setAttr("disabled","true"),this.setStyle("flex-direction",this.isVertical()?"row":"column")},e.prototype.isVertical=function(){return"vertical"===this.direction},e.prototype.getCursor=function(e){switch(e){case"disabled":return"default";case"vertical":return"row-resize";case"horizontal":return"col-resize";default:throw Error("Unknown gutter state for cursor: "+e)}},e.prototype.getState=function(){return this.disabled?"disabled":"vertical"===this.direction?"vertical":"horizontal"},e.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},e.prototype.setAttr=function(e,t){this.renderer.setAttribute(this.elementRef.nativeElement,e,t)},e.decorators=[{type:t.Directive,args:[{selector:"mc-gutter"}]}],e.ctorParameters=function(){return[{type:t.Renderer2},{type:t.ElementRef}]},e.propDecorators={direction:[{type:t.Input}],disabled:[{type:t.Input}],order:[{type:t.Input}],size:[{type:t.Input}]},e}(),a=function(){function e(e,t,i){this.elementRef=e,this.renderer=t,this.splitter=i}return e.prototype.disableFlex=function(){this.renderer.removeStyle(this.elementRef.nativeElement,"flex")},e.prototype.ngOnInit=function(){this.splitter.addArea(this),this.removeStyle("max-width"),this.setStyle("flex","1"),"vertical"===this.splitter.direction?(this.setStyle("width","100%"),this.removeStyle("height")):(this.setStyle("height","100%"),this.removeStyle("width"))},e.prototype.ngOnDestroy=function(){this.splitter.removeArea(this)},e.prototype.setOrder=function(e){this.setStyle("order",e)},e.prototype.setSize=function(e){var t=i.coerceNumberProperty(e);this.setStyle(this.getSizeProperty(),i.coerceCssPixelValue(t))},e.prototype.getSize=function(){return this.elementRef.nativeElement[this.getOffsetSizeProperty()]},e.prototype.getMinSize=function(){var e=getComputedStyle(this.elementRef.nativeElement);return parseFloat(e[this.getMinSizeProperty()])},e.prototype.isVertical=function(){return"vertical"===this.splitter.direction},e.prototype.getMinSizeProperty=function(){return this.isVertical()?"min-height":"minWidth"},e.prototype.getOffsetSizeProperty=function(){return this.isVertical()?"offsetHeight":"offsetWidth"},e.prototype.getSizeProperty=function(){return this.isVertical()?"height":"width"},e.prototype.setStyle=function(e,t){this.renderer.setStyle(this.elementRef.nativeElement,e,t)},e.prototype.removeStyle=function(e){this.renderer.removeStyle(this.elementRef.nativeElement,e)},e.decorators=[{type:t.Directive,args:[{selector:"mc-splitter-area"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:o}]},e}(),c=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,n.McIconModule],exports:[s,a,o],declarations:[s,a,o]}]}],e}();e.McSplitterModule=c,e.McSplitterComponent=o,e.McGutterDirective=s,e.McSplitterAreaDirective=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-splitter.umd.min.js.map
