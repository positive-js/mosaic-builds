{"version":3,"file":"mosaic-sidebar.umd.js","sources":["../../packages/mosaic/sidebar/sidebar.module.ts","../../packages/mosaic/sidebar/sidebar.component.ts","../../packages/mosaic/sidebar/sidebar-animations.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { McSidebar, McSidebarClosed, McSidebarOpened } from './sidebar.component';\n\n\n@NgModule({\n    imports: [CommonModule],\n    declarations: [\n        McSidebarClosed,\n        McSidebarOpened,\n        McSidebar\n    ],\n    exports: [\n        McSidebarClosed,\n        McSidebarOpened,\n        McSidebar\n    ]\n})\nexport class McSidebarModule {}\n","import {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    Directive, ElementRef,\n    EventEmitter,\n    Input,\n    NgZone,\n    OnDestroy, OnInit,\n    Output,\n    ViewEncapsulation\n} from '@angular/core';\nimport { isControl, isInput, isLeftBracket, isRightBracket } from '@ptsecurity/cdk/keycodes';\n\nimport { mcSidebarAnimations, McSidebarAnimationState } from './sidebar-animations';\n\n\nexport enum SidebarPositions {\n    Left = 'left',\n    Right = 'right'\n}\n\n// tslint:disable-next-line:naming-convention\ninterface McSidebarParams {\n    openedStateMinWidth: string;\n    openedStateWidth: string;\n    openedStateMaxWidth: string;\n\n    closedStateWidth: string;\n}\n\n\n@Directive({\n    selector: '[mc-sidebar-opened]',\n    exportAs: 'mcSidebarOpened'\n})\nexport class McSidebarOpened {\n    @Input() minWidth: string;\n    @Input() width: string;\n    @Input() maxWidth: string;\n}\n\n@Directive({\n    selector: '[mc-sidebar-closed]',\n    exportAs: 'mcSidebarClosed'\n})\nexport class McSidebarClosed {\n    @Input() width: string;\n}\n\n\n@Component({\n    selector: 'mc-sidebar',\n    exportAs: 'mcSidebar',\n    templateUrl: 'sidebar.component.html',\n    styleUrls: ['./sidebar.css'],\n    host: {\n        class: 'mc-sidebar',\n        '[@state]': `{\n            value: animationState,\n            params: params\n        }`,\n        '(@state.start)': 'onAnimationStart()',\n        '(@state.done)': 'onAnimationDone()'\n    },\n    animations: [mcSidebarAnimations.sidebarState],\n    encapsulation: ViewEncapsulation.None,\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class McSidebar implements OnDestroy, OnInit, AfterContentInit {\n    @Input()\n    get opened(): boolean {\n        return this._opened;\n    }\n\n    set opened(value: boolean) {\n        if (this._opened) {\n            this.saveWidth();\n        }\n\n        this._opened = value;\n    }\n    private _opened: boolean = true;\n\n    @Input() position: SidebarPositions;\n\n    params: McSidebarParams = {\n        openedStateWidth: 'inherit',\n        openedStateMinWidth: 'inherit',\n        openedStateMaxWidth: 'inherit',\n\n        closedStateWidth: '32px'\n    };\n\n    @Output() readonly stateChanged: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n    @ContentChild(McSidebarOpened, { static: false }) openedContent: McSidebarOpened;\n\n    @ContentChild(McSidebarClosed, { static: false }) closedContent: McSidebarClosed;\n\n\n    get animationState(): McSidebarAnimationState {\n        return this._opened ? McSidebarAnimationState.Opened : McSidebarAnimationState.Closed;\n    }\n\n    internalState: boolean = true;\n\n    private documentKeydownListener: (event: KeyboardEvent) => void;\n\n    constructor(private ngZone: NgZone, private elementRef: ElementRef) {}\n\n    ngOnInit(): void {\n        if (this.position === SidebarPositions.Left || this.position === SidebarPositions.Right) {\n            this.registerKeydownListener();\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.position === SidebarPositions.Left || this.position === SidebarPositions.Right) {\n            this.unRegisterKeydownListener();\n        }\n    }\n\n    toggle(): void {\n        this.opened = !this.opened;\n    }\n\n    onAnimationStart() {\n        if (this._opened) {\n            this.internalState = this._opened;\n        }\n    }\n\n    onAnimationDone() {\n        this.internalState = this._opened;\n\n        this.stateChanged.emit(this._opened);\n    }\n\n    ngAfterContentInit(): void {\n        this.params = {\n            openedStateWidth: this.openedContent.width || 'inherit',\n            openedStateMinWidth: this.openedContent.minWidth || 'inherit',\n            openedStateMaxWidth: this.openedContent.maxWidth || 'inherit',\n\n            closedStateWidth: this.closedContent.width || '32px'\n        };\n    }\n\n    private registerKeydownListener(): void {\n        this.documentKeydownListener = (event) => {\n            if (isControl(event) || isInput(event)) { return; }\n\n            if (\n                (this.position === SidebarPositions.Left && isLeftBracket(event)) ||\n                (this.position === SidebarPositions.Right && isRightBracket(event))\n            ) {\n                this.ngZone.run(() => this._opened = !this._opened);\n            }\n        };\n\n        this.ngZone.runOutsideAngular(() => {\n            // tslint:disable-next-line: no-unbound-method\n            document.addEventListener('keypress', this.documentKeydownListener, true);\n        });\n    }\n\n    private unRegisterKeydownListener(): void {\n        // tslint:disable-next-line: no-unbound-method\n        document.removeEventListener('keypress', this.documentKeydownListener, true);\n    }\n\n    private saveWidth() {\n        this.params.openedStateWidth = `${this.elementRef.nativeElement.offsetWidth}px`;\n    }\n}\n","import { animate, AnimationTriggerMetadata, state, style, transition, trigger } from '@angular/animations';\n\n\nexport enum McSidebarAnimationState {\n    Opened = 'opened',\n    Closed = 'closed'\n}\n\nexport const mcSidebarAnimations: {\n    readonly sidebarState: AnimationTriggerMetadata;\n} = {\n    sidebarState: trigger('state', [\n        state('opened', style({\n                minWidth: '{{ openedStateMinWidth }}',\n                width: '{{ openedStateWidth }}',\n                maxWidth: '{{ openedStateMaxWidth }}'\n            }),\n            { params: { openedStateMinWidth: '', openedStateWidth: '', openedStateMaxWidth: '' }}\n        ),\n        state('closed', style({\n                minWidth: '{{ closedStateWidth }}',\n                width: '{{ closedStateWidth }}',\n                maxWidth: '{{ closedStateWidth }}'\n            }),\n            { params: { closedStateWidth: '' }}\n        ),\n        transition('opened => closed', [animate('0.1s')]),\n        transition('closed => opened', [animate('0.2s')])\n    ])\n};\n"],"names":["CommonModule","NgModule","ContentChild","Output","Input","ElementRef","NgZone","ChangeDetectionStrategy","ViewEncapsulation","Component","isRightBracket","isLeftBracket","isControl","isInput","EventEmitter","Directive","transition","animate","state","style","trigger"],"mappings":"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"}