/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@ptsecurity/cdk/bidi"),require("@ptsecurity/cdk/coercion"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/cdk/overlay"),require("@ptsecurity/cdk/portal"),require("@ptsecurity/mosaic/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/platform-browser/animations")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/tooltip",["exports","@angular/core","@ptsecurity/cdk/bidi","@ptsecurity/cdk/coercion","@ptsecurity/cdk/keycodes","@ptsecurity/cdk/overlay","@ptsecurity/cdk/portal","@ptsecurity/mosaic/core","rxjs","rxjs/operators","@angular/common","@angular/platform-browser/animations"],t):t((e.ng=e.ng||{},e.ng.mosaic=e.ng.mosaic||{},e.ng.mosaic.tooltip={}),e.ng.core,e.ng.cdk.bidi,e.ng.cdk.coercion,e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.mosaic.core,e.rxjs,e.rxjs.operators,e.ng.common,e.ng.platformBrowser.animations)}(this,function(e,t,i,o,n,r,s,a,l,p,c,u){"use strict";function m(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s}function h(e,t){return function(i,o){t(i,o,e)}}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function g(e){return function(){return e.scrollStrategies.reposition({scrollThrottle:20})}}function y(e){return Error('McTooltip position "'+e+'" is invalid.')}var f=function(){return f=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(this,arguments)},b=function(){function e(e){this.cdr=e,this._prefix="mc-tooltip_placement",this._positions=a.DEFAULT_4_POSITIONS.slice(),this._classMap={},this._placement="top",this._trigger="hover",this.visibleSource=new l.BehaviorSubject(!1),this.$visible=this.visibleSource.asObservable(),this.mcVisibleChange=new t.EventEmitter,this.mcMouseEnterDelay=400,this.mcMouseLeaveDelay=0,this._onHide=new l.Subject,this._closeOnInteraction=!1,this.availablePositions=a.POSITION_MAP}return Object.defineProperty(e.prototype,"mcTitle",{get:function(){return this._title},set:function(e){this.isTitleString=!(e instanceof t.TemplateRef),this.isTitleString&&(this._title=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcVisible",{get:function(){return this.visibleSource.value},set:function(e){var t=o.coerceBooleanProperty(e);this.visibleSource.value!==t&&(this.visibleSource.next(t),this.mcVisibleChange.emit(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcTrigger",{get:function(){return this._trigger},set:function(e){this._trigger=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcPlacement",{get:function(){return this._placement},set:function(e){e!==this._placement?(this._placement=e,this._positions.unshift(a.POSITION_MAP[this.mcPlacement])):e||(this._placement="top")},enumerable:!0,configurable:!0}),e.prototype.show=function(){var e=this;this.hideTId&&clearTimeout(this.hideTId),this.isContentEmpty()||(this._closeOnInteraction=!0,this.showTId=setTimeout(function(){e.mcVisible=!0,e.mcVisibleChange.emit(!0),e._markForCheck()},this.mcMouseEnterDelay))},e.prototype.hide=function(){var e=this;this.showTId&&clearTimeout(this.showTId),this.hideTId=setTimeout(function(){e.mcVisible=!1,e.mcVisibleChange.emit(!1),e._onHide.next(),e._markForCheck()},this.mcMouseLeaveDelay)},e.prototype.setClassMap=function(){var e;this._classMap=(e={},e[this._prefix+"-"+this._placement]=!0,e)},e.prototype.isContentEmpty=function(){return!!this.isTitleString&&(""===this.mcTitle||!this.mcTitle)},e.prototype.afterHidden=function(){return this._onHide.asObservable()},e.prototype._markForCheck=function(){this.cdr.markForCheck()},e.prototype._handleBodyInteraction=function(){this._closeOnInteraction&&this.hide()},m([t.Output(),d("design:type",t.EventEmitter)],e.prototype,"mcVisibleChange",void 0),m([t.Input(),d("design:type",Object)],e.prototype,"mcMouseEnterDelay",void 0),m([t.Input(),d("design:type",Object)],e.prototype,"mcMouseLeaveDelay",void 0),m([t.Input(),d("design:type",Object),d("design:paramtypes",[Object])],e.prototype,"mcTitle",null),m([t.Input(),d("design:type",Boolean),d("design:paramtypes",[Boolean])],e.prototype,"mcVisible",null),m([t.Input(),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"mcTrigger",null),m([t.Input(),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"mcPlacement",null),e=m([t.Component({selector:"mc-tooltip",animations:[a.fadeAnimation],template:'<ng-container [ngTemplateOutlet]="mcTooltipDefaultTemplate"></ng-container><ng-template #mcTooltipDefaultTemplate><div class="mc-tooltip" [ngClass]="_classMap" [@fadeAnimation]="\'\'+($visible | async)"><div class="mc-tooltip-content"><div class="mc-tooltip-arrow"></div><div class="mc-tooltip-inner"><ng-container>{{ mcTitle }}</ng-container></div></div></div></ng-template>',preserveWhitespaces:!1,styles:["@keyframes mc-progress{from{background-position:0 0}to{background-position:29px 0}}.mc-progress{position:relative}.mc-progress:after{content:'';position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(0,0,0,.05) 10px,transparent 10px,transparent 20px,rgba(0,0,0,.05) 20px,rgba(0,0,0,.05) 30px,transparent 30px) repeat;background-size:29px 29px;animation:mc-progress 1s linear infinite}.cdk-overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%;position:fixed;z-index:1000;box-sizing:border-box;margin:0;padding:0}.cdk-overlay-backdrop{top:0;bottom:0;left:0;right:0;-webkit-tap-highlight-color:transparent;transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0;position:absolute;pointer-events:auto;z-index:1000;box-sizing:border-box;margin:0;padding:0}.cdk-overlay-pane{box-sizing:border-box;position:absolute;pointer-events:auto;margin:0;padding:0;z-index:1000;max-width:100%;max-height:100%}.cdk-overlay-connected-position-bounding-box{box-sizing:border-box;position:absolute;z-index:1000;display:flex;flex-direction:column;margin:0;padding:0;min-width:1px;min-height:1px}@keyframes mc-progress{from{background-position:0 0}to{background-position:29px 0}}.mc-progress{position:relative}.mc-progress:after{content:'';position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(135deg,rgba(0,0,0,.05) 10px,transparent 10px,transparent 20px,rgba(0,0,0,.05) 20px,rgba(0,0,0,.05) 30px,transparent 30px) repeat;background-size:29px 29px;animation:mc-progress 1s linear infinite}.mc-tooltip{box-sizing:border-box;margin:0;padding:0;list-style:none;position:relative;z-index:1060;display:block;visibility:visible;max-width:240px;white-space:pre-line}.mc-tooltip mc-tooltip_hidden{display:none}.mc-tooltip_placement-top{padding-bottom:11px}.mc-tooltip_placement-right{padding-left:11px}.mc-tooltip_placement-bottom{padding-top:11px}.mc-tooltip_placement-left{padding-right:11px}.mc-tooltip-inner{padding:8px 16px;text-align:left;text-decoration:none;border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.2);min-height:16px;height:fit-content;vertical-align:center}.mc-tooltip-arrow{position:absolute;width:0;height:0;border-color:transparent;border-style:solid}.mc-tooltip_placement-top .mc-tooltip-arrow{bottom:3px;border-width:8px 8px 0;left:50%;margin-left:-8px}.mc-tooltip_placement-right .mc-tooltip-arrow{left:3px;border-width:8px 8px 8px 0;top:16px;margin-top:-8px}.mc-tooltip_placement-left .mc-tooltip-arrow{right:3px;border-width:8px 0 8px 8px;top:16px;margin-top:-8px}.mc-tooltip_placement-bottom .mc-tooltip-arrow{top:3px;border-width:0 8px 8px;left:50%;margin-left:-8px}"],encapsulation:t.ViewEncapsulation.None,changeDetection:t.ChangeDetectionStrategy.OnPush,host:{"(body:click)":"this._handleBodyInteraction()"}}),d("design:paramtypes",[t.ChangeDetectorRef])],e)}(),v=new t.InjectionToken("mc-tooltip-scroll-strategy"),_={provide:v,deps:[r.Overlay],useFactory:g},x=function(){function e(e,i,o,n,r,s,p){this._overlay=e,this.elementRef=i,this._ngZone=o,this._scrollDispatcher=n,this.hostView=r,this._scrollStrategy=s,this._dir=p,this.isTooltipOpen=!1,this.isDynamicTooltip=!1,this.parentDisabled=!1,this._disabled=!1,this._trigger="hover",this._placement="top",this.mcVisibleChange=new t.EventEmitter,this.$unsubscribe=new l.Subject,this.manualListeners=new Map,this._destroyed=new l.Subject,this.availablePositions=a.POSITION_MAP}return Object.defineProperty(e.prototype,"mcTitle",{get:function(){return this._title},set:function(e){this._title=e,this.updateCompValue("mcTitle",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setTitle",{set:function(e){this.mcTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=o.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcMouseEnterDelay",{get:function(){return this._mouseEnterDelay},set:function(e){this._mouseEnterDelay=e,this.updateCompValue("mcMouseEnterDelay",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcMouseLeaveDelay",{get:function(){return this._mouseEnterDelay},set:function(e){this._mouseLeaveDelay=e,this.updateCompValue("mcMouseLeaveDelay",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcVisible",{get:function(){return this._visible},set:function(e){this._visible=e,this.updateCompValue("mcVisible",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcTrigger",{get:function(){return this._trigger},set:function(e){this._trigger=e,this.updateCompValue("mcTrigger",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mcPlacement",{get:function(){return this._placement},set:function(e){e?(this._placement=e,this.updateCompValue("mcPlacement",e)):this._placement="top"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.isTooltipOpen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isParentDisabled",{get:function(){return this.parentDisabled},enumerable:!0,configurable:!0}),e.prototype._createOverlay=function(){var e=this;if(this._overlayRef)return this._overlayRef;var t=this._overlay.position().flexibleConnectedTo(this.elementRef).withTransformOriginOn(".mc-tooltip").withFlexibleDimensions(!1).withViewportMargin(8).withPositions(a.DEFAULT_4_POSITIONS.slice()),i=this._scrollDispatcher.getAncestorScrollContainers(this.elementRef);return t.withScrollableContainers(i),t.positionChanges.pipe(p.takeUntil(this._destroyed)).subscribe(function(t){e.tooltip&&(e.onPositionChange(t),t.scrollableViewProperties.isOverlayClipped&&e.tooltip.mcVisible&&e._ngZone.run(function(){return e.hide()}))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:t,panelClass:"mc-tooltip-panel",scrollStrategy:this._scrollStrategy()}),this._updatePosition(),this._overlayRef.detachments().pipe(p.takeUntil(this._destroyed)).subscribe(function(){return e._detach()}),this._overlayRef},e.prototype._detach=function(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this.tooltip=null},e.prototype.onPositionChange=function(e){var t=this,i=this.mcPlacement;Object.keys(this.availablePositions).some(function(o){return e.connectionPair.originX===t.availablePositions[o].originX&&e.connectionPair.originY===t.availablePositions[o].originY&&e.connectionPair.overlayX===t.availablePositions[o].overlayX&&e.connectionPair.overlayY===t.availablePositions[o].overlayY&&(i=o,!0)}),this.updateCompValue("mcPlacement",i),this.tooltip&&this.tooltip.setClassMap(),this.handlePositioningUpdate()},e.prototype.handlePositioningUpdate=function(){if(this._overlayRef||(this._overlayRef=this._createOverlay()),"right"===this.mcPlacement||"left"===this.mcPlacement){var e=(this._overlayRef.overlayElement.clientHeight-this.hostView.element.nativeElement.clientHeight)/2,t=this._overlayRef.overlayElement.style.top||"0px";this._overlayRef.overlayElement.style.top=parseInt(t.split("px")[0],10)+e-1+"px"}},e.prototype.updateCompValue=function(e,t){this.isDynamicTooltip&&t&&this.tooltip&&(this.tooltip[e]=t)},e.prototype.ngOnInit=function(){var e=this;"hover"===this.mcTrigger&&this.manualListeners.set("mouseenter",function(){return e.show()}).set("mouseleave",function(){return e.hide()}).forEach(function(t,i){return e.elementRef.nativeElement.addEventListener(i,t)}),"focus"===this.mcTrigger&&this.manualListeners.set("focus",function(){return e.show()}).set("blur",function(){return e.hide()}).forEach(function(t,i){return e.elementRef.nativeElement.addEventListener(i,t)})},e.prototype.ngOnDestroy=function(){var e=this;this._overlayRef&&this._overlayRef.dispose(),this.manualListeners.forEach(function(t,i){return e.elementRef.nativeElement.removeEventListener(i,t)}),this.manualListeners.clear(),this.$unsubscribe.next(),this.$unsubscribe.complete()},e.prototype.handleKeydown=function(e){this.isTooltipOpen&&e.keyCode===n.ESCAPE&&this.hide()},e.prototype.handleTouchend=function(){this.hide()},e.prototype._updatePosition=function(){this._overlayRef||(this._overlayRef=this._createOverlay());var e=this._overlayRef.getConfig().positionStrategy,t=this._getOrigin(),i=this._getOverlayPosition();e.withPositions([f({},t.main,i.main),f({},t.fallback,i.fallback)])},e.prototype._getOrigin=function(){var e,t=this.mcPlacement,i=!this._dir||"ltr"===this._dir.value;if("top"===t||"bottom"===t)e={originX:"center",originY:"top"===t?"top":"bottom"};else if("top"===t||"left"===t&&i||"right"===t&&!i)e={originX:"start",originY:"center"};else{if(!("bottom"===t||"right"===t&&i||"left"===t&&!i))throw y(t);e={originX:"end",originY:"center"}}var o=this._invertPosition(e.originX,e.originY);return{main:e,fallback:{originX:o.x,originY:o.y}}},e.prototype._getOverlayPosition=function(){var e,t=this.mcPlacement,i=!this._dir||"ltr"===this._dir.value;if("top"===t)e={overlayX:"center",overlayY:"bottom"};else if("bottom"===t)e={overlayX:"center",overlayY:"top"};else if("top"===t||"left"===t&&i||"right"===t&&!i)e={overlayX:"end",overlayY:"center"};else{if(!("bottom"===t||"right"===t&&i||"left"===t&&!i))throw y(t);e={overlayX:"start",overlayY:"center"}}var o=this._invertPosition(e.overlayX,e.overlayY);return{main:e,fallback:{overlayX:o.x,overlayY:o.y}}},e.prototype._invertPosition=function(e,t){var i=e,o=t;return"top"===this.mcPlacement||"bottom"===this.mcPlacement?"top"===t?o="bottom":"bottom"===t&&(o="top"):"end"===e?i="start":"start"===e&&(i="end"),{x:i,y:o}},e.prototype.show=function(){var e=this;if(!this.disabled){if(!this.tooltip){var t=this._createOverlay();this._detach(),this._portal=this._portal||new s.ComponentPortal(b,this.hostView),this.tooltip=t.attach(this._portal).instance,this.tooltip.afterHidden().pipe(p.takeUntil(this._destroyed)).subscribe(function(){return e._detach()}),this.isDynamicTooltip=!0;["mcTitle","mcMouseEnterDelay","mcMouseLeaveDelay","mcVisible","mcTrigger","mcPlacement"].forEach(function(t){return e.updateCompValue(t,e[t])}),this.tooltip.mcVisibleChange.pipe(p.takeUntil(this.$unsubscribe),p.distinctUntilChanged()).subscribe(function(t){e._visible=t,e.mcVisibleChange.emit(t)})}this._updatePosition(),this.tooltip.show(),this.isTooltipOpen=!0}},e.prototype.hide=function(){this.tooltip&&(this.tooltip.hide(),this.isTooltipOpen=!1)},m([t.Output(),d("design:type",Object)],e.prototype,"mcVisibleChange",void 0),m([t.Input("mc-tooltip"),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"mcTitle",null),m([t.Input("mcTitle"),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"setTitle",null),m([t.Input("mcTooltipDisabled"),d("design:type",Boolean),d("design:paramtypes",[Object])],e.prototype,"disabled",null),m([t.Input("mcMouseEnterDelay"),d("design:type",Number),d("design:paramtypes",[Number])],e.prototype,"mcMouseEnterDelay",null),m([t.Input("mcMouseLeaveDelay"),d("design:type",Number),d("design:paramtypes",[Number])],e.prototype,"mcMouseLeaveDelay",null),m([t.Input("mcVisible"),d("design:type",Boolean),d("design:paramtypes",[Boolean])],e.prototype,"mcVisible",null),m([t.Input("mcTrigger"),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"mcTrigger",null),m([t.Input("mcPlacement"),d("design:type",String),d("design:paramtypes",[String])],e.prototype,"mcPlacement",null),m([t.HostBinding("class.mc-tooltip-open"),d("design:type",Boolean),d("design:paramtypes",[])],e.prototype,"isOpen",null),m([t.HostBinding("class.disabled"),d("design:type",Boolean),d("design:paramtypes",[])],e.prototype,"isParentDisabled",null),e=m([t.Directive({selector:"[mc-tooltip]",host:{"(keydown)":"handleKeydown($event)","(touchend)":"handleTouchend()"}}),h(5,t.Inject(v)),h(6,t.Optional()),d("design:paramtypes",[r.Overlay,t.ElementRef,t.NgZone,r.ScrollDispatcher,t.ViewContainerRef,Object,i.Directionality])],e)}(),O=function(){function e(){}return e=m([t.NgModule({declarations:[b,x],exports:[b,x],imports:[u.BrowserAnimationsModule,c.CommonModule,r.OverlayModule],providers:[_],entryComponents:[b]})],e)}();e.McToolTipModule=O,e.McToolTipComponent=b,e.MC_TOOLTIP_SCROLL_STRATEGY=v,e.MC_TOOLTIP_SCROLL_STRATEGY_FACTORY=g,e.MC_TOOLTIP_SCROLL_STRATEGY_FACTORY_PROVIDER=_,e.getMcTooltipInvalidPositionError=y,e.McTooltipDirective=x,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-tooltip.umd.min.js.map
