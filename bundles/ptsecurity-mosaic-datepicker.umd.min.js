!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/a11y"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/common"),require("@angular/core"),require("@ptsecurity/mosaic/button"),require("@ptsecurity/mosaic/icon"),require("@ptsecurity/cdk/datetime"),require("rxjs"),require("@angular/cdk/bidi"),require("@ptsecurity/cdk/keycodes"),require("rxjs/operators"),require("@angular/cdk/coercion"),require("@ptsecurity/mosaic/form-field"),require("@angular/animations"),require("@angular/forms"),require("@ptsecurity/mosaic/input")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/datepicker",["exports","@angular/cdk/a11y","@angular/cdk/overlay","@angular/cdk/portal","@angular/common","@angular/core","@ptsecurity/mosaic/button","@ptsecurity/mosaic/icon","@ptsecurity/cdk/datetime","rxjs","@angular/cdk/bidi","@ptsecurity/cdk/keycodes","rxjs/operators","@angular/cdk/coercion","@ptsecurity/mosaic/form-field","@angular/animations","@angular/forms","@ptsecurity/mosaic/input"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ptsecurity=e.ptsecurity||{},e.ptsecurity.mosaic=e.ptsecurity.mosaic||{},e.ptsecurity.mosaic.datepicker={}),e.ng.cdk.a11y,e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.common,e.ng.core,e.ptsecurity.mosaic.button,e.ptsecurity.mosaic.icon,e.datetime,e.rxjs,e.ng.cdk.bidi,e.keycodes,e.rxjs.operators,e.ng.cdk.coercion,e.ptsecurity.mosaic["form-field"],e.ng.animations,e.ng.forms,e.ptsecurity.mosaic.input)}(this,(function(e,t,a,i,n,r,s,o,c,d,l,p,h,u,m,y,f,g){"use strict";function v(e){return Error("McDatepicker: No provider found for "+e+". You must import one of the existing modules at your application root or provide a custom implementation or use exists ones.")}var b=function(){this.changes=new d.Subject,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 20 years",this.nextMultiYearLabel="Next 20 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"};b.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],b.ɵprov=r.ɵɵdefineInjectable({factory:function(){return new b},token:b,providedIn:"root"});var D=function(e,t,a,i,n){this.value=e,this.displayValue=t,this.ariaLabel=a,this.enabled=i,this.cssClasses=n};var A=function(){function e(e,t){this.elementRef=e,this.ngZone=t,this.numCols=7,this.activeCell=0,this.cellAspectRatio=1,this.selectedValueChange=new r.EventEmitter}return e.prototype.cellClicked=function(e){e.enabled&&this.selectedValueChange.emit(e.value)},e.prototype.ngOnChanges=function(e){var t=e.numCols,a=this.rows,i=this.numCols;(e.rows||t)&&(this.firstRowOffset=a&&a.length&&a[0].length?i-a[0].length:0),(e.cellAspectRatio||t||!this.cellPadding)&&(this.cellPadding=50*this.cellAspectRatio/i+"%"),!t&&this.cellWidth||(this.cellWidth=100/i+"%")},e.prototype.isActiveCell=function(e,t){var a=e*this.numCols+t;return e&&(a-=this.firstRowOffset),a===this.activeCell},e.prototype.focusActiveCell=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.ngZone.onStable.asObservable().pipe(h.take(1)).subscribe((function(){var t=e.elementRef.nativeElement.querySelector(".mc-calendar__body_active");t&&t.focus()}))}))},e}();A.decorators=[{type:r.Component,args:[{selector:"[mc-calendar-body]",exportAs:"mcCalendarBody",template:'\x3c!--\n  If there\'s not enough space in the first row, create a separate label row. We mark this row as\n  aria-hidden because we don\'t want it to be read out as one of the weeks in the month.\n--\x3e\n<tr *ngIf="firstRowOffset < labelMinRequiredCells" aria-hidden="true">\n    <td class="mc-calendar__body-label"\n        [attr.colspan]="numCols"\n        [style.paddingTop]="cellPadding"\n        [style.paddingBottom]="cellPadding">\n        {{label}}\n    </td>\n</tr>\n\n\x3c!-- Create the first row separately so we can include a special spacer cell. --\x3e\n<tr *ngFor="let row of rows; let rowIndex = index" role="row">\n    \x3c!--\n      We mark this cell as aria-hidden so it doesn\'t get read out as one of the days in the week.\n      The aspect ratio of the table cells is maintained by setting the top and bottom padding as a\n      percentage of the width (a variant of the trick described here:\n      https://www.w3schools.com/howto/howto_css_aspect_ratio.asp).\n    --\x3e\n    <td *ngIf="rowIndex === 0 && firstRowOffset"\n        aria-hidden="true"\n        class="mc-calendar__body-label"\n        [attr.colspan]="firstRowOffset"\n        [style.paddingTop]="cellPadding"\n        [style.paddingBottom]="cellPadding">\n        {{firstRowOffset >= labelMinRequiredCells ? label : \'\'}}\n    </td>\n    <td *ngFor="let item of row; let colIndex = index"\n        role="gridcell"\n        class="mc-calendar__body-cell"\n        [ngClass]="item.cssClasses"\n        [tabindex]="isActiveCell(rowIndex, colIndex) ? 0 : -1"\n        [class.mc-calendar__body_disabled]="!item.enabled"\n        [class.mc-calendar__body_active]="isActiveCell(rowIndex, colIndex)"\n        [attr.aria-label]="item.ariaLabel"\n        [attr.aria-disabled]="!item.enabled || null"\n        [attr.aria-selected]="selectedValue === item.value"\n        (click)="cellClicked(item)"\n        [style.width]="cellWidth"\n        [style.paddingTop]="cellPadding"\n        [style.paddingBottom]="cellPadding">\n        <div class="mc-calendar__body-cell-content"\n             [class.mc-selected]="selectedValue === item.value"\n             [class.mc-calendar__body-today]="todayValue === item.value">\n            {{item.displayValue}}\n        </div>\n    </td>\n</tr>\n',host:{class:"mc-calendar__body",role:"grid","aria-readonly":"true"},encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[".mc-calendar__body{min-width:224px}.mc-calendar__body-label{height:0;line-height:0;padding-left:4.71429%;padding-right:4.71429%;text-align:left}.mc-calendar__body-cell{cursor:pointer;height:0;line-height:0;outline:none;position:relative;text-align:center}.mc-calendar__body_disabled{cursor:default}.mc-calendar__body-cell-content{align-items:center;border-style:solid;border-width:1px;box-sizing:border-box;display:flex;height:90%;justify-content:center;left:5%;line-height:1;padding:8px;position:absolute;top:5%;width:90%}.cdk-high-contrast-active .mc-calendar__body-cell-content,.cdk-high-contrast-active :host .mc-calendar__body-cell-content{border:none}mc-month-view .mc-calendar__body-cell-content{justify-content:flex-end}mc-multi-year-view .mc-calendar__body-cell-content,mc-year-view .mc-calendar__body-cell-content{justify-content:center}.cdk-high-contrast-active .mc-datepicker__popup:not(:empty),.cdk-high-contrast-active .mc-selected{outline:1px solid}.cdk-high-contrast-active .mc-calendar__body-today{outline:1px dotted}.cdk-high-contrast-active :host .mc-datepicker__popup:not(:empty),.cdk-high-contrast-active :host .mc-selected{outline:1px solid}.cdk-high-contrast-active :host .mc-calendar__body-today{outline:1px dotted}[dir=rtl] .mc-calendar__body-label{text-align:right}"]}]}],A.ctorParameters=function(){return[{type:r.ElementRef},{type:r.NgZone}]},A.propDecorators={label:[{type:r.Input}],rows:[{type:r.Input}],todayValue:[{type:r.Input}],selectedValue:[{type:r.Input}],labelMinRequiredCells:[{type:r.Input}],numCols:[{type:r.Input}],activeCell:[{type:r.Input}],cellAspectRatio:[{type:r.Input}],selectedValueChange:[{type:r.Output}]};var C=function(){function e(e,t,a,i){if(this.changeDetectorRef=e,this.dateFormats=t,this.dateAdapter=a,this.dir=i,this.selectedChange=new r.EventEmitter,this.userSelection=new r.EventEmitter,this.activeDateChange=new r.EventEmitter,!this.dateAdapter)throw v("DateAdapter");if(!this.dateFormats)throw v("MC_DATE_FORMATS");var n=this.dateAdapter.getFirstDayOfWeek(),s=this.dateAdapter.getDayOfWeekNames("narrow"),o=this.dateAdapter.getDayOfWeekNames("long").map((function(e,t){return{long:e,narrow:s[t]}}));this.weekdays=o.slice(n).concat(o.slice(0,n)),this._activeDate=this.dateAdapter.today()}return Object.defineProperty(e.prototype,"activeDate",{get:function(){return this._activeDate},set:function(e){var t=this._activeDate,a=this.getValidDateOrNull(this.dateAdapter.deserialize(e))||this.dateAdapter.today();this._activeDate=this.dateAdapter.clampDate(a,this.minDate,this.maxDate),this.hasSameMonthAndYear(t,this._activeDate)||this.init()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=this.getValidDateOrNull(this.dateAdapter.deserialize(e)),this.selectedDate=this.getDateInCurrentMonth(this._selected)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.init()},e.prototype.dateSelected=function(e){if(this.selectedDate!==e){var t=this.dateAdapter.getYear(this.activeDate),a=this.dateAdapter.getMonth(this.activeDate),i=this.dateAdapter.createDate(t,a,e);this.selectedChange.emit(i)}this.userSelection.emit()},e.prototype.handleCalendarBodyKeydown=function(e){var t=this._activeDate,a=this.isRtl();switch(e.keyCode){case p.LEFT_ARROW:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,a?1:-1);break;case p.RIGHT_ARROW:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,a?-1:1);break;case p.UP_ARROW:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,-7);break;case p.DOWN_ARROW:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,7);break;case p.HOME:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,1-this.dateAdapter.getDate(this._activeDate));break;case p.END:this.activeDate=this.dateAdapter.addCalendarDays(this._activeDate,this.dateAdapter.getNumDaysInMonth(this._activeDate)-this.dateAdapter.getDate(this._activeDate));break;case p.PAGE_UP:this.activeDate=e.altKey?this.dateAdapter.addCalendarYears(this._activeDate,-1):this.dateAdapter.addCalendarMonths(this._activeDate,-1);break;case p.PAGE_DOWN:this.activeDate=e.altKey?this.dateAdapter.addCalendarYears(this._activeDate,1):this.dateAdapter.addCalendarMonths(this._activeDate,1);break;case p.ENTER:case p.SPACE:return void(this.dateFilter&&!this.dateFilter(this._activeDate)||(this.dateSelected(this.dateAdapter.getDate(this._activeDate)),this.userSelection.emit(),e.preventDefault()));default:return}this.dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this.focusActiveCell(),e.preventDefault()},e.prototype.init=function(){this.selectedDate=this.getDateInCurrentMonth(this.selected),this.todayDate=this.getDateInCurrentMonth(this.dateAdapter.today()),this.monthLabel=this.dateAdapter.getMonthNames("short")[this.dateAdapter.getMonth(this.activeDate)],this.monthLabel=this.monthLabel[0].toLocaleUpperCase()+this.monthLabel.substr(1);var e=this.dateAdapter.createDate(this.dateAdapter.getYear(this.activeDate),this.dateAdapter.getMonth(this.activeDate),1);this.firstWeekOffset=(7+this.dateAdapter.getDayOfWeek(e)-this.dateAdapter.getFirstDayOfWeek())%7,this.createWeekCells(),this.changeDetectorRef.markForCheck()},e.prototype.focusActiveCell=function(){this.mcCalendarBody.focusActiveCell()},e.prototype.createWeekCells=function(){var e=this.dateAdapter.getNumDaysInMonth(this.activeDate),t=this.dateAdapter.getDateNames();this.weeks=[[]];for(var a=0,i=this.firstWeekOffset;a<e;a++,i++){7===i&&(this.weeks.push([]),i=0);var n=this.dateAdapter.createDate(this.dateAdapter.getYear(this.activeDate),this.dateAdapter.getMonth(this.activeDate),a+1),r=this.shouldEnableDate(n),s=this.dateAdapter.format(n,this.dateFormats.display.dateA11yLabel),o=this.dateClass?this.dateClass(n):void 0;this.weeks[this.weeks.length-1].push(new D(a+1,t[a],s,r,o))}},e.prototype.shouldEnableDate=function(e){return!!e&&(!this.dateFilter||this.dateFilter(e))&&(!this.minDate||this.dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this.dateAdapter.compareDate(e,this.maxDate)<=0)},e.prototype.getDateInCurrentMonth=function(e){return e&&this.hasSameMonthAndYear(e,this.activeDate)?this.dateAdapter.getDate(e):null},e.prototype.hasSameMonthAndYear=function(e,t){return!(!e||!t||this.dateAdapter.getMonth(e)!==this.dateAdapter.getMonth(t)||this.dateAdapter.getYear(e)!==this.dateAdapter.getYear(t))},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e.prototype.isRtl=function(){return this.dir&&"rtl"===this.dir.value},e}();C.decorators=[{type:r.Component,args:[{selector:"mc-month-view",exportAs:"mcMonthView",template:'<table class="mc-calendar__table">\n    <thead class="mc-calendar__table-header">\n    <tr>\n        <th *ngFor="let day of weekdays" [attr.aria-label]="day.long">{{day.narrow}}</th>\n    </tr>\n    <tr>\n        <th class="mc-calendar__table-header-divider" colspan="7" aria-hidden="true"></th>\n    </tr>\n    </thead>\n    <tbody mc-calendar-body\n           [label]="monthLabel"\n           [rows]="weeks"\n           [todayValue]="todayDate"\n           [selectedValue]="selectedDate"\n           [labelMinRequiredCells]="3"\n           [activeCell]="dateAdapter.getDate(activeDate) - 1"\n           (selectedValueChange)="dateSelected($event)"\n           (keydown)="handleCalendarBodyKeydown($event)">\n    </tbody>\n</table>\n',encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush}]}],C.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[c.MC_DATE_FORMATS]}]},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:l.Directionality,decorators:[{type:r.Optional}]}]},C.propDecorators={activeDate:[{type:r.Input}],selected:[{type:r.Input}],minDate:[{type:r.Input}],maxDate:[{type:r.Input}],dateFilter:[{type:r.Input}],dateClass:[{type:r.Input}],selectedChange:[{type:r.Output}],userSelection:[{type:r.Output}],activeDateChange:[{type:r.Output}],mcCalendarBody:[{type:r.ViewChild,args:[A,{static:!1}]}]};var _=24,k=function(){function e(e,t,a){if(this.changeDetectorRef=e,this.dateAdapter=t,this.dir=a,this.selectedChange=new r.EventEmitter,this.yearSelected=new r.EventEmitter,this.activeDateChange=new r.EventEmitter,!this.dateAdapter)throw v("DateAdapter");this._activeDate=this.dateAdapter.today()}return Object.defineProperty(e.prototype,"activeDate",{get:function(){return this._activeDate},set:function(e){var t=this._activeDate,a=this.getValidDateOrNull(this.dateAdapter.deserialize(e))||this.dateAdapter.today();this._activeDate=this.dateAdapter.clampDate(a,this.minDate,this.maxDate),Math.floor(this.dateAdapter.getYear(t)/_)!==Math.floor(this.dateAdapter.getYear(this._activeDate)/_)&&this.init()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=this.getValidDateOrNull(this.dateAdapter.deserialize(e)),this.selectedYear=this._selected&&this.dateAdapter.getYear(this._selected)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.init()},e.prototype.init=function(){var e=this;this.todayYear=this.dateAdapter.getYear(this.dateAdapter.today());var t=this.dateAdapter.getYear(this._activeDate),a=t%_;this.years=[];for(var i=0,n=[];i<_;i++)n.push(t-a+i),4===n.length&&(this.years.push(n.map((function(t){return e.createCellForYear(t)}))),n=[]);this.changeDetectorRef.markForCheck()},e.prototype.onYearSelected=function(e){this.yearSelected.emit(this.dateAdapter.createDate(e,0,1));var t=this.dateAdapter.getMonth(this.activeDate),a=this.dateAdapter.getNumDaysInMonth(this.dateAdapter.createDate(e,t,1));this.selectedChange.emit(this.dateAdapter.createDate(e,t,Math.min(this.dateAdapter.getDate(this.activeDate),a)))},e.prototype.handleCalendarBodyKeydown=function(e){var t=this._activeDate,a=this.isRtl();switch(e.keyCode){case p.LEFT_ARROW:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,a?1:-1);break;case p.RIGHT_ARROW:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,a?-1:1);break;case p.UP_ARROW:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,-4);break;case p.DOWN_ARROW:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,4);break;case p.HOME:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,-this.dateAdapter.getYear(this._activeDate)%_);break;case p.END:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,_-this.dateAdapter.getYear(this._activeDate)%_-1);break;case p.PAGE_UP:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,e.altKey?-240:-24);break;case p.PAGE_DOWN:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,e.altKey?240:_);break;case p.ENTER:case p.SPACE:this.onYearSelected(this.dateAdapter.getYear(this._activeDate));break;default:return}this.dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this.focusActiveCell(),e.preventDefault()},e.prototype.getActiveCell=function(){return this.dateAdapter.getYear(this.activeDate)%_},e.prototype.focusActiveCell=function(){this.mcCalendarBody.focusActiveCell()},e.prototype.createCellForYear=function(e){var t=this.dateAdapter.getYearName(this.dateAdapter.createDate(e,0,1));return new D(e,t,t,this.shouldEnableYear(e))},e.prototype.shouldEnableYear=function(e){if(null==e||this.maxDate&&e>this.dateAdapter.getYear(this.maxDate)||this.minDate&&e<this.dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(var t=this.dateAdapter.createDate(e,0,1);this.dateAdapter.getYear(t)===e;t=this.dateAdapter.addCalendarDays(t,1))if(this.dateFilter(t))return!0;return!1},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e.prototype.isRtl=function(){return this.dir&&"rtl"===this.dir.value},e}();k.decorators=[{type:r.Component,args:[{selector:"mc-multi-year-view",exportAs:"mcMultiYearView",template:'<table class="mc-calendar__table">\n    <thead class="mc-calendar__table-header">\n    <tr>\n        <th class="mc-calendar__table-header-divider" colspan="4"></th>\n    </tr>\n    </thead>\n    <tbody mc-calendar-body\n           [rows]="years"\n           [todayValue]="todayYear"\n           [selectedValue]="selectedYear"\n           [numCols]="4"\n           [cellAspectRatio]="4 / 7"\n           [activeCell]="getActiveCell()"\n           (selectedValueChange)="onYearSelected($event)"\n           (keydown)="handleCalendarBodyKeydown($event)">\n    </tbody>\n</table>\n',encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush}]}],k.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:l.Directionality,decorators:[{type:r.Optional}]}]},k.propDecorators={activeDate:[{type:r.Input}],selected:[{type:r.Input}],minDate:[{type:r.Input}],maxDate:[{type:r.Input}],dateFilter:[{type:r.Input}],selectedChange:[{type:r.Output}],yearSelected:[{type:r.Output}],activeDateChange:[{type:r.Output}],mcCalendarBody:[{type:r.ViewChild,args:[A,{static:!1}]}]};var w=function(){function e(e,t,a,i){if(this.changeDetectorRef=e,this.dateFormats=t,this.dateAdapter=a,this.dir=i,this.selectedChange=new r.EventEmitter,this.monthSelected=new r.EventEmitter,this.activeDateChange=new r.EventEmitter,!this.dateAdapter)throw v("DateAdapter");if(!this.dateFormats)throw v("MC_DATE_FORMATS");this._activeDate=this.dateAdapter.today()}return Object.defineProperty(e.prototype,"activeDate",{get:function(){return this._activeDate},set:function(e){var t=this._activeDate,a=this.getValidDateOrNull(this.dateAdapter.deserialize(e))||this.dateAdapter.today();this._activeDate=this.dateAdapter.clampDate(a,this.minDate,this.maxDate),this.dateAdapter.getYear(t)!==this.dateAdapter.getYear(this._activeDate)&&this.init()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=this.getValidDateOrNull(this.dateAdapter.deserialize(e)),this.selectedMonth=this.getMonthInCurrentYear(this._selected)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.init()},e.prototype.onMonthSelected=function(e){var t=this.dateAdapter.createDate(this.dateAdapter.getYear(this.activeDate),e,1);this.monthSelected.emit(t);var a=this.dateAdapter.getNumDaysInMonth(t);this.selectedChange.emit(this.dateAdapter.createDate(this.dateAdapter.getYear(this.activeDate),e,Math.min(this.dateAdapter.getDate(this.activeDate),a)))},e.prototype.handleCalendarBodyKeydown=function(e){var t=this._activeDate,a=this.isRtl();switch(e.keyCode){case p.LEFT_ARROW:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,a?1:-1);break;case p.RIGHT_ARROW:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,a?-1:1);break;case p.UP_ARROW:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,-4);break;case p.DOWN_ARROW:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,4);break;case p.HOME:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,-this.dateAdapter.getMonth(this._activeDate));break;case p.END:this.activeDate=this.dateAdapter.addCalendarMonths(this._activeDate,11-this.dateAdapter.getMonth(this._activeDate));break;case p.PAGE_UP:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case p.PAGE_DOWN:this.activeDate=this.dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case p.ENTER:case p.SPACE:this.onMonthSelected(this.dateAdapter.getMonth(this._activeDate));break;default:return}this.dateAdapter.compareDate(t,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this.focusActiveCell(),e.preventDefault()},e.prototype.init=function(){var e=this;this.selectedMonth=this.getMonthInCurrentYear(this.selected),this.todayMonth=this.getMonthInCurrentYear(this.dateAdapter.today()),this.yearLabel=this.dateAdapter.getYearName(this.activeDate);var t=this.dateAdapter.getMonthNames("short");this.months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map((function(a){return a.map((function(a){return e.createCellForMonth(a,t[a])}))})),this.changeDetectorRef.markForCheck()},e.prototype.focusActiveCell=function(){this.mcCalendarBody.focusActiveCell()},e.prototype.getMonthInCurrentYear=function(e){return e&&this.dateAdapter.getYear(e)===this.dateAdapter.getYear(this.activeDate)?this.dateAdapter.getMonth(e):null},e.prototype.createCellForMonth=function(e,t){var a=this.dateAdapter.format(this.dateAdapter.createDate(this.dateAdapter.getYear(this.activeDate),e,1),this.dateFormats.display.monthYearA11yLabel),i=t[0].toLocaleUpperCase()+t.substr(1);return new D(e,i,a,this.shouldEnableMonth(e))},e.prototype.shouldEnableMonth=function(e){var t=this.dateAdapter.getYear(this.activeDate);if(null==e||this.isYearAndMonthAfterMaxDate(t,e)||this.isYearAndMonthBeforeMinDate(t,e))return!1;if(!this.dateFilter)return!0;for(var a=this.dateAdapter.createDate(t,e,1);this.dateAdapter.getMonth(a)===e;a=this.dateAdapter.addCalendarDays(a,1))if(this.dateFilter(a))return!0;return!1},e.prototype.isYearAndMonthAfterMaxDate=function(e,t){if(this.maxDate){var a=this.dateAdapter.getYear(this.maxDate),i=this.dateAdapter.getMonth(this.maxDate);return e>a||e===a&&t>i}return!1},e.prototype.isYearAndMonthBeforeMinDate=function(e,t){if(this.minDate){var a=this.dateAdapter.getYear(this.minDate),i=this.dateAdapter.getMonth(this.minDate);return e<a||e===a&&t<i}return!1},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e.prototype.isRtl=function(){return this.dir&&"rtl"===this.dir.value},e}();w.decorators=[{type:r.Component,args:[{selector:"mc-year-view",exportAs:"mcYearView",template:'<table class="mc-calendar__table">\n    <thead class="mc-calendar__table-header">\n    <tr>\n        <th class="mc-calendar__table-header-divider" colspan="4"></th>\n    </tr>\n    </thead>\n    <tbody mc-calendar-body\n           [label]="yearLabel"\n           [rows]="months"\n           [todayValue]="todayMonth"\n           [selectedValue]="selectedMonth"\n           [labelMinRequiredCells]="2"\n           [numCols]="4"\n           [cellAspectRatio]="4 / 7"\n           [activeCell]="dateAdapter.getMonth(activeDate)"\n           (selectedValueChange)="onMonthSelected($event)"\n           (keydown)="handleCalendarBodyKeydown($event)">\n    </tbody>\n</table>\n',encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush}]}],w.ctorParameters=function(){return[{type:r.ChangeDetectorRef},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[c.MC_DATE_FORMATS]}]},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:l.Directionality,decorators:[{type:r.Optional}]}]},w.propDecorators={activeDate:[{type:r.Input}],selected:[{type:r.Input}],minDate:[{type:r.Input}],maxDate:[{type:r.Input}],dateFilter:[{type:r.Input}],selectedChange:[{type:r.Output}],monthSelected:[{type:r.Output}],activeDateChange:[{type:r.Output}],mcCalendarBody:[{type:r.ViewChild,args:[A,{static:!1}]}]};var O=function(){function e(e,t,a,i,n){this.intl=e,this.calendar=t,this.dateAdapter=a,this.dateFormats=i,this.calendar.stateChanges.subscribe((function(){return n.markForCheck()}))}return Object.defineProperty(e.prototype,"periodButtonText",{get:function(){if("month"===this.calendar.currentView){var e=this.dateAdapter.format(this.calendar.activeDate,this.dateFormats.display.monthYearLabel);return e[0].toLocaleUpperCase()+e.substr(1)}if("year"===this.calendar.currentView)return this.dateAdapter.getYearName(this.calendar.activeDate);var t=this.dateAdapter.getYear(this.calendar.activeDate);return this.dateAdapter.getYearName(this.dateAdapter.createDate(t-t%24,0,1))+" – "+this.dateAdapter.getYearName(this.dateAdapter.createDate(t+_-1-t%24,0,1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"periodButtonLabel",{get:function(){return"month"===this.calendar.currentView?this.intl.switchToMultiYearViewLabel:this.intl.switchToMonthViewLabel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"prevButtonLabel",{get:function(){return{month:this.intl.prevMonthLabel,year:this.intl.prevYearLabel,"multi-year":this.intl.prevMultiYearLabel}[this.calendar.currentView]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextButtonLabel",{get:function(){return{month:this.intl.nextMonthLabel,year:this.intl.nextYearLabel,"multi-year":this.intl.nextMultiYearLabel}[this.calendar.currentView]},enumerable:!1,configurable:!0}),e.prototype.currentPeriodClicked=function(){this.calendar.currentView="month"===this.calendar.currentView?"multi-year":"month"},e.prototype.previousClicked=function(){this.calendar.activeDate="month"===this.calendar.currentView?this.dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this.dateAdapter.addCalendarYears(this.calendar.activeDate,"year"===this.calendar.currentView?-1:-24)},e.prototype.nextClicked=function(){this.calendar.activeDate="month"===this.calendar.currentView?this.dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this.dateAdapter.addCalendarYears(this.calendar.activeDate,"year"===this.calendar.currentView?1:_)},e.prototype.previousEnabled=function(){return!this.calendar.minDate||(!this.calendar.minDate||!this.isSameView(this.calendar.activeDate,this.calendar.minDate))},e.prototype.nextEnabled=function(){return!this.calendar.maxDate||!this.isSameView(this.calendar.activeDate,this.calendar.maxDate)},e.prototype.isSameView=function(e,t){return"month"===this.calendar.currentView?this.dateAdapter.getYear(e)===this.dateAdapter.getYear(t)&&this.dateAdapter.getMonth(e)===this.dateAdapter.getMonth(t):"year"===this.calendar.currentView?this.dateAdapter.getYear(e)===this.dateAdapter.getYear(t):Math.floor(this.dateAdapter.getYear(e)/_)===Math.floor(this.dateAdapter.getYear(t)/_)},e}();O.decorators=[{type:r.Component,args:[{selector:"mc-calendar-header",template:'<div class="mc-calendar__header">\n    <div class="mc-calendar__controls">\n        <button mc-button type="button" class="mc-calendar__period-button"\n                (click)="currentPeriodClicked()" [attr.aria-label]="periodButtonLabel">\n            {{periodButtonText}}\n            <i class="mc mc-icon"\n               [class.mc-angle-up-M_16]="calendar.currentView !== \'month\'"\n               [class.mc-angle-down-M_16]="calendar.currentView === \'month\'"></i>\n        </button>\n\n        <div class="mc-calendar-spacer"></div>\n\n        <ng-content></ng-content>\n\n        <button mc-button type="button" class="mc-calendar__previous-button"\n                [disabled]="!previousEnabled()" (click)="previousClicked()"\n                [attr.aria-label]="prevButtonLabel">\n            <i mc-icon="mc-angle-left-L_16"></i>\n        </button>\n\n        <button mc-button type="button" class="mc-calendar__next-button"\n                [disabled]="!nextEnabled()" (click)="nextClicked()"\n                [attr.aria-label]="nextButtonLabel">\n            <i mc-icon="mc-angle-right-L_16"></i>\n        </button>\n    </div>\n</div>\n',exportAs:"mcCalendarHeader",encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush}]}],O.ctorParameters=function(){return[{type:b},{type:x,decorators:[{type:r.Inject,args:[r.forwardRef((function(){return x}))]}]},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[c.MC_DATE_FORMATS]}]},{type:r.ChangeDetectorRef}]};var x=function(){function e(e,t,a,i){var n=this;if(this.dateAdapter=t,this.dateFormats=a,this.changeDetectorRef=i,this.startView="month",this.selectedChange=new r.EventEmitter,this.yearSelected=new r.EventEmitter,this.monthSelected=new r.EventEmitter,this.userSelection=new r.EventEmitter,this.stateChanges=new d.Subject,this.moveFocusOnNextTick=!1,!this.dateAdapter)throw v("DateAdapter");if(!this.dateFormats)throw v("MC_DATE_FORMATS");this.intlChanges=e.changes.subscribe((function(){i.markForCheck(),n.stateChanges.next()}))}return Object.defineProperty(e.prototype,"startAt",{get:function(){return this._startAt},set:function(e){this._startAt=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(e){this._minDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(e){this._maxDate=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeDate",{get:function(){return this.clampedActiveDate},set:function(e){this.clampedActiveDate=this.dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentView",{get:function(){return this._currentView},set:function(e){this._currentView=e,this.moveFocusOnNextTick=!0},enumerable:!1,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.calendarHeaderPortal=new i.ComponentPortal(this.headerComponent||O),this.activeDate=this.startAt||this.dateAdapter.today(),this._currentView=this.startView},e.prototype.ngAfterViewChecked=function(){this.moveFocusOnNextTick&&(this.moveFocusOnNextTick=!1,this.focusActiveCell())},e.prototype.ngOnDestroy=function(){this.intlChanges.unsubscribe(),this.stateChanges.complete()},e.prototype.ngOnChanges=function(e){var t=e.minDate||e.maxDate||e.dateFilter;if(t&&!t.firstChange){var a=this.getCurrentViewComponent();a&&(this.changeDetectorRef.detectChanges(),a.init())}this.stateChanges.next()},e.prototype.focusActiveCell=function(){this.getCurrentViewComponent().focusActiveCell()},e.prototype.updateTodaysDate=function(){("month"===this.currentView?this.monthView:"year"===this.currentView?this.yearView:this.multiYearView).ngAfterContentInit()},e.prototype.dateSelected=function(e){this.dateAdapter.sameDate(e,this.selected)||this.selectedChange.emit(e)},e.prototype.yearSelectedInMultiYearView=function(e){this.yearSelected.emit(e)},e.prototype.monthSelectedInYearView=function(e){this.monthSelected.emit(e)},e.prototype.userSelected=function(){this.userSelection.emit()},e.prototype.goToDateInView=function(e,t){this.activeDate=e,this.currentView=t},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e.prototype.getCurrentViewComponent=function(){return this.monthView||this.yearView||this.multiYearView},e}();x.decorators=[{type:r.Component,args:[{selector:"mc-calendar",exportAs:"mcCalendar",template:'<ng-template [cdkPortalOutlet]="calendarHeaderPortal"></ng-template>\n\n<div class="mc-calendar__content" [ngSwitch]="currentView" cdkMonitorSubtreeFocus tabindex="-1">\n    <mc-month-view\n        *ngSwitchCase="\'month\'"\n        [(activeDate)]="activeDate"\n        [selected]="selected"\n        [dateFilter]="dateFilter"\n        [maxDate]="maxDate"\n        [minDate]="minDate"\n        [dateClass]="dateClass"\n        (selectedChange)="dateSelected($event)"\n        (userSelection)="userSelected()">\n    </mc-month-view>\n\n    <mc-year-view\n        *ngSwitchCase="\'year\'"\n        [(activeDate)]="activeDate"\n        [selected]="selected"\n        [dateFilter]="dateFilter"\n        [maxDate]="maxDate"\n        [minDate]="minDate"\n        (monthSelected)="monthSelectedInYearView($event)"\n        (selectedChange)="goToDateInView($event, \'month\')">\n    </mc-year-view>\n\n    <mc-multi-year-view\n        *ngSwitchCase="\'multi-year\'"\n        [(activeDate)]="activeDate"\n        [selected]="selected"\n        [dateFilter]="dateFilter"\n        [maxDate]="maxDate"\n        [minDate]="minDate"\n        (yearSelected)="yearSelectedInMultiYearView($event)"\n        (selectedChange)="goToDateInView($event, \'year\')">\n    </mc-multi-year-view>\n</div>\n',host:{class:"mc-calendar"},encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,styles:['.mc-calendar{display:block}.mc-calendar__header{padding:8px 8px 0}.mc-calendar__content{outline:none;padding:0 8px 8px}.mc-calendar__controls{display:flex;margin:5% calc(4.71429% - 16px)}.mc-calendar-spacer{flex:1 1 auto}.mc-calendar__period-button{min-width:0}.mc-calendar__previous-button:after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mc-calendar__next-button:after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mc-calendar__table{border-collapse:collapse;border-spacing:0;width:100%}.mc-calendar__table-header th{padding:0 0 8px;text-align:center}.mc-calendar__table-header-divider{height:1px;position:relative}.mc-calendar__table-header-divider:after{content:"";height:1px;left:-8px;position:absolute;right:-8px;top:0}']}]}],x.ctorParameters=function(){return[{type:b},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[c.MC_DATE_FORMATS]}]},{type:r.ChangeDetectorRef}]},x.propDecorators={startAt:[{type:r.Input}],selected:[{type:r.Input}],minDate:[{type:r.Input}],maxDate:[{type:r.Input}],headerComponent:[{type:r.Input}],startView:[{type:r.Input}],dateFilter:[{type:r.Input}],dateClass:[{type:r.Input}],selectedChange:[{type:r.Output}],yearSelected:[{type:r.Output}],monthSelected:[{type:r.Output}],userSelection:[{type:r.Output}],monthView:[{type:r.ViewChild,args:[C,{static:!1}]}],yearView:[{type:r.ViewChild,args:[w,{static:!1}]}],multiYearView:[{type:r.ViewChild,args:[k,{static:!1}]}]};var V={transformPanel:y.trigger("transformPanel",[y.state("void",y.style({opacity:0,transform:"scale(1, 0.8)"})),y.transition("void => enter",y.animate("120ms cubic-bezier(0, 0, 0.2, 1)",y.style({opacity:1,transform:"scale(1, 1)"}))),y.transition("* => void",y.animate("100ms linear",y.style({opacity:0})))]),fadeInCalendar:y.trigger("fadeInCalendar",[y.state("void",y.style({opacity:0})),y.state("enter",y.style({opacity:1})),y.transition("void => *",y.animate("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var M=0,I=new r.InjectionToken("mc-datepicker-scroll-strategy");function E(e){return function(){return e.scrollStrategies.reposition()}}var S={provide:I,deps:[a.Overlay],useFactory:E},R=function(){function e(){}return e.prototype.ngAfterViewInit=function(){this.calendar.focusActiveCell()},e}();R.decorators=[{type:r.Component,args:[{selector:"mc-datepicker__content",exportAs:"mcDatepickerContent",template:'<mc-calendar [id]="datepicker.id"\n             [ngClass]="datepicker.panelClass"\n             [startAt]="datepicker.startAt"\n             [startView]="datepicker.startView"\n             [minDate]="datepicker.minDate"\n             [maxDate]="datepicker.maxDate"\n             [dateFilter]="datepicker.dateFilter"\n             [headerComponent]="datepicker.calendarHeaderComponent"\n             [selected]="datepicker.selected"\n             [dateClass]="datepicker.dateClass"\n             [@fadeInCalendar]="\'enter\'"\n             (selectedChange)="datepicker.select($event)"\n             (yearSelected)="datepicker.selectYear($event)"\n             (monthSelected)="datepicker.selectMonth($event)"\n             (userSelection)="datepicker.close()">\n</mc-calendar>\n',host:{class:"mc-datepicker__content","[@transformPanel]":'"enter"'},animations:[V.transformPanel,V.fadeInCalendar],encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[".mc-datepicker__content{border-style:solid;border-width:1px;display:block}.mc-datepicker__content .mc-calendar{height:344px;width:296px}.mc-datepicker__content .mc-calendar__next-button[disabled],.mc-datepicker__content .mc-calendar__previous-button[disabled]{border:0}@media (orientation:landscape){.mc-calendar{height:80vh;width:64vh}}@media (orientation:portrait){.mc-calendar{height:100vw;width:80vw}}"]}]}],R.propDecorators={calendar:[{type:r.ViewChild,args:[x,{static:!1}]}]};var P=function(){function e(e,t,a,i,n,s,o){if(this.overlay=e,this.ngZone=t,this.viewContainerRef=a,this.dateAdapter=n,this.dir=s,this.document=o,this._hasBackdrop=!1,this.startView="month",this.yearSelected=new r.EventEmitter,this.monthSelected=new r.EventEmitter,this.backdropClass="cdk-overlay-transparent-backdrop",this.openedStream=new r.EventEmitter,this.closedStream=new r.EventEmitter,this.id="mc-datepicker-"+M++,this.stateChanges=new d.Subject,this.disabledChange=new d.Subject,this.selectedChanged=new d.Subject,this._opened=!1,this.validSelected=null,this.focusedElementBeforeOpen=null,this.inputSubscription=d.Subscription.EMPTY,this.closeSubscription=d.Subscription.EMPTY,!this.dateAdapter)throw v("DateAdapter");this.scrollStrategy=i}return Object.defineProperty(e.prototype,"hasBackdrop",{get:function(){return this._hasBackdrop},set:function(e){this._hasBackdrop=u.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startAt",{get:function(){return this._startAt||(this.datepickerInput?this.datepickerInput.value:null)},set:function(e){this._startAt=this.getValidDateOrNull(this.dateAdapter.deserialize(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:this._disabled},set:function(e){var t=u.coerceBooleanProperty(e);t!==this._disabled&&(this._disabled=t,this.disabledChange.next(t))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},set:function(e){u.coerceBooleanProperty(e)?this.open():this.close()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.validSelected},set:function(e){this.validSelected=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this.datepickerInput&&this.datepickerInput.min},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this.datepickerInput&&this.datepickerInput.max},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateFilter",{get:function(){return this.datepickerInput&&this.datepickerInput.dateFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.selected},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.close(),this.inputSubscription.unsubscribe(),this.closeSubscription.unsubscribe(),this.disabledChange.complete(),this.popupRef&&(this.popupRef.dispose(),this.popupComponentRef=null)},e.prototype.select=function(e){var t=this.selected;this.selected=e,this.dateAdapter.sameDate(t,this.selected)||this.selectedChanged.next(e)},e.prototype.selectYear=function(e){this.yearSelected.emit(e)},e.prototype.selectMonth=function(e){this.monthSelected.emit(e)},e.prototype.registerInput=function(e){var t=this;if(this.datepickerInput)throw Error("A McDatepicker can only be associated with a single input.");this.datepickerInput=e,this.inputSubscription=this.datepickerInput.valueChange.subscribe((function(e){return t.selected=e}))},e.prototype.open=function(){if(!this._opened&&!this.disabled){if(!this.datepickerInput)throw Error("Attempted to open an McDatepicker with no associated input.");this.document&&(this.focusedElementBeforeOpen=this.document.activeElement),this.openAsPopup(),this._opened=!0,this.openedStream.emit()}},e.prototype.close=function(){var e=this;if(this._opened){this.popupRef&&this.popupRef.hasAttached()&&this.popupRef.detach(),this.calendarPortal&&this.calendarPortal.isAttached&&this.calendarPortal.detach();var t=function(){e._opened&&(e._opened=!1,e.closedStream.emit(),e.focusedElementBeforeOpen=null,e.datepickerInput.elementRef.nativeElement.focus())};this.focusedElementBeforeOpen&&"function"==typeof this.focusedElementBeforeOpen.focus?(this.focusedElementBeforeOpen.focus(),setTimeout(t)):t()}},e.prototype.openAsPopup=function(){var e=this;this.calendarPortal||(this.calendarPortal=new i.ComponentPortal(R,this.viewContainerRef)),this.popupRef||this.createPopup(),this.popupRef.hasAttached()||(this.popupComponentRef=this.popupRef.attach(this.calendarPortal),this.popupComponentRef.instance.datepicker=this,this.ngZone.onStable.asObservable().pipe(h.take(1)).subscribe((function(){return e.popupRef.updatePosition()})))},e.prototype.createPopup=function(){var e=this,t=new a.OverlayConfig({positionStrategy:this.createPopupPositionStrategy(),hasBackdrop:this.hasBackdrop,backdropClass:this.backdropClass,direction:this.dir,scrollStrategy:this.scrollStrategy(),panelClass:"mc-datepicker__popup"});this.popupRef=this.overlay.create(t),this.popupRef.overlayElement.setAttribute("role","dialog"),this.closeSubscription=this.closingActions().subscribe((function(){return e.close()}))},e.prototype.closingActions=function(){var e=this;return d.merge(this.popupRef.backdropClick(),this.popupRef.outsidePointerEvents(),this.popupRef.detachments(),this.popupRef.keydownEvents().pipe(h.filter((function(t){return t.keyCode===p.ESCAPE||e.datepickerInput&&t.altKey&&t.keyCode===p.UP_ARROW}))))},e.prototype.createPopupPositionStrategy=function(){return this.overlay.position().flexibleConnectedTo(this.datepickerInput.elementRef).withTransformOriginOn(".mc-datepicker__content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e}();P.decorators=[{type:r.Component,args:[{selector:"mc-datepicker",template:"",exportAs:"mcDatepicker",changeDetection:r.ChangeDetectionStrategy.OnPush,encapsulation:r.ViewEncapsulation.None,providers:[{provide:m.McFormFieldControl,useExisting:P}]}]}],P.ctorParameters=function(){return[{type:a.Overlay},{type:r.NgZone},{type:r.ViewContainerRef},{type:void 0,decorators:[{type:r.Inject,args:[I]}]},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:l.Directionality,decorators:[{type:r.Optional}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[n.DOCUMENT]}]}]},P.propDecorators={hasBackdrop:[{type:r.Input}],startAt:[{type:r.Input}],disabled:[{type:r.Input}],opened:[{type:r.Input}],calendarHeaderComponent:[{type:r.Input}],startView:[{type:r.Input}],yearSelected:[{type:r.Output}],monthSelected:[{type:r.Output}],panelClass:[{type:r.Input}],dateClass:[{type:r.Input}],backdropClass:[{type:r.Input}],openedStream:[{type:r.Output,args:["opened"]}],closedStream:[{type:r.Output,args:["closed"]}]};var Y={provide:f.NG_VALUE_ACCESSOR,useExisting:r.forwardRef((function(){return N})),multi:!0},T={provide:f.NG_VALIDATORS,useExisting:r.forwardRef((function(){return N})),multi:!0},F=function(e,t){this.target=e,this.targetElement=t,this.value=this.target.value};var N=function(){function e(e,t,a){var i=this;if(this.elementRef=e,this.dateAdapter=t,this.dateFormats=a,this.dateChange=new r.EventEmitter,this.dateInput=new r.EventEmitter,this.valueChange=new r.EventEmitter,this.disabledChange=new r.EventEmitter,this.datepickerSubscription=d.Subscription.EMPTY,this.localeSubscription=d.Subscription.EMPTY,this.lastValueValid=!1,this.onTouched=function(){},this.cvaOnChange=function(){},this.validatorOnChange=function(){},this.parseValidator=function(){return i.lastValueValid?null:{mcDatepickerParse:{text:i.elementRef.nativeElement.value}}},this.minValidator=function(e){var t=i.getValidDateOrNull(i.dateAdapter.deserialize(e.value));return!i.min||!t||i.dateAdapter.compareDate(i.min,t)<=0?null:{mcDatepickerMin:{min:i.min,actual:t}}},this.maxValidator=function(e){var t=i.getValidDateOrNull(i.dateAdapter.deserialize(e.value));return!i.max||!t||i.dateAdapter.compareDate(i.max,t)>=0?null:{mcDatepickerMax:{max:i.max,actual:t}}},this.filterValidator=function(e){var t=i.getValidDateOrNull(i.dateAdapter.deserialize(e.value));return i.dateFilter&&t&&!i.dateFilter(t)?{mcDatepickerFilter:!0}:null},this.validator=f.Validators.compose([this.parseValidator,this.minValidator,this.maxValidator,this.filterValidator]),!this.dateAdapter)throw v("DateAdapter");if(!this.dateFormats)throw v("MC_DATE_FORMATS");this.localeSubscription=t.localeChanges.subscribe((function(){return i.value=i.value}))}return Object.defineProperty(e.prototype,"mcDatepicker",{set:function(e){var t=this;e&&(this.datepicker=e,this.datepicker.registerInput(this),this.datepickerSubscription.unsubscribe(),this.datepickerSubscription=this.datepicker.selectedChanged.subscribe((function(e){t.value=e,t.cvaOnChange(e),t.onTouched(),t.dateChange.emit(new F(t,t.elementRef.nativeElement))})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mcDatepickerFilter",{set:function(e){this.dateFilter=e,this.validatorOnChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e=this.dateAdapter.deserialize(e),this.lastValueValid=!e||this.dateAdapter.isValid(e),e=this.getValidDateOrNull(e);var t=this.value;this._value=e,this.formatValue(e),this.dateAdapter.sameDate(t,e)||this.valueChange.emit(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(e){this._min=this.getValidDateOrNull(this.dateAdapter.deserialize(e)),this.validatorOnChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(e){this._max=this.getValidDateOrNull(this.dateAdapter.deserialize(e)),this.validatorOnChange()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return!!this._disabled},set:function(e){var t=u.coerceBooleanProperty(e),a=this.elementRef.nativeElement;this._disabled!==t&&(this._disabled=t,this.disabledChange.emit(t)),t&&a.blur&&a.blur()},enumerable:!1,configurable:!0}),e.prototype.ngOnDestroy=function(){this.datepickerSubscription.unsubscribe(),this.localeSubscription.unsubscribe(),this.valueChange.complete(),this.disabledChange.complete()},e.prototype.registerOnValidatorChange=function(e){this.validatorOnChange=e},e.prototype.validate=function(e){return this.validator?this.validator(e):null},e.prototype.writeValue=function(e){this.value=e},e.prototype.registerOnChange=function(e){this.cvaOnChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.onKeydown=function(e){var t=e.altKey&&e.keyCode===p.DOWN_ARROW;this.datepicker&&t&&!this.elementRef.nativeElement.readOnly&&(this.datepicker.open(),e.preventDefault())},e.prototype.onInput=function(e){var t=this.dateAdapter.parse(e,this.dateFormats.parse.dateInput);this.lastValueValid=!t||this.dateAdapter.isValid(t),t=this.getValidDateOrNull(t),this.dateAdapter.sameDate(t,this._value)||(this._value=t,this.cvaOnChange(t),this.valueChange.emit(t),this.dateInput.emit(new F(this,this.elementRef.nativeElement)))},e.prototype.onChange=function(){this.dateChange.emit(new F(this,this.elementRef.nativeElement))},e.prototype.onBlur=function(){this.value&&this.formatValue(this.value),this.onTouched()},e.prototype.formatValue=function(e){this.elementRef.nativeElement.value=e?this.dateAdapter.format(e,this.dateFormats.display.dateInput):""},e.prototype.getValidDateOrNull=function(e){return this.dateAdapter.isDateInstance(e)&&this.dateAdapter.isValid(e)?e:null},e}();N.decorators=[{type:r.Directive,args:[{selector:"input[mcDatepicker]",exportAs:"mcDatepickerInput",providers:[Y,T,{provide:g.MC_INPUT_VALUE_ACCESSOR,useExisting:N}],host:{"[attr.aria-haspopup]":"true","[attr.aria-owns]":"(datepicker?.opened && datepicker.id) || null","[attr.min]":"min ? dateAdapter.toIso8601(min) : null","[attr.max]":"max ? dateAdapter.toIso8601(max) : null","[attr.disabled]":"disabled || null","(input)":"onInput($event.target.value)","(change)":"onChange()","(blur)":"onBlur()","(keydown)":"onKeydown($event)"}}]}],N.ctorParameters=function(){return[{type:r.ElementRef},{type:c.DateAdapter,decorators:[{type:r.Optional}]},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[c.MC_DATE_FORMATS]}]}]},N.propDecorators={mcDatepicker:[{type:r.Input}],mcDatepickerFilter:[{type:r.Input}],value:[{type:r.Input}],min:[{type:r.Input}],max:[{type:r.Input}],disabled:[{type:r.Input}],dateChange:[{type:r.Output}],dateInput:[{type:r.Output}]};var j=function(){};j.decorators=[{type:r.Directive,args:[{selector:"[mcDatepickerToggleIcon]"}]}];var L=function(){function e(e,t){this.intl=e,this.changeDetectorRef=t,this.stateChanges=d.Subscription.EMPTY}return Object.defineProperty(e.prototype,"disabled",{get:function(){return void 0===this._disabled?this.datepicker.disabled:!!this._disabled},set:function(e){this._disabled=u.coerceBooleanProperty(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(e){e.datepicker&&this.watchStateChanges()},e.prototype.ngOnDestroy=function(){this.stateChanges.unsubscribe()},e.prototype.ngAfterContentInit=function(){this.watchStateChanges()},e.prototype.open=function(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())},e.prototype.watchStateChanges=function(){var e=this,t=this.datepicker?this.datepicker.disabledChange:d.of(),a=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.disabledChange:d.of(),i=this.datepicker?d.merge(this.datepicker.openedStream,this.datepicker.closedStream):d.of();this.stateChanges.unsubscribe(),this.stateChanges=d.merge(this.intl.changes,t,a,i).subscribe((function(){return e.changeDetectorRef.markForCheck()}))},e}();L.decorators=[{type:r.Component,args:[{selector:"mc-datepicker-toggle",template:'<button\n    #button\n    mc-button\n    type="button"\n    class="mc-datepicker-toggle__button"\n    aria-haspopup="true"\n    [attr.aria-label]="intl.openCalendarLabel"\n    [attr.tabindex]="tabIndex"\n    [disabled]="disabled"\n    (click)="open($event)">\n\n    <i *ngIf="!customIcon" mc-icon="mc-calendar_16" class="mc-datepicker-toggle__default-icon"></i>\n\n    <ng-content select="[mcDatepickerToggleIcon]"></ng-content>\n</button>\n',host:{class:"mc-datepicker-toggle","[class.mc-active]":"datepicker && datepicker.opened"},exportAs:"mcDatepickerToggle",encapsulation:r.ViewEncapsulation.None,changeDetection:r.ChangeDetectionStrategy.OnPush,styles:[".mc-datepicker-toggle:focus{outline:0}.mc-datepicker-toggle__button.mc-icon-button{height:30px;margin-left:2px;width:30px}.mc-form-field-appearance-legacy .mc-form-field-prefix .mc-datepicker-toggle__default-icon,.mc-form-field-appearance-legacy .mc-form-field-suffix .mc-datepicker-toggle__default-icon{width:1em}.mc-form-field:not(.mc-form-field-appearance-legacy) .mc-form-field-prefix .mc-datepicker-toggle__default-icon,.mc-form-field:not(.mc-form-field-appearance-legacy) .mc-form-field-suffix .mc-datepicker-toggle__default-icon{display:block;height:1.5em;width:1.5em}.mc-form-field:not(.mc-form-field-appearance-legacy) .mc-form-field-prefix .mc-icon-button .mc-datepicker-toggle__default-icon,.mc-form-field:not(.mc-form-field-appearance-legacy) .mc-form-field-suffix .mc-icon-button .mc-datepicker-toggle__default-icon{margin:auto}"]}]}],L.ctorParameters=function(){return[{type:b},{type:r.ChangeDetectorRef}]},L.propDecorators={disabled:[{type:r.Input}],datepicker:[{type:r.Input,args:["for"]}],tabIndex:[{type:r.Input}],customIcon:[{type:r.ContentChild,args:[j,{static:!1}]}],button:[{type:r.ViewChild,args:["button",{static:!1}]}]};var B=function(){};B.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule,s.McButtonModule,a.OverlayModule,t.A11yModule,i.PortalModule,o.McIconModule],exports:[x,A,P,R,N,L,j,C,w,k,O,s.McButtonModule],declarations:[x,A,P,R,N,L,j,C,w,k,O],providers:[b,S],entryComponents:[R,O]}]}],e.MC_DATEPICKER_SCROLL_STRATEGY=I,e.MC_DATEPICKER_SCROLL_STRATEGY_FACTORY=E,e.MC_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER=S,e.MC_DATEPICKER_VALIDATORS=T,e.MC_DATEPICKER_VALUE_ACCESSOR=Y,e.McCalendar=x,e.McCalendarBody=A,e.McCalendarCell=D,e.McCalendarHeader=O,e.McDatepicker=P,e.McDatepickerContent=R,e.McDatepickerInput=N,e.McDatepickerInputEvent=F,e.McDatepickerIntl=b,e.McDatepickerModule=B,e.McDatepickerToggle=L,e.McDatepickerToggleIcon=j,e.McMonthView=C,e.McMultiYearView=k,e.McYearView=w,e.mcDatepickerAnimations=V,e.yearsPerPage=_,e.yearsPerRow=4,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-datepicker.umd.min.js.map