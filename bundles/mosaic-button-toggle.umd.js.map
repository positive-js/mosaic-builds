{"version":3,"file":"mosaic-button-toggle.umd.js","sources":["../../packages/mosaic/button-toggle/button-toggle.module.ts","../../packages/mosaic/button-toggle/button-toggle.component.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { McButtonModule } from '@ptsecurity/mosaic/button';\nimport { McCommonModule } from '@ptsecurity/mosaic/core';\n\nimport { McButtonToggle, McButtonToggleGroup } from './button-toggle.component';\n\n\n@NgModule({\n    imports: [McCommonModule, McButtonModule],\n    exports: [McCommonModule, McButtonToggleGroup, McButtonToggle],\n    declarations: [McButtonToggleGroup, McButtonToggle]\n})\nexport class McButtonToggleModule {}\n","import { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChildren,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    Input,\n    OnDestroy,\n    OnInit,\n    Optional,\n    Output,\n    QueryList,\n    ViewEncapsulation,\n    ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { FocusMonitor } from '@ptsecurity/cdk/a11y';\nimport { McButton } from '@ptsecurity/mosaic/button';\n\n\n/** Acceptable types for a button toggle. */\nexport type ToggleType = 'checkbox' | 'radio';\n\n/**\n * Provider Expression that allows mc-button-toggle-group to register as a ControlValueAccessor.\n * This allows it to support [(ngModel)].\n * @docs-private\n */\nexport const MC_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR: any = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => McButtonToggleGroup),\n    multi: true\n};\n\n/** Change event object emitted by MсButtonToggle. */\nexport class McButtonToggleChange {\n    constructor(\n        /** The MсButtonToggle that emits the event. */\n        public source: McButtonToggle,\n        /** The value assigned to the MсButtonToggle. */\n        public value: any) {\n    }\n}\n\n/** Exclusive selection button toggle group that behaves like a radio-button group. */\n@Directive({\n    selector: 'mc-button-toggle-group',\n    providers: [MC_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR],\n    host: {\n        role: 'group',\n        class: 'mc-button-toggle-group',\n        '[class.mc-button-toggle-vertical]': 'vertical'\n    },\n    exportAs: 'mcButtonToggleGroup'\n})\nexport class McButtonToggleGroup implements ControlValueAccessor, OnInit, AfterContentInit {\n\n    /** Whether the toggle group is vertical. */\n    @Input()\n    get vertical(): boolean {\n        return this._vertical;\n    }\n\n    set vertical(value: boolean) {\n        this._vertical = coerceBooleanProperty(value);\n    }\n\n    /** Value of the toggle group. */\n    @Input()\n    get value(): any {\n        const selected = this.selectionModel ? this.selectionModel.selected : [];\n\n        if (this.multiple) {\n            return selected.map((toggle) => toggle.value);\n        }\n\n        return selected[0] ? selected[0].value : undefined;\n    }\n\n    set value(newValue: any) {\n        this.setSelectionByValue(newValue);\n        this.valueChange.emit(this.value);\n    }\n\n    /** Selected button toggles in the group. */\n    get selected(): any {\n        const selected = this.selectionModel.selected;\n\n        return this.multiple ? selected : (selected[0] || null);\n    }\n\n    /** Whether multiple button toggles can be selected. */\n    @Input()\n    get multiple(): boolean {\n        return this._multiple;\n    }\n\n    set multiple(value: boolean) {\n        this._multiple = coerceBooleanProperty(value);\n    }\n\n    /** Child button toggle buttons. */\n    @ContentChildren(forwardRef(() => McButtonToggle)) buttonToggles: QueryList<McButtonToggle>;\n\n    /** Whether multiple button toggle group is disabled. */\n    @Input()\n    get disabled(): boolean {\n        return this._disabled;\n    }\n\n    set disabled(value: boolean) {\n        this._disabled = coerceBooleanProperty(value);\n\n        if (!this.buttonToggles) {\n            return;\n        }\n\n        this.buttonToggles.forEach((toggle) => toggle.markForCheck());\n    }\n\n    /**\n     * Event that emits whenever the value of the group changes.\n     * Used to facilitate two-way data binding.\n     * @docs-private\n     */\n    @Output() readonly valueChange = new EventEmitter<any>();\n\n    /** Event emitted when the group's value changes. */\n    @Output() readonly change: EventEmitter<McButtonToggleChange> =\n        new EventEmitter<McButtonToggleChange>();\n    private _vertical = false;\n    private _multiple = false;\n    private _disabled = false;\n    private selectionModel: SelectionModel<McButtonToggle>;\n\n    /**\n     * Reference to the raw value that the consumer tried to assign. The real\n     * value will exclude any values from this one that don't correspond to a\n     * toggle. Useful for the cases where the value is assigned before the toggles\n     * have been initialized or at the same that they're being swapped out.\n     */\n    private rawValue: any;\n\n    constructor(private _changeDetector: ChangeDetectorRef) {}\n\n    /**\n     * The method to be called in order to update ngModel.\n     * Now `ngModel` binding is not supported in multiple selection mode.\n     */\n    // tslint:disable-next-line:no-empty\n    controlValueAccessorChangeFn: (value: any) => void = () => {};\n\n    /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\n    // tslint:disable-next-line:no-empty\n    onTouched: () => any = () => {};\n\n    ngOnInit() {\n        this.selectionModel = new SelectionModel<McButtonToggle>(this.multiple, undefined, false);\n    }\n\n    ngAfterContentInit() {\n        this.selectionModel.select(...this.buttonToggles.filter((toggle) => toggle.checked));\n        this.disabled = this._disabled;\n    }\n\n    /**\n     * Sets the model value. Implemented as part of ControlValueAccessor.\n     * @param value Value to be set to the model.\n     */\n    writeValue(value: any) {\n        this.value = value;\n        this._changeDetector.markForCheck();\n    }\n\n    // Implemented as part of ControlValueAccessor.\n    registerOnChange(fn: (value: any) => void) {\n        this.controlValueAccessorChangeFn = fn;\n    }\n\n    // Implemented as part of ControlValueAccessor.\n    registerOnTouched(fn: any) {\n        this.onTouched = fn;\n    }\n\n    // Implemented as part of ControlValueAccessor.\n    setDisabledState(isDisabled: boolean): void {\n        this.disabled = isDisabled;\n    }\n\n    /** Dispatch change event with current selection and group value. */\n    emitChangeEvent(): void {\n        const selected = this.selected;\n        const source = Array.isArray(selected) ? selected[selected.length - 1] : selected;\n        const event = new McButtonToggleChange(source, this.value);\n        this.controlValueAccessorChangeFn(event.value);\n        this.change.emit(event);\n    }\n\n    /**\n     * Syncs a button toggle's selected state with the model value.\n     * @param toggle Toggle to be synced.\n     * @param select Whether the toggle should be selected.\n     * @param isUserInput Whether the change was a result of a user interaction.\n     */\n    syncButtonToggle(toggle: McButtonToggle, select: boolean, isUserInput = false) {\n        // Deselect the currently-selected toggle, if we're in single-selection\n        // mode and the button being toggled isn't selected at the moment.\n        if (!this.multiple && this.selected && !toggle.checked) {\n            (this.selected as McButtonToggle).checked = false;\n        }\n\n        if (select) {\n            this.selectionModel.select(toggle);\n        } else {\n            this.selectionModel.deselect(toggle);\n        }\n\n        // Only emit the change event for user input.\n        if (isUserInput) {\n            this.emitChangeEvent();\n        }\n\n        // Note: we emit this one no matter whether it was a user interaction, because\n        // it is used by Angular to sync up the two-way data binding.\n        this.valueChange.emit(this.value);\n    }\n\n    /** Checks whether a button toggle is selected. */\n    isSelected(toggle: McButtonToggle) {\n        return this.selectionModel.isSelected(toggle);\n    }\n\n    /** Determines whether a button toggle should be checked on init. */\n    isPrechecked(toggle: McButtonToggle) {\n        if (this.rawValue === undefined) {\n            return false;\n        }\n\n        if (this.multiple && Array.isArray(this.rawValue)) {\n            return this.rawValue.some((value) => toggle.value != null && value === toggle.value);\n        }\n\n        return toggle.value === this.rawValue;\n    }\n\n    /** Updates the selection state of the toggles in the group based on a value. */\n    private setSelectionByValue(value: any | any[]) {\n        this.rawValue = value;\n\n        if (!this.buttonToggles) {\n            return;\n        }\n\n        if (this.multiple && value) {\n            if (!Array.isArray(value)) {\n                throw Error('Value must be an array in multiple-selection mode.');\n            }\n\n            this.clearSelection();\n            value.forEach((currentValue: any) => this.selectValue(currentValue));\n        } else {\n            this.clearSelection();\n            this.selectValue(value);\n        }\n    }\n\n    /** Clears the selected toggles. */\n    private clearSelection() {\n        this.selectionModel.clear();\n        this.buttonToggles.forEach((toggle) => toggle.checked = false);\n    }\n\n    /** Selects a value if there's a toggle that corresponds to it. */\n    private selectValue(value: any) {\n        const correspondingOption = this.buttonToggles.find((toggle) => {\n            return toggle.value != null && toggle.value === value;\n        });\n\n        if (correspondingOption) {\n            correspondingOption.checked = true;\n            this.selectionModel.select(correspondingOption);\n        }\n    }\n}\n\n/** Single button inside of a toggle group. */\n@Component({\n    selector: 'mc-button-toggle',\n    template: `\n        <button\n            mc-button\n            type=\"button\"\n            [disabled]=\"disabled\"\n            [attr.tabindex]=\"disabled ? -1 : tabIndex\"\n            (click)=\"onToggleClick()\">\n            <ng-content></ng-content>\n        </button>\n    `,\n    styleUrls: ['button-toggle.css'],\n    encapsulation: ViewEncapsulation.None,\n    exportAs: 'mcButtonToggle',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    host: {\n        '[class.mc-button-toggle-standalone]': '!buttonToggleGroup',\n        '[class.mc-button-toggle-checked]': 'checked',\n        class: 'mc-button-toggle',\n        // Always reset the tabindex to -1 so it doesn't conflict with the one on the `button`,\n        // but can still receive focus from things like cdkFocusInitial.\n        '[attr.tabindex]': '-1',\n        '[attr.disabled]': 'disabled || null',\n        '(focus)': 'focus()'\n    }\n})\nexport class McButtonToggle implements OnInit, OnDestroy {\n\n    /** Whether the button is checked. */\n    @Input()\n    get checked(): boolean {\n        return this.buttonToggleGroup ? this.buttonToggleGroup.isSelected(this) : this._checked;\n    }\n\n    set checked(value: boolean) {\n        const newValue = coerceBooleanProperty(value);\n\n        if (newValue !== this._checked) {\n            this._checked = newValue;\n\n            if (this.buttonToggleGroup) {\n                this.buttonToggleGroup.syncButtonToggle(this, this._checked);\n            }\n\n            this.changeDetectorRef.markForCheck();\n        }\n    }\n\n    // tslint:disable-next-line:no-reserved-keywords\n    type: ToggleType;\n\n    @ViewChild(McButton, {static: false}) mcButton: McButton;\n\n    /** McButtonToggleGroup reads this to assign its own value. */\n    @Input() value: any;\n\n    /** Tabindex for the toggle. */\n    @Input() tabIndex: number | null;\n\n    @Input()\n    get disabled(): boolean {\n        return this._disabled || (this.buttonToggleGroup && this.buttonToggleGroup.disabled);\n    }\n    set disabled(value: boolean) { this._disabled = coerceBooleanProperty(value); }\n\n    /** Event emitted when the group value changes. */\n    @Output() readonly change: EventEmitter<McButtonToggleChange> =\n        new EventEmitter<McButtonToggleChange>();\n\n    private isSingleSelector = false;\n    private _checked = false;\n    private _disabled: boolean = false;\n\n    constructor(\n        @Optional() public buttonToggleGroup: McButtonToggleGroup,\n        private changeDetectorRef: ChangeDetectorRef,\n        private focusMonitor: FocusMonitor,\n        private element: ElementRef\n    ) {}\n\n    ngOnInit() {\n        this.isSingleSelector = this.buttonToggleGroup && !this.buttonToggleGroup.multiple;\n        this.type = this.isSingleSelector ? 'radio' : 'checkbox';\n\n        if (this.buttonToggleGroup && this.buttonToggleGroup.isPrechecked(this)) {\n            this.checked = true;\n        }\n\n        this.focusMonitor.monitor(this.element.nativeElement, true);\n    }\n\n    ngOnDestroy() {\n        const group = this.buttonToggleGroup;\n\n        this.focusMonitor.stopMonitoring(this.element.nativeElement);\n\n        // Remove the toggle from the selection once it's destroyed. Needs to happen\n        // on the next tick in order to avoid \"changed after checked\" errors.\n        if (group && group.isSelected(this)) {\n            Promise.resolve().then(() => group.syncButtonToggle(this, false));\n        }\n    }\n\n    /** Focuses the button. */\n    focus(): void {\n        this.element.nativeElement.focus();\n    }\n\n    /** Checks the button toggle due to an interaction with the underlying native button. */\n    onToggleClick() {\n        if (this.disabled) {\n            return;\n        }\n\n        const newChecked = this.isSingleSelector ? true : !this._checked;\n\n        if (newChecked !== this._checked) {\n            this._checked = newChecked;\n            if (this.buttonToggleGroup) {\n                this.buttonToggleGroup.syncButtonToggle(this, this._checked, true);\n                this.buttonToggleGroup.onTouched();\n            }\n        }\n        // Emit a change event when it's the single selector\n        this.change.emit(new McButtonToggleChange(this, this.value));\n    }\n\n    /**\n     * Marks the button toggle as needing checking for change detection.\n     * This method is exposed because the parent button toggle group will directly\n     * update bound properties of the radio button.\n     */\n    markForCheck() {\n        // When the group value changes, the button will not be notified.\n        // Use `markForCheck` to explicit update button toggle's status.\n        this.changeDetectorRef.markForCheck();\n    }\n}\n"],"names":["McCommonModule","McButtonModule","NgModule","Output","Input","ViewChild","McButton","ElementRef","FocusMonitor","ChangeDetectorRef","Optional","ChangeDetectionStrategy","ViewEncapsulation","Component","coerceBooleanProperty","EventEmitter","ContentChildren","forwardRef","Directive","SelectionModel","NG_VALUE_ACCESSOR"],"mappings":"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"}