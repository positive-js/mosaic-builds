{"version":3,"sources":["../../../packages/mosaic/dropdown/dropdown.types.ts","../../../packages/mosaic/dropdown/dropdown-content.directive.ts","../../../node_modules/tslib/tslib.es6.js","../../../packages/mosaic/dropdown/dropdown-item.component.ts","../../../packages/mosaic/dropdown/dropdown-errors.ts","../../../packages/mosaic/dropdown/dropdown-animations.ts","../../../packages/mosaic/dropdown/dropdown.component.ts","../../../packages/mosaic/dropdown/dropdown-trigger.directive.ts","../../../packages/mosaic/dropdown/dropdown.module.ts"],"names":["MC_DROPDOWN_PANEL","InjectionToken","MC_DROPDOWN_DEFAULT_OPTIONS","providedIn","factory","MC_DROPDOWN_DEFAULT_OPTIONS_FACTORY","overlapTriggerX","overlapTriggerY","xPosition","yPosition","backdropClass","hasBackdrop","McDropdownContent","template","componentFactoryResolver","appRef","injector","viewContainerRef","document","this","attached","Subject","prototype","attach","context","portal","TemplatePortal","detach","outlet","DomPortalOutlet","createElement","element","elementRef","nativeElement","parentNode","insertBefore","outletElement","next","isAttached","ngOnDestroy","_a","dispose","Directive","args","selector","TemplateRef","ComponentFactoryResolver","ApplicationRef","Injector","ViewContainerRef","Inject","DOCUMENT","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","call","create","__read","o","n","m","Symbol","iterator","r","e","i","ar","done","push","value","error","__spread","arguments","length","concat","McDropdownItem","focusMonitor","parentDropdownPanel","_this","_super","hovered","focused","highlighted","isNested","TypeError","String","__","constructor","__extends","ngAfterViewInit","monitor","stopMonitoring","complete","resetStyles","getHostElement","classList","remove","focus","origin","options","focusVia","getTabIndex","disabled","checkDisabled","event","preventDefault","stopPropagation","handleMouseEnter","getLabel","clone","cloneNode","icons","querySelectorAll","icon","removeChild","_b","textContent","trim","mixinDisabled","throwMcDropdownMissingError","Error","throwMcDropdownInvalidPositionX","throwMcDropdownInvalidPositionY","Component","exportAs","inputs","host","class","[class.mc-dropdown-item_with-icon]","[class.mc-dropdown-item_highlighted]","[attr.disabled]","[attr.tabindex]","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","ElementRef","FocusMonitor","type","Optional","ContentChild","McIcon","HostListener","mcDropdownAnimations","transformDropdown","trigger","state","style","opacity","transform","transition","group","query","animate","fadeInItems","McDropdown","ngZone","defaultOptions","navigationWithWrap","_xPosition","_yPosition","_overlapTriggerX","_overlapTriggerY","_hasBackdrop","triggerWidth","panelAnimationState","animationDone","closed","EventEmitter","directDescendantItems","QueryList","tabSubscription","Subscription","EMPTY","defineProperty","setPositionClasses","coerceBooleanProperty","classes","previousPanelClass","split","forEach","className","ngOnInit","ngAfterContentInit","updateDirectDescendants","keyManager","FocusKeyManager","withTypeAhead","withWrap","tabOut","subscribe","emit","changes","pipe","startWith","switchMap","items","merge","apply","map","item","focusedItem","updateActiveItem","destroy","unsubscribe","handleKeydown","keyCode","ESCAPE","LEFT_ARROW","parent","direction","RIGHT_ARROW","UP_ARROW","DOWN_ARROW","setFocusOrigin","onKeydown","focusFirstItem","lazyContent","onStable","take","setFirstItemActive","resetActiveItem","activeItem","setActiveItem","posX","posY","startAnimation","resetAnimation","onAnimationDone","isAnimating","onAnimationStart","toState","activeItemIndex","scrollTop","reset","filter","notifyOnChanges","animations","providers","provide","useExisting","NgZone","Input","ViewChild","static","ContentChildren","descendants","Output","MC_DROPDOWN_SCROLL_STRATEGY","MC_DROPDOWN_SCROLL_STRATEGY_FACTORY","overlay","scrollStrategies","reposition","MC_DROPDOWN_SCROLL_STRATEGY_FACTORY_PROVIDER","deps","Overlay","useFactory","passiveEventListenerOptions","normalizePassiveListenerOptions","passive","McDropdownTrigger","scrollStrategy","dropdownItemInstance","_dir","openByArrowDown","restoreFocus","dropdownOpened","dropdownClosed","_opened","overlayRef","closeSubscription","hoverSubscription","handleTouchStart","openedBy","addEventListener","_dropdown","dropdown","asObservable","reason","includes","check","handleHover","removeEventListener","cleanUpSubscriptions","toggle","close","open","createOverlay","overlayConfig","getConfig","setPosition","positionStrategy","getPortal","data","closingActions","init","handleMousedown","button","undefined","ENTER","SPACE","dir","handleClick","opened","dropdownAnimationDoneSubscription","takeUntil","getWidth","setIsOpened","isOpen","config","getOverlayConfig","subscribeToPositions","keydownEvents","OverlayConfig","position","flexibleConnectedTo","withLockedPosition","withTransformOriginOn","positionChanges","change","connectionPair","overlayX","overlayY","originX","originFallbackX","overlayFallbackX","_c","overlayFallbackY","originY","originFallbackY","offsetY","offsetX","withPositions","backdrop","backdropClick","outsidePointerEvents","detachments","parentClose","observableOf","hover","active","delay","asapScheduler","templateRef","window","getComputedStyle","width","borderRightWidth","borderLeftWidth","parseInt","[class.mc-pressed]","(mousedown)","(keydown)","(click)","decorators","Self","Directionality","NgModule","imports","CommonModule","OverlayModule","McIconModule","exports","declarations"],"mappings":"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","sourcesContent":["import { FocusOrigin } from '@angular/cdk/a11y';\nimport { Direction } from '@angular/cdk/bidi';\nimport {\n    EventEmitter,\n    InjectionToken,\n    TemplateRef\n} from '@angular/core';\n\nimport { McDropdownContent } from './dropdown-content.directive';\n\n\nexport type DropdownPositionX = 'before' | 'after';\n\nexport type DropdownPositionY = 'above' | 'below';\n\n/** Reason why the menu was closed. */\nexport type DropdownCloseReason = void | 'click' | 'keydown' | 'tab';\n\n/**\n * Interface for a custom dropdown panel that can be used with `mcDropdownTriggerFor`.\n * @docs-private\n */\n// tslint:disable-next-line:naming-convention\nexport interface McDropdownPanel {\n    xPosition: DropdownPositionX;\n    yPosition: DropdownPositionY;\n    overlapTriggerX: boolean;\n    overlapTriggerY: boolean;\n    templateRef: TemplateRef<any>;\n    closed: EventEmitter<DropdownCloseReason>;\n    parent?: McDropdownPanel | undefined;\n    triggerWidth?: string;\n    direction?: Direction;\n    lazyContent?: McDropdownContent;\n    backdropClass?: string;\n    hasBackdrop?: boolean;\n    focusFirstItem(origin?: FocusOrigin): void;\n    resetActiveItem(): void;\n    setPositionClasses?(x: DropdownPositionX, y: DropdownPositionY): void;\n}\n\n\n/** Default `mc-dropdown` options that can be overridden. */\n// tslint:disable-next-line:naming-convention\nexport interface McDropdownDefaultOptions {\n    /** The x-axis position of the dropdown. */\n    xPosition: DropdownPositionX;\n\n    /** The y-axis position of the dropdown. */\n    yPosition: DropdownPositionY;\n\n    /** Whether the dropdown should overlap the dropdown trigger horizontally. */\n    overlapTriggerX: boolean;\n\n    /** Whether the dropdown should overlap the dropdown trigger vertically. */\n    overlapTriggerY: boolean;\n\n    /** Class to be applied to the dropdown's backdrop. */\n    backdropClass: string;\n\n    /** Whether the dropdown has a backdrop. */\n    hasBackdrop: boolean;\n}\n\n/**\n * Injection token used to provide the parent dropdown to dropdown-specific components.\n * @docs-private\n */\nexport const MC_DROPDOWN_PANEL = new InjectionToken<McDropdownPanel>('MC_DROPDOWN_PANEL');\n\n\n/** Injection token to be used to override the default options for `mc-dropdown`. */\nexport const MC_DROPDOWN_DEFAULT_OPTIONS =\n    new InjectionToken<McDropdownDefaultOptions>('mc-dropdown-default-options', {\n        providedIn: 'root',\n        factory: MC_DROPDOWN_DEFAULT_OPTIONS_FACTORY\n    });\n\n/** @docs-private */\n// tslint:disable-next-line:naming-convention\nexport function MC_DROPDOWN_DEFAULT_OPTIONS_FACTORY(): McDropdownDefaultOptions {\n    return {\n        overlapTriggerX: true,\n        overlapTriggerY: false,\n        xPosition: 'after',\n        yPosition: 'below',\n        backdropClass: 'cdk-overlay-transparent-backdrop',\n        hasBackdrop: false\n    };\n}\n","import { TemplatePortal, DomPortalOutlet } from '@angular/cdk/portal';\nimport { DOCUMENT } from '@angular/common';\nimport {\n    Directive,\n    TemplateRef,\n    ComponentFactoryResolver,\n    ApplicationRef,\n    Injector,\n    ViewContainerRef,\n    Inject,\n    OnDestroy\n} from '@angular/core';\nimport { Subject } from 'rxjs';\n\n\n/**\n * Dropdown content that will be rendered lazily once the dropdown is opened.\n */\n@Directive({\n    selector: 'ng-template[mcDropdownContent]'\n})\nexport class McDropdownContent implements OnDestroy {\n    /** Emits when the dropdown content has been attached. */\n    attached = new Subject<void>();\n    private portal: TemplatePortal;\n    private outlet: DomPortalOutlet;\n\n    constructor(\n        private template: TemplateRef<any>,\n        private componentFactoryResolver: ComponentFactoryResolver,\n        private appRef: ApplicationRef,\n        private injector: Injector,\n        private viewContainerRef: ViewContainerRef,\n        @Inject(DOCUMENT) private document: any\n    ) {}\n\n    /**\n     * Attaches the content with a particular context.\n     * @docs-private\n     */\n    attach(context: any = {}) {\n        if (!this.portal) {\n            this.portal = new TemplatePortal(this.template, this.viewContainerRef);\n        }\n\n        this.detach();\n\n        if (!this.outlet) {\n            this.outlet = new DomPortalOutlet(\n                this.document.createElement('div'),\n                this.componentFactoryResolver,\n                this.appRef,\n                this.injector\n            );\n        }\n\n        const element: HTMLElement = this.template.elementRef.nativeElement;\n\n        // Because we support opening the same dropdown from different triggers (which in turn have their\n        // own `OverlayRef` panel), we have to re-insert the host element every time, otherwise we\n        // risk it staying attached to a pane that's no longer in the DOM.\n        element.parentNode!.insertBefore(this.outlet.outletElement, element);\n        this.portal.attach(this.outlet, context);\n        this.attached.next();\n    }\n\n    /**\n     * Detaches the content.\n     * @docs-private\n     */\n    detach() {\n        if (this.portal.isAttached) {\n            this.portal.detach();\n        }\n    }\n\n    ngOnDestroy() {\n        this.outlet?.dispose();\n    }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { FocusMonitor, FocusOrigin } from '@angular/cdk/a11y';\nimport {\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    OnDestroy,\n    ViewEncapsulation,\n    Inject,\n    Optional,\n    AfterViewInit,\n    HostListener,\n    ContentChild\n} from '@angular/core';\nimport { IFocusableOption } from '@ptsecurity/cdk/a11y';\nimport { CanDisable, mixinDisabled } from '@ptsecurity/mosaic/core';\nimport { McIcon } from '@ptsecurity/mosaic/icon';\nimport { Subject } from 'rxjs';\n\nimport { MC_DROPDOWN_PANEL, McDropdownPanel } from './dropdown.types';\n\n\n// Boilerplate for applying mixins to McDropdownItem.\n/** @docs-private */\n// tslint:disable-next-line:naming-convention\nconst McDropdownItemMixinBase = mixinDisabled(class {});\n\n/**\n * This directive is intended to be used inside an mc-dropdown tag.\n * It exists mostly to set the role attribute.\n */\n@Component({\n    selector: 'mc-dropdown-item, [mc-dropdown-item]',\n    exportAs: 'mcDropdownItem',\n    templateUrl: 'dropdown-item.html',\n    styleUrls: ['dropdown-item.scss'],\n    inputs: ['disabled'],\n    host: {\n        class: 'mc-dropdown-item',\n        '[class.mc-dropdown-item_with-icon]': 'icon',\n        '[class.mc-dropdown-item_highlighted]': 'highlighted',\n\n        '[attr.disabled]': 'disabled || null',\n        '[attr.tabindex]': 'getTabIndex()'\n    },\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None\n})\nexport class McDropdownItem extends McDropdownItemMixinBase implements\n    IFocusableOption, CanDisable, AfterViewInit, OnDestroy {\n\n    @ContentChild(McIcon) icon: McIcon;\n\n    /** Stream that emits when the dropdown item is hovered. */\n    readonly hovered = new Subject<McDropdownItem>();\n\n    /** Stream that emits when the menu item is focused. */\n    readonly focused = new Subject<McDropdownItem>();\n\n    /** Whether the dropdown item is highlighted. */\n    highlighted: boolean = false;\n\n    /** Whether the dropdown item acts as a trigger for a nested dropdown. */\n    isNested: boolean = false;\n\n    constructor(\n        private elementRef: ElementRef<HTMLElement>,\n        private focusMonitor: FocusMonitor,\n        @Inject(MC_DROPDOWN_PANEL) @Optional() public parentDropdownPanel?: McDropdownPanel\n    ) {\n        super();\n    }\n\n    ngAfterViewInit() {\n        if (this.focusMonitor) {\n            // Start monitoring the element so it gets the appropriate focused classes. We want\n            // to show the focus style for menu items only when the focus was not caused by a\n            // mouse or touch interaction.\n            this.focusMonitor.monitor(this.elementRef, false);\n        }\n    }\n\n    ngOnDestroy() {\n        if (this.focusMonitor) {\n            this.focusMonitor.stopMonitoring(this.elementRef);\n        }\n\n        this.hovered.complete();\n        this.focused.complete();\n    }\n\n    resetStyles() {\n        this.getHostElement().classList.remove('cdk-keyboard-focused');\n    }\n\n    /** Focuses the dropdown item. */\n    focus(origin?: FocusOrigin, options?: FocusOptions): void {\n        if (this.focusMonitor && origin) {\n            this.focusMonitor.focusVia(this.getHostElement(), origin, options);\n        } else {\n            this.getHostElement().focus(options);\n        }\n\n        this.focused.next(this);\n    }\n\n    /** Returns the host DOM element. */\n    getHostElement(): HTMLElement {\n        return this.elementRef.nativeElement;\n    }\n\n    /** Used to set the `tabindex`. */\n    getTabIndex(): string {\n        return this.disabled ? '-1' : '0';\n    }\n\n    /** Prevents the default element actions if it is disabled. */\n    // We have to use a `HostListener` here in order to support both Ivy and ViewEngine.\n    // In Ivy the `host` bindings will be merged when this class is extended, whereas in\n    // ViewEngine they're overwritten.\n    // TODO(crisbeto): we move this back into `host` once Ivy is turned on by default.\n    // tslint:disable-next-line:no-host-decorator-in-concrete\n    @HostListener('click', ['$event']) checkDisabled(event: Event): void {\n        if (this.disabled) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n    }\n\n    /** Emits to the hover stream. */\n    // We have to use a `HostListener` here in order to support both Ivy and ViewEngine.\n    // In Ivy the `host` bindings will be merged when this class is extended, whereas in\n    // ViewEngine they're overwritten.\n    // TODO(crisbeto): we move this back into `host` once Ivy is turned on by default.\n    // tslint:disable-next-line:no-host-decorator-in-concrete\n    @HostListener('mouseenter') handleMouseEnter() {\n        this.hovered.next(this);\n    }\n\n    /** Gets the label to be used when determining whether the option should be focused. */\n    getLabel(): string {\n        const clone = this.getHostElement().cloneNode(true) as HTMLElement;\n        const icons = clone.querySelectorAll('[mc-icon], .mc-icon');\n\n        // Strip away icons so they don't show up in the text.\n        // tslint:disable-next-line:prefer-for-of\n        for (let i = 0; i < icons.length; i++) {\n            const icon = icons[i];\n            icon.parentNode?.removeChild(icon);\n        }\n\n        return clone.textContent?.trim() || '';\n    }\n}\n","/**\n * Throws an exception for the case when dropdown trigger doesn't have a valid mc-dropdown instance\n * @docs-private\n */\nexport function throwMcDropdownMissingError() {\n    throw Error(`mcDropdownTriggerFor: must pass in an mc-dropdown instance.\n    Example:\n      <mc-dropdown #dropdown=\"mcDropdown\"></mc-dropdown>\n      <button [mcDropdownTriggerFor]=\"dropdown\"></button>`);\n}\n\n/**\n * Throws an exception for the case when dropdown's x-position value isn't valid.\n * In other words, it doesn't match 'before' or 'after'.\n * @docs-private\n */\nexport function throwMcDropdownInvalidPositionX() {\n    throw Error(`xPosition value must be either 'before' or after'.\n      Example: <mc-dropdown [xPosition]=\"'before'\" #dropdown=\"mcDropdown\"></mc-dropdown>`);\n}\n\n/**\n * Throws an exception for the case when dropdown's y-position value isn't valid.\n * In other words, it doesn't match 'above' or 'below'.\n * @docs-private\n */\nexport function throwMcDropdownInvalidPositionY() {\n    throw Error(`yPosition value must be either 'above' or below'.\n      Example: <mc-dropdown [yPosition]=\"'above'\" #dropdown=\"mcDropdown\"></mc-dropdown>`);\n}\n","import {\n    trigger,\n    state,\n    style,\n    animate,\n    transition,\n    query,\n    group,\n    AnimationTriggerMetadata\n} from '@angular/animations';\n\n\n/**\n * Animations used by the mc-dropdown component.\n * @docs-private\n */\nexport const mcDropdownAnimations: {\n    readonly transformDropdown: AnimationTriggerMetadata;\n    readonly fadeInItems: AnimationTriggerMetadata;\n} = {\n    /**\n     * This animation controls the dropdown panel's entry and exit from the page.\n     *\n     * When the dropdown panel is added to the DOM, it scales in and fades in its border.\n     *\n     * When the dropdown panel is removed from the DOM, it simply fades out after a brief\n     * delay to display the ripple.\n     */\n    transformDropdown: trigger('transformDropdown', [\n        state('void', style({\n            opacity: 0,\n            transform: 'scale(0.8)'\n        })),\n        transition('void => enter', group([\n            query('.mc-dropdown__content', animate('50ms linear', style({opacity: 1}))),\n            animate('50ms cubic-bezier(0, 0, 0.2, 1)', style({transform: 'scale(1)'}))\n        ])),\n        transition('* => void', animate('50ms 25ms linear', style({opacity: 0})))\n    ]),\n\n\n    /**\n     * This animation fades in the background color and content of the dropdown panel\n     * after its containing element is scaled in.\n     */\n    fadeInItems: trigger('fadeInItems', [\n        // now. Remove next time we do breaking changes.\n        state('showing', style({opacity: 1})),\n        transition('void => *', [\n            style({opacity: 0}),\n            animate('200ms 60ms cubic-bezier(0.55, 0, 0.55, 0.2)')\n        ])\n    ])\n};\n\nexport const fadeInItems = mcDropdownAnimations.fadeInItems;\n\nexport const transformDropdown = mcDropdownAnimations.transformDropdown;\n","import { AnimationEvent } from '@angular/animations';\nimport { FocusOrigin } from '@angular/cdk/a11y';\nimport { Direction } from '@angular/cdk/bidi';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { DOWN_ARROW, UP_ARROW } from '@angular/cdk/keycodes';\nimport {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChild,\n    ContentChildren,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    Input,\n    NgZone,\n    OnDestroy,\n    Output,\n    TemplateRef,\n    QueryList,\n    ViewChild,\n    ViewEncapsulation,\n    OnInit\n} from '@angular/core';\nimport { FocusKeyManager } from '@ptsecurity/cdk/a11y';\nimport { ESCAPE, LEFT_ARROW, RIGHT_ARROW } from '@ptsecurity/cdk/keycodes';\nimport { merge, Observable, Subject, Subscription } from 'rxjs';\nimport { startWith, switchMap, take } from 'rxjs/operators';\n\nimport { mcDropdownAnimations } from './dropdown-animations';\nimport { McDropdownContent } from './dropdown-content.directive';\nimport { throwMcDropdownInvalidPositionX, throwMcDropdownInvalidPositionY } from './dropdown-errors';\nimport { McDropdownItem } from './dropdown-item.component';\nimport {\n    DropdownPositionX,\n    DropdownPositionY,\n    MC_DROPDOWN_DEFAULT_OPTIONS,\n    MC_DROPDOWN_PANEL,\n    McDropdownDefaultOptions,\n    McDropdownPanel\n} from './dropdown.types';\n\n\n@Component({\n    selector: 'mc-dropdown',\n    exportAs: 'mcDropdown',\n    templateUrl: 'dropdown.html',\n    styleUrls: ['dropdown.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    encapsulation: ViewEncapsulation.None,\n    animations: [\n        mcDropdownAnimations.transformDropdown,\n        mcDropdownAnimations.fadeInItems\n    ],\n    providers: [\n        { provide: MC_DROPDOWN_PANEL, useExisting: McDropdown }\n    ]\n})\nexport class McDropdown implements AfterContentInit, McDropdownPanel, OnInit, OnDestroy {\n\n    @Input() navigationWithWrap: boolean = false;\n\n    /** Position of the dropdown in the X axis. */\n    @Input()\n    get xPosition(): DropdownPositionX {\n        return this._xPosition;\n    }\n\n    set xPosition(value: DropdownPositionX) {\n        if (value !== 'before' && value !== 'after') {\n            throwMcDropdownInvalidPositionX();\n        }\n        this._xPosition = value;\n        this.setPositionClasses();\n    }\n\n    /** Position of the dropdown in the Y axis. */\n    @Input()\n    get yPosition(): DropdownPositionY {\n        return this._yPosition;\n    }\n\n    set yPosition(value: DropdownPositionY) {\n        if (value !== 'above' && value !== 'below') {\n            throwMcDropdownInvalidPositionY();\n        }\n        this._yPosition = value;\n        this.setPositionClasses();\n    }\n\n    /** Whether the dropdown should overlap its trigger vertically. */\n    @Input()\n    get overlapTriggerY(): boolean {\n        return this._overlapTriggerY;\n    }\n\n    set overlapTriggerY(value: boolean) {\n        this._overlapTriggerY = coerceBooleanProperty(value);\n    }\n\n    /** Whether the dropdown should overlap its trigger horizontally. */\n    @Input()\n    get overlapTriggerX(): boolean {\n        return this._overlapTriggerX;\n    }\n\n    set overlapTriggerX(value: boolean) {\n        this._overlapTriggerX = coerceBooleanProperty(value);\n    }\n\n    /** Whether the dropdown has a backdrop. */\n    @Input()\n    get hasBackdrop(): boolean {\n        return this._hasBackdrop;\n    }\n\n    set hasBackdrop(value: boolean) {\n        this._hasBackdrop = coerceBooleanProperty(value);\n    }\n\n    /**\n     * This method takes classes set on the host mc-dropdown element and applies them on the\n     * dropdown template that displays in the overlay container.  Otherwise, it's difficult\n     * to style the containing dropdown from outside the component.\n     * @param classes list of class names\n     */\n    @Input('class')\n    set panelClass(classes: string) {\n        const previousPanelClass = this.previousPanelClass;\n\n        if (previousPanelClass && previousPanelClass.length) {\n            previousPanelClass\n                .split(' ')\n                .forEach((className: string) => this.classList[className] = false);\n        }\n\n        this.previousPanelClass = classes;\n\n        if (classes?.length) {\n            classes\n                .split(' ')\n                .forEach((className: string) => this.classList[className] = true);\n\n            this.elementRef.nativeElement.className = '';\n        }\n    }\n\n    private _xPosition: DropdownPositionX = this.defaultOptions.xPosition;\n    private _yPosition: DropdownPositionY = this.defaultOptions.yPosition;\n    private _overlapTriggerX: boolean = this.defaultOptions.overlapTriggerX;\n    private _overlapTriggerY: boolean = this.defaultOptions.overlapTriggerY;\n    private _hasBackdrop: boolean = this.defaultOptions.hasBackdrop;\n\n    triggerWidth: string = '';\n    /** Config object to be passed into the dropdown's ngClass */\n    classList: { [key: string]: boolean } = {};\n\n    /** Current state of the panel animation. */\n    panelAnimationState: 'void' | 'enter' = 'void';\n\n    /** Emits whenever an animation on the dropdown completes. */\n    animationDone = new Subject<AnimationEvent>();\n\n    /** Whether the dropdown is animating. */\n    isAnimating: boolean;\n\n    /** Parent dropdown of the current dropdown panel. */\n    parent: McDropdownPanel | undefined;\n\n    /** Layout direction of the dropdown. */\n    direction: Direction;\n\n    /** Class to be added to the backdrop element. */\n    @Input() backdropClass: string = this.defaultOptions.backdropClass;\n\n    /** @docs-private */\n    @ViewChild(TemplateRef, { static: false }) templateRef: TemplateRef<any>;\n\n    /**\n     * List of the items inside of a dropdown.\n     */\n    @ContentChildren(McDropdownItem, { descendants: true }) items: QueryList<McDropdownItem>;\n\n    /**\n     * Dropdown content that will be rendered lazily.\n     * @docs-private\n     */\n    @ContentChild(McDropdownContent, { static: false }) lazyContent: McDropdownContent;\n\n    /** Event emitted when the dropdown is closed. */\n    @Output() readonly closed = new EventEmitter<void | 'click' | 'keydown' | 'tab'>();\n\n    private previousPanelClass: string;\n\n    private keyManager: FocusKeyManager<McDropdownItem>;\n\n    /** Only the direct descendant menu items. */\n    private directDescendantItems = new QueryList<McDropdownItem>();\n\n    /** Subscription to tab events on the dropdown panel */\n    private tabSubscription = Subscription.EMPTY;\n\n    constructor(\n        private elementRef: ElementRef<HTMLElement>,\n        private ngZone: NgZone,\n        @Inject(MC_DROPDOWN_DEFAULT_OPTIONS) private defaultOptions: McDropdownDefaultOptions) { }\n\n    ngOnInit() {\n        this.setPositionClasses();\n    }\n\n    ngAfterContentInit() {\n        this.updateDirectDescendants();\n\n        this.keyManager = new FocusKeyManager<McDropdownItem>(this.directDescendantItems)\n            .withTypeAhead();\n\n        if (this.navigationWithWrap) {\n            this.keyManager.withWrap();\n        }\n\n        this.tabSubscription = this.keyManager.tabOut\n            .subscribe(() => this.closed.emit('tab'));\n\n        // If a user manually (programmatically) focuses a menu item, we need to reflect that focus\n        // change back to the key manager. Note that we don't need to unsubscribe here because focused\n        // is internal and we know that it gets completed on destroy.\n        this.directDescendantItems.changes\n            .pipe(\n                startWith(this.directDescendantItems),\n                switchMap((items) => merge(...items.map((item: McDropdownItem) => item.focused)))\n            )\n            .subscribe((focusedItem) => this.keyManager.updateActiveItem(focusedItem as McDropdownItem));\n    }\n\n    ngOnDestroy() {\n        this.directDescendantItems.destroy();\n        this.tabSubscription.unsubscribe();\n        this.closed.complete();\n    }\n\n    /** Stream that emits whenever the hovered dropdown item changes. */\n    hovered(): Observable<McDropdownItem> {\n        const itemChanges = this.directDescendantItems.changes as Observable<QueryList<McDropdownItem>>;\n\n        return itemChanges.pipe(\n            startWith(this.directDescendantItems),\n            switchMap((items) => merge(...items.map((item: McDropdownItem) => item.hovered)))\n        ) as Observable<McDropdownItem>;\n    }\n\n    /** Handle a keyboard event from the dropdown, delegating to the appropriate action. */\n    handleKeydown(event: KeyboardEvent) {\n        // tslint:disable-next-line:deprecation\n        const keyCode = event.keyCode;\n\n\n        switch (keyCode) {\n            case ESCAPE:\n                this.closed.emit('keydown');\n                break;\n            case LEFT_ARROW:\n                if (this.parent && this.direction === 'ltr') {\n                    this.closed.emit('keydown');\n                }\n                break;\n            case RIGHT_ARROW:\n                if (this.parent && this.direction === 'rtl') {\n                    this.closed.emit('keydown');\n                }\n                break;\n            default:\n                if (keyCode === UP_ARROW || keyCode === DOWN_ARROW) {\n                    this.keyManager.setFocusOrigin('keyboard');\n                }\n\n                this.keyManager.onKeydown(event);\n\n                return;\n        }\n\n        // Don't allow the event to propagate if we've already handled it, or it may\n        // end up reaching other overlays that were opened earlier.\n        event.stopPropagation();\n    }\n\n    /**\n     * Focus the first item in the dropdown.\n     * @param origin Action from which the focus originated. Used to set the correct styling.\n     */\n    focusFirstItem(origin: FocusOrigin = 'program'): void {\n        // When the content is rendered lazily, it takes a bit before the items are inside the DOM.\n        if (this.lazyContent) {\n            this.ngZone.onStable\n                .pipe(take(1))\n                .subscribe(() => this.keyManager.setFocusOrigin(origin).setFirstItemActive());\n        } else {\n            this.keyManager.setFocusOrigin(origin).setFirstItemActive();\n        }\n    }\n\n    /**\n     * Resets the active item in the dropdown. This is used when the dropdown is opened, allowing\n     * the user to start from the first option when pressing the down arrow.\n     */\n    resetActiveItem() {\n        this.keyManager.activeItem?.resetStyles();\n        this.keyManager.setActiveItem(-1);\n    }\n\n    /**\n     * Adds classes to the dropdown panel based on its position. Can be used by\n     * consumers to add specific styling based on the position.\n     * @param posX Position of the dropdown along the x axis.\n     * @param posY Position of the dropdown along the y axis.\n     * @docs-private\n     */\n    setPositionClasses(posX: DropdownPositionX = this.xPosition, posY: DropdownPositionY = this.yPosition) {\n        const classes = this.classList;\n        classes['mc-dropdown-before'] = posX === 'before';\n        classes['mc-dropdown-after'] = posX === 'after';\n        classes['mc-dropdown-above'] = posY === 'above';\n        classes['mc-dropdown-below'] = posY === 'below';\n    }\n\n    /** Starts the enter animation. */\n    startAnimation() {\n        this.panelAnimationState = 'enter';\n    }\n\n    /** Resets the panel animation to its initial state. */\n    resetAnimation() {\n        this.panelAnimationState = 'void';\n    }\n\n    /** Callback that is invoked when the panel animation completes. */\n    onAnimationDone(event: AnimationEvent) {\n        this.animationDone.next(event);\n        this.isAnimating = false;\n    }\n\n    onAnimationStart(event: AnimationEvent) {\n        this.isAnimating = true;\n\n        // Scroll the content element to the top as soon as the animation starts. This is necessary,\n        // because we move focus to the first item while it's still being animated, which can throw\n        // the browser off when it determines the scroll position. Alternatively we can move focus\n        // when the animation is done, however moving focus asynchronously will interrupt screen\n        // readers which are in the process of reading out the dropdown already. We take the `element`\n        // from the `event` since we can't use a `ViewChild` to access the pane.\n        if (event.toState === 'enter' && this.keyManager.activeItemIndex === 0) {\n            event.element.scrollTop = 0;\n        }\n    }\n\n    /**\n     * Sets up a stream that will keep track of any newly-added menu items and will update the list\n     * of direct descendants. We collect the descendants this way, because `_allItems` can include\n     * items that are part of child menus, and using a custom way of registering items is unreliable\n     * when it comes to maintaining the item order.\n     */\n    private updateDirectDescendants() {\n        this.items.changes\n            .pipe(startWith(this.items))\n            .subscribe((items: QueryList<McDropdownItem>) => {\n                this.directDescendantItems.reset(items.filter((item) => item.parentDropdownPanel === this));\n                this.directDescendantItems.notifyOnChanges();\n            });\n    }\n}\n","import { FocusMonitor, FocusOrigin } from '@angular/cdk/a11y';\nimport { Direction, Directionality } from '@angular/cdk/bidi';\nimport {\n    FlexibleConnectedPositionStrategy,\n    HorizontalConnectionPos,\n    Overlay,\n    OverlayConfig,\n    OverlayRef,\n    VerticalConnectionPos,\n    ScrollStrategy\n} from '@angular/cdk/overlay';\nimport { normalizePassiveListenerOptions } from '@angular/cdk/platform';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport {\n    AfterContentInit,\n    Directive,\n    ElementRef,\n    EventEmitter,\n    Inject,\n    InjectionToken,\n    Input,\n    OnDestroy,\n    Optional,\n    Output,\n    Self,\n    ViewContainerRef\n} from '@angular/core';\nimport { LEFT_ARROW, RIGHT_ARROW, SPACE, ENTER, DOWN_ARROW } from '@ptsecurity/cdk/keycodes';\nimport { asapScheduler, merge, of as observableOf, Subscription } from 'rxjs';\nimport { delay, filter, take, takeUntil } from 'rxjs/operators';\n\nimport { throwMcDropdownMissingError } from './dropdown-errors';\nimport { McDropdownItem } from './dropdown-item.component';\nimport { McDropdown } from './dropdown.component';\nimport { DropdownCloseReason, DropdownPositionX, DropdownPositionY, McDropdownPanel } from './dropdown.types';\n\n\n/** Injection token that determines the scroll handling while the dropdown is open. */\nexport const MC_DROPDOWN_SCROLL_STRATEGY =\n    new InjectionToken<() => ScrollStrategy>('mc-dropdown-scroll-strategy');\n\n/** @docs-private */\n// tslint:disable-next-line:naming-convention\nexport function MC_DROPDOWN_SCROLL_STRATEGY_FACTORY(overlay: Overlay): () => ScrollStrategy {\n    return () => overlay.scrollStrategies.reposition();\n}\n\n/** @docs-private */\nexport const MC_DROPDOWN_SCROLL_STRATEGY_FACTORY_PROVIDER = {\n    provide: MC_DROPDOWN_SCROLL_STRATEGY,\n    deps: [Overlay],\n    useFactory: MC_DROPDOWN_SCROLL_STRATEGY_FACTORY\n};\n\n/** Default top padding of the nested dropdown panel. */\nexport const NESTED_PANEL_TOP_PADDING = 4;\nexport const NESTED_PANEL_LEFT_PADDING = 8;\n\n/** Options for binding a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({passive: true});\n\n/**\n * This directive is intended to be used in conjunction with an mc-dropdown tag.  It is\n * responsible for toggling the display of the provided dropdown instance.\n */\n@Directive({\n    selector: `[mcDropdownTriggerFor]`,\n    exportAs: 'mcDropdownTrigger',\n    host: {\n        class: 'mc-dropdown-trigger',\n        '[class.mc-pressed]': 'opened',\n        '(mousedown)': 'handleMousedown($event)',\n        '(keydown)': 'handleKeydown($event)',\n        '(click)': 'handleClick($event)'\n    }\n})\nexport class McDropdownTrigger implements AfterContentInit, OnDestroy {\n\n    /** Data to be passed along to any lazily-rendered content. */\n    @Input('mcDropdownTriggerData') data: any;\n\n    @Input() openByArrowDown: boolean = true;\n\n    /**\n     * Whether focus should be restored when the menu is closed.\n     * Note that disabling this option can have accessibility implications\n     * and it's up to you to manage focus, if you decide to turn it off.\n     */\n    @Input('mcDropdownTriggerRestoreFocus') restoreFocus: boolean = true;\n\n    /** References the dropdown instance that the trigger is associated with. */\n    @Input('mcDropdownTriggerFor')\n    get dropdown() {\n        return this._dropdown;\n    }\n\n    set dropdown(dropdown: McDropdownPanel) {\n        if (dropdown === this._dropdown) { return; }\n\n        this._dropdown = dropdown;\n        this.closeSubscription.unsubscribe();\n\n        if (dropdown) {\n            this.closeSubscription = dropdown.closed\n                .asObservable()\n                .subscribe((reason) => {\n                    this.destroy(reason);\n\n                    // If a click closed the dropdown, we should close the entire chain of nested dropdowns.\n                    if (['click', 'tab'].includes(reason as string) && this.parent) {\n                        this.parent.closed.emit(reason);\n                    }\n                });\n        }\n    }\n\n    private _dropdown: McDropdownPanel;\n\n    /** Event emitted when the associated dropdown is opened. */\n    @Output() readonly dropdownOpened: EventEmitter<void> = new EventEmitter<void>();\n\n    /** Event emitted when the associated dropdown is closed. */\n    @Output() readonly dropdownClosed: EventEmitter<void> = new EventEmitter<void>();\n\n    // Tracking input type is necessary so it's possible to only auto-focus\n    // the first item of the list when the dropdown is opened via the keyboard\n    openedBy: Exclude<FocusOrigin, 'program' | null> | undefined;\n\n    /** The text direction of the containing app. */\n    get dir(): Direction {\n        return this._dir?.value === 'rtl' ? 'rtl' : 'ltr';\n    }\n\n    /** Whether the dropdown is open. */\n    get opened(): boolean {\n        return this._opened;\n    }\n\n    private _opened: boolean = false;\n\n    private portal: TemplatePortal;\n\n    private overlayRef: OverlayRef | null = null;\n\n    private closeSubscription = Subscription.EMPTY;\n\n    private hoverSubscription = Subscription.EMPTY;\n\n    constructor(\n        private overlay: Overlay,\n        private elementRef: ElementRef<HTMLElement>,\n        private viewContainerRef: ViewContainerRef,\n        @Inject(MC_DROPDOWN_SCROLL_STRATEGY) private scrollStrategy: any,\n        @Optional() private parent: McDropdown,\n        @Optional() @Self() private dropdownItemInstance: McDropdownItem,\n        @Optional() private _dir: Directionality,\n        private focusMonitor?: FocusMonitor\n    ) {\n        elementRef.nativeElement.addEventListener(\n            'touchstart',\n            this.handleTouchStart,\n            passiveEventListenerOptions\n        );\n\n        if (dropdownItemInstance) {\n            dropdownItemInstance.isNested = this.isNested();\n        }\n    }\n\n    ngAfterContentInit() {\n        this.check();\n        this.handleHover();\n    }\n\n    ngOnDestroy() {\n        if (this.overlayRef) {\n            this.overlayRef.dispose();\n            this.overlayRef = null;\n        }\n\n        this.elementRef.nativeElement.removeEventListener(\n            'touchstart',\n            this.handleTouchStart,\n            passiveEventListenerOptions\n        );\n\n        this.cleanUpSubscriptions();\n    }\n\n    /** Whether the dropdown triggers a nested dropdown or a top-level one. */\n    isNested(): boolean {\n        return !!(this.dropdownItemInstance && this.parent);\n    }\n\n    /** Toggles the dropdown between the open and closed states. */\n    toggle(): void {\n        // tslint:disable-next-line:no-void-expression\n        return this._opened ? this.close() : this.open();\n    }\n\n    /** Opens the dropdown. */\n    open(): void {\n        if (this._opened) { return; }\n\n        this.check();\n\n        const overlayRef = this.createOverlay();\n        const overlayConfig = overlayRef.getConfig();\n\n        this.setPosition(overlayConfig.positionStrategy as FlexibleConnectedPositionStrategy);\n\n        overlayConfig.hasBackdrop = this.dropdown.hasBackdrop ? !this.isNested() : this.dropdown.hasBackdrop;\n\n        overlayRef.attach(this.getPortal());\n\n        if (this.dropdown.lazyContent) {\n            this.dropdown.lazyContent.attach(this.data);\n        }\n\n        this.closeSubscription = this.closingActions()\n            .subscribe(() => this.close());\n\n        this.init();\n\n        if (this.dropdown instanceof McDropdown) {\n            this.dropdown.startAnimation();\n        }\n    }\n\n    /** Closes the dropdown. */\n    close(): void {\n        this.dropdown.closed.emit();\n    }\n\n    /**\n     * Focuses the dropdown trigger.\n     * @param origin Source of the dropdown trigger's focus.\n     */\n    focus(origin: FocusOrigin = 'program') {\n        if (this.focusMonitor) {\n            this.focusMonitor.focusVia(this.elementRef.nativeElement, origin);\n        } else {\n            this.elementRef.nativeElement.focus();\n        }\n    }\n\n    /** Handles mouse presses on the trigger. */\n    handleMousedown(event: MouseEvent): void {\n        // Since right or middle button clicks won't trigger the `click` event,\n        // we shouldn't consider the dropdown as opened by mouse in those cases.\n        this.openedBy = event.button === 0 ? 'mouse' : undefined;\n\n        // Since clicking on the trigger won't close the dropdown if it opens a nested dropdown,\n        // we should prevent focus from moving onto it via click to avoid the\n        // highlight from lingering on the dropdown item.\n        if (this.isNested()) {\n            event.preventDefault();\n        }\n    }\n\n    /** Handles key presses on the trigger. */\n    handleKeydown(event: KeyboardEvent) {\n        // tslint:disable-next-line:deprecation\n        const keyCode = event.keyCode;\n\n        // Pressing enter on the trigger will trigger the click handler later.\n        if (keyCode === ENTER || keyCode === SPACE) {\n            this.openedBy = 'keyboard';\n        }\n\n        if (\n            (this.isNested() &&\n                ((keyCode === RIGHT_ARROW && this.dir === 'ltr') || (keyCode === LEFT_ARROW && this.dir === 'rtl'))\n            ) ||\n            (!this.isNested() && (keyCode === DOWN_ARROW && this.openByArrowDown))\n        ) {\n            event.preventDefault();\n\n            this.openedBy = 'keyboard';\n            this.open();\n        }\n    }\n\n    /** Handles click events on the trigger. */\n    handleClick(event: MouseEvent): void {\n        if (this.isNested()) {\n            // Stop event propagation to avoid closing the parent dropdown.\n            event.stopPropagation();\n\n            this.open();\n        } else {\n            this.toggle();\n        }\n    }\n\n    /**\n     * Handles touch start events on the trigger.\n     * Needs to be an arrow function so we can easily use addEventListener and removeEventListener.\n     */\n    private handleTouchStart = () => this.openedBy = 'touch';\n\n    /** Closes the dropdown and does the necessary cleanup. */\n    private destroy(reason: DropdownCloseReason) {\n        if (!this.overlayRef || !this.opened) { return; }\n\n        this.dropdown.resetActiveItem();\n\n        this.closeSubscription.unsubscribe();\n        this.overlayRef.detach();\n\n        if (this.restoreFocus && reason === 'keydown' && this.isNested()) {\n            this.focus(this.openedBy);\n        }\n\n        if (this.dropdown instanceof McDropdown) {\n            this.dropdown.resetAnimation();\n\n            // Wait for the exit animation to finish before reseting dropdown toState.\n            const dropdownAnimationDoneSubscription = this.dropdown.animationDone\n                .pipe(\n                    filter((event) => event.toState === 'void'),\n                    take(1)\n                );\n\n            if (this.dropdown.lazyContent) {\n                 dropdownAnimationDoneSubscription\n                    .pipe(takeUntil(this.dropdown.lazyContent.attached));\n            }\n\n            dropdownAnimationDoneSubscription\n                .subscribe({\n                    // If lazy content has attached we're need to detach it.\n                    next: this.dropdown.lazyContent ? () => this.dropdown.lazyContent?.detach() : undefined,\n                    error: undefined,\n                    complete: () => {\n                        this.reset();\n                    }\n                });\n        } else {\n            this.reset();\n\n            this.dropdown.lazyContent?.detach();\n        }\n    }\n\n    /**\n     * This method sets the dropdown state to open and focuses the first item if\n     * the dropdown was opened via the keyboard.\n     */\n    private init(): void {\n        this.dropdown.parent = this.isNested() ? this.parent : undefined;\n        this.dropdown.direction = this.dir;\n\n        if (!this.dropdown.parent) {\n            this.dropdown.triggerWidth = this.getWidth();\n        }\n\n        this.setIsOpened(true);\n        this.dropdown.focusFirstItem(this.openedBy);\n    }\n\n    /**\n     * This method resets the dropdown when it's closed, most importantly restoring\n     * focus to the dropdown trigger if the dropdown was opened via the keyboard.\n     */\n    private reset(): void {\n        this.setIsOpened(false);\n\n        // We should reset focus if the user is navigating using a keyboard or\n        // if we have a top-level trigger which might cause focus to be lost\n        // when clicking on the backdrop.\n        if (!this.openedBy) {\n            // Note that the focus style will show up both for `program` and\n            // `keyboard` so we don't have to specify which one it is.\n            this.focus();\n        } else if (!this.isNested()) {\n            this.focus(this.openedBy);\n        }\n\n        this.openedBy = undefined;\n    }\n\n    // set state rather than toggle to support triggers sharing a dropdown\n    private setIsOpened(isOpen: boolean): void {\n        this._opened = isOpen;\n        // tslint:disable-next-line:no-void-expression\n        this._opened ? this.dropdownOpened.emit() : this.dropdownClosed.emit();\n\n        if (this.isNested()) {\n            this.dropdownItemInstance.highlighted = isOpen;\n        }\n    }\n\n    /**\n     * This method checks that a valid instance of McDropdown has been passed into\n     * mcDropdownTriggerFor. If not, an exception is thrown.\n     */\n    private check() {\n        if (!this.dropdown) {\n            throwMcDropdownMissingError();\n        }\n    }\n\n    /**\n     * This method creates the overlay from the provided dropdown's template and saves its\n     * OverlayRef so that it can be attached to the DOM when open is called.\n     */\n    private createOverlay(): OverlayRef {\n        if (!this.overlayRef) {\n            const config = this.getOverlayConfig();\n            this.subscribeToPositions(config.positionStrategy as FlexibleConnectedPositionStrategy);\n            this.overlayRef = this.overlay.create(config);\n\n            // Consume the `keydownEvents` in order to prevent them from going to another overlay.\n            // Ideally we'd also have our keyboard event logic in here, however doing so will\n            // break anybody that may have implemented the `McDropdownPanel` themselves.\n            this.overlayRef.keydownEvents()\n                .subscribe();\n        }\n\n        return this.overlayRef;\n    }\n\n    /**\n     * This method builds the configuration object needed to create the overlay, the OverlayState.\n     * @returns OverlayConfig\n     */\n    private getOverlayConfig(): OverlayConfig {\n        return new OverlayConfig({\n            positionStrategy: this.overlay.position()\n                .flexibleConnectedTo(this.elementRef)\n                .withLockedPosition()\n                .withTransformOriginOn('.mc-dropdown__panel'),\n            backdropClass: this.dropdown.backdropClass || 'cdk-overlay-transparent-backdrop',\n            scrollStrategy: this.scrollStrategy(),\n            direction: this.dir\n        });\n    }\n\n    /**\n     * Listens to changes in the position of the overlay and sets the correct classes\n     * on the dropdown based on the new position. This ensures the animation origin is always\n     * correct, even if a fallback position is used for the overlay.\n     */\n    private subscribeToPositions(position: FlexibleConnectedPositionStrategy): void {\n        if (this.dropdown.setPositionClasses) {\n            position.positionChanges\n                .subscribe((change) => {\n                    const posX: DropdownPositionX = change.connectionPair.overlayX === 'start' ? 'after' : 'before';\n                    const posY: DropdownPositionY = change.connectionPair.overlayY === 'top' ? 'below' : 'above';\n\n                    this.dropdown.setPositionClasses!(posX, posY);\n                });\n        }\n    }\n\n    /**\n     * Sets the appropriate positions on a position strategy\n     * so the overlay connects with the trigger correctly.\n     * @param positionStrategy Strategy whose position to update.\n     */\n    private setPosition(positionStrategy: FlexibleConnectedPositionStrategy) {\n        let [originX, originFallbackX, overlayX, overlayFallbackX]: HorizontalConnectionPos[] =\n            this.dropdown.xPosition === 'before' ?\n                ['end', 'start', 'end', 'start'] :\n                ['start', 'end', 'start', 'end'];\n\n        // tslint:disable-next-line:prefer-const\n        let [overlayY, overlayFallbackY, originY, originFallbackY]: VerticalConnectionPos[] =\n            this.dropdown.yPosition === 'above' ?\n                ['bottom', 'top', 'bottom', 'top'] :\n                ['top', 'bottom', 'top', 'bottom'];\n\n        let offsetY = 0;\n        let offsetX = 0;\n\n        if (this.isNested()) {\n            // When the dropdown is nested, it should always align itself\n            // to the edges of the trigger, instead of overlapping it.\n            overlayFallbackX = originX = this.dropdown.xPosition === 'before' ? 'start' : 'end';\n            originFallbackX = overlayX = originX === 'end' ? 'start' : 'end';\n            offsetY = overlayY === 'bottom' ? NESTED_PANEL_TOP_PADDING : -NESTED_PANEL_TOP_PADDING;\n            offsetX = NESTED_PANEL_LEFT_PADDING;\n        } else {\n            if (!this.dropdown.overlapTriggerY) {\n                originY = overlayY === 'top' ? 'bottom' : 'top';\n                originFallbackY = overlayFallbackY === 'top' ? 'bottom' : 'top';\n            }\n\n            if (!this.dropdown.overlapTriggerX) {\n                overlayFallbackX = originX = this.dropdown.xPosition === 'before' ? 'start' : 'end';\n                originFallbackX = overlayX = originX === 'end' ? 'start' : 'end';\n            }\n        }\n\n        positionStrategy.withPositions([\n            { originX, originY, overlayX, overlayY, offsetY, offsetX: -offsetX },\n            { originX: originFallbackX, originY, overlayX: overlayFallbackX, overlayY, offsetY, offsetX },\n            {\n                originX,\n                originY: originFallbackY,\n                overlayX,\n                overlayY: overlayFallbackY,\n                offsetY: -offsetY,\n                offsetX: -offsetX\n            },\n            {\n                originX: originFallbackX,\n                originY: originFallbackY,\n                overlayX: overlayFallbackX,\n                overlayY: overlayFallbackY,\n                offsetY: -offsetY,\n                offsetX: -offsetX\n            }\n        ]);\n    }\n\n    /** Cleans up the active subscriptions. */\n    private cleanUpSubscriptions(): void {\n        this.closeSubscription.unsubscribe();\n        this.hoverSubscription.unsubscribe();\n    }\n\n    /** Returns a stream that emits whenever an action that should close the dropdown occurs. */\n    private closingActions() {\n        const backdrop = this.overlayRef!.backdropClick();\n        const outsidePointerEvents = this.overlayRef!.outsidePointerEvents();\n        const detachments = this.overlayRef!.detachments();\n        const parentClose = this.parent ? this.parent.closed : observableOf();\n        const hover = this.parent ? this.parent.hovered()\n            .pipe(\n                filter((active) => active !== this.dropdownItemInstance),\n                filter(() => this._opened)\n            ) : observableOf();\n\n        return merge(backdrop, outsidePointerEvents, parentClose, hover, detachments);\n    }\n\n    /** Handles the cases where the user hovers over the trigger. */\n    private handleHover() {\n        // Subscribe to changes in the hovered item in order to toggle the panel.\n        if (!this.isNested()) { return; }\n\n        this.hoverSubscription = this.parent.hovered()\n        // Since we might have multiple competing triggers for the same dropdown (e.g. a nested dropdown\n        // with different data and triggers), we have to delay it by a tick to ensure that\n        // it won't be closed immediately after it is opened.\n            .pipe(\n                filter((active) => active === this.dropdownItemInstance && !active.disabled),\n                delay(0, asapScheduler)\n            )\n            .subscribe(() => {\n                this.openedBy = 'mouse';\n\n                // If the same dropdown is used between multiple triggers, it might still be animating\n                // while the new trigger tries to re-open it. Wait for the animation to finish\n                // before doing so. Also interrupt if the user moves to another item.\n                if (this.dropdown instanceof McDropdown && this.dropdown.isAnimating) {\n                    // We need the `delay(0)` here in order to avoid\n                    // 'changed after checked' errors in some cases. See #12194.\n                    this.dropdown.animationDone\n                        .pipe(\n                            take(1),\n                            delay(0, asapScheduler),\n                            takeUntil(this.parent.hovered())\n                        )\n                        .subscribe(() => this.open());\n                } else {\n                    this.open();\n                }\n            });\n    }\n\n    /** Gets the portal that should be attached to the overlay. */\n    private getPortal(): TemplatePortal {\n        // Note that we can avoid this check by keeping the portal on the dropdown panel.\n        // While it would be cleaner, we'd have to introduce another required method on\n        // `McDropdownPanel`, making it harder to consume.\n        if (!this.portal || this.portal.templateRef !== this.dropdown.templateRef) {\n            this.portal = new TemplatePortal(this.dropdown.templateRef, this.viewContainerRef);\n        }\n\n        return this.portal;\n    }\n\n    private getWidth(): string {\n        const nativeElement = this.elementRef.nativeElement;\n\n        const { width, borderRightWidth, borderLeftWidth } = window.getComputedStyle(nativeElement);\n\n        return `${parseInt(width) - parseInt(borderRightWidth) - parseInt(borderLeftWidth)}px`;\n    }\n}\n","import { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { McIconModule } from '@ptsecurity/mosaic/icon';\n\nimport { McDropdownContent } from './dropdown-content.directive';\nimport { McDropdownItem } from './dropdown-item.component';\nimport { MC_DROPDOWN_SCROLL_STRATEGY_FACTORY_PROVIDER, McDropdownTrigger } from './dropdown-trigger.directive';\nimport { McDropdown } from './dropdown.component';\n\n\n@NgModule({\n    imports: [\n        CommonModule,\n        OverlayModule,\n        McIconModule\n    ],\n    exports: [\n        McDropdown,\n        McDropdownItem,\n        McDropdownTrigger,\n        McDropdownContent\n    ],\n    declarations: [\n        McDropdown,\n        McDropdownItem,\n        McDropdownTrigger,\n        McDropdownContent\n    ],\n    providers: [MC_DROPDOWN_SCROLL_STRATEGY_FACTORY_PROVIDER]\n})\nexport class McDropdownModule {}\n"]}