/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/collections"),require("@angular/core"),require("@angular/forms"),require("@ptsecurity/cdk/a11y"),require("@ptsecurity/cdk/keycodes"),require("@ptsecurity/mosaic/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/list",["exports","@angular/cdk/collections","@angular/core","@angular/forms","@ptsecurity/cdk/a11y","@ptsecurity/cdk/keycodes","@ptsecurity/mosaic/core","rxjs","rxjs/operators","@angular/common"],e):e((t.ng=t.ng||{},t.ng.mosaic=t.ng.mosaic||{},t.ng.mosaic.list={}),t.ng.cdk.collections,t.ng.core,t.ng.forms,t.ng.cdk.a11y,t.ng.cdk.keycodes,t.ng.mosaic.core,t.rxjs,t.rxjs.operators,t.ng.common)}(this,function(t,e,i,n,o,s,c,r,l,a){"use strict";function m(t,e){function i(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},p=function(){function t(t,e,i,n){this.elementRef=t,this.changeDetector=e,this.ngZone=i,this.listSelection=n,this.hasFocus=!1,this.onFocus=new r.Subject,this.onBlur=new r.Subject,this.checkboxPosition="after",this._disabled=!1,this._selected=!1}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||this.listSelection&&this.listSelection.disabled},set:function(t){var e=c.toBoolean(t);e!==this._disabled&&(this._disabled=e,this.changeDetector.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.listSelection.selectionModel&&this.listSelection.selectionModel.isSelected(this)||!1},set:function(t){var e=c.toBoolean(t);e!==this._selected&&(this.setSelected(e),this.listSelection.reportValueChange())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this.disabled?null:-1},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;if(this._selected){var e=this._selected;Promise.resolve().then(function(){(t._selected||e)&&(t.selected=!0,t.changeDetector.markForCheck())})}},t.prototype.ngOnDestroy=function(){var t=this;this.selected&&Promise.resolve().then(function(){return t.selected=!1}),this.listSelection.removeOptionFromList(this)},t.prototype.toggle=function(){this.selected=!this.selected},t.prototype.getLabel=function(){return this.text?this.text.nativeElement.textContent:""},t.prototype.setSelected=function(t){this._selected!==t&&this.listSelection.selectionModel&&(this._selected=t,t?this.listSelection.selectionModel.select(this):this.listSelection.selectionModel.deselect(this),this.changeDetector.markForCheck())},t.prototype.getHeight=function(){return this.elementRef.nativeElement.getClientRects()[0].height},t.prototype.handleClick=function(t){this.disabled||this.listSelection.setFocusedOption(this,t)},t.prototype.focus=function(){var t=this;this.hasFocus||(this.elementRef.nativeElement.focus(),this.onFocus.next({option:this}),Promise.resolve().then(function(){t.hasFocus=!0,t.changeDetector.markForCheck()}))},t.prototype.blur=function(){var t=this;this.ngZone.onStable.asObservable().pipe(l.take(1)).subscribe(function(){t.ngZone.run(function(){t.hasFocus=!1,t.onBlur.next({option:t})})})},t.prototype.getHostElement=function(){return this.elementRef.nativeElement},t.decorators=[{type:i.Component,args:[{exportAs:"mcListOption",selector:"mc-list-option",host:{"[attr.tabindex]":"tabIndex",class:"mc-list-option","[class.mc-selected]":"selected","[class.mc-focused]":"hasFocus","(focus)":"focus()","(blur)":"blur()","(click)":"handleClick($event)"},template:'<div class="mc-list-item-content"><div class="mc-list-text" #text><ng-content></ng-content></div></div>',encapsulation:i.ViewEncapsulation.None,preserveWhitespaces:!1,changeDetection:i.ChangeDetectionStrategy.OnPush}]}],t.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:i.NgZone},{type:b,decorators:[{type:i.Inject,args:[i.forwardRef(function(){return b})]}]}]},t.propDecorators={lines:[{type:i.ContentChildren,args:[c.McLine]}],text:[{type:i.ViewChild,args:["text",{static:!1}]}],checkboxPosition:[{type:i.Input}],value:[{type:i.Input}],disabled:[{type:i.Input}],selected:[{type:i.Input}]},t}(),d={provide:n.NG_VALUE_ACCESSOR,useExisting:i.forwardRef(function(){return b}),multi:!0},h=function(){function t(t,e){this.source=t,this.option=e}return t}(),g=function(){function t(){}return t}(),f=c.mixinTabIndex(c.mixinDisabled(g)),b=function(t){function n(n,o,s,l,a,m){var u=t.call(this)||this;return u.element=n,u.changeDetectorRef=o,u.horizontal=!1,u._tabIndex=0,u.selectionChange=new i.EventEmitter,u.destroyed=new r.Subject,u.onTouched=function(){},u.onChange=function(t){},u.autoSelect=null===l||c.toBoolean(l),u.multiple=null===m||c.toBoolean(m),u.noUnselect=null===a||c.toBoolean(a),u._tabIndex=parseInt(s)||0,u.selectionModel=new e.SelectionModel(u.multiple),u}return m(n,t),Object.defineProperty(n.prototype,"tabIndex",{get:function(){return this._tabIndex},set:function(t){this._tabIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"optionFocusChanges",{get:function(){return r.merge.apply(void 0,this.options.map(function(t){return t.onFocus}))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"optionBlurChanges",{get:function(){return r.merge.apply(void 0,this.options.map(function(t){return t.onBlur}))},enumerable:!0,configurable:!0}),n.prototype.ngAfterContentInit=function(){var t=this;this.horizontal=c.toBoolean(this.horizontal),this.keyManager=new o.FocusKeyManager(this.options).withTypeAhead().withVerticalOrientation(!this.horizontal).withHorizontalOrientation(this.horizontal?"ltr":null),this.keyManager.tabOut.pipe(l.takeUntil(this.destroyed)).subscribe(function(){t._tabIndex=-1,setTimeout(function(){t._tabIndex=0,t.changeDetectorRef.markForCheck()})}),this.tempValues&&(this.setOptionsFromValues(this.tempValues),this.tempValues=null),this.selectionModel.changed.pipe(l.takeUntil(this.destroyed)).subscribe(function(t){for(var e=0,i=t.added;e<i.length;e++){var n=i[e];n.selected=!0}for(var o=0,s=t.removed;o<s.length;o++){var n=s[o];n.selected=!1}}),this.options.changes.pipe(l.startWith(null),l.takeUntil(this.destroyed)).subscribe(function(){t.resetOptions(),t.updateTabIndex()}),this.updateScrollSize()},n.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},n.prototype.focus=function(){0!==this.options.length&&this.keyManager.setFirstItemActive()},n.prototype.blur=function(){this.hasFocusedOption()||this.keyManager.setActiveItem(-1),this.onTouched(),this.changeDetectorRef.markForCheck()},n.prototype.selectAll=function(){this.options.forEach(function(t){return t.setSelected(!0)}),this.reportValueChange()},n.prototype.deselectAll=function(){this.options.forEach(function(t){return t.setSelected(!1)}),this.reportValueChange()},n.prototype.updateScrollSize=function(){!this.horizontal&&this.options.first&&this.keyManager.withScrollSize(Math.floor(this.getHeight()/this.options.first.getHeight()))},n.prototype.setFocusedOption=function(t,e){this.keyManager.setActiveItem(t);var i=!!e&&s.hasModifierKey(e,"shiftKey"),n=!!e&&s.hasModifierKey(e,"ctrlKey");if(i&&this.multiple){var o=this.keyManager.previousActiveItemIndex,c=this.keyManager.activeItemIndex;o<c?this.options.forEach(function(t,e){e>=o&&e<=c&&t.setSelected(!0)}):this.options.forEach(function(t,e){e>=c&&e<=o&&t.setSelected(!0)})}else if(n){if(!this.canDeselectLast(t))return;t.toggle()}else this.autoSelect&&(this.options.forEach(function(t){return t.setSelected(!1)}),t.setSelected(!0));this.emitChangeEvent(t),this.reportValueChange()},n.prototype.writeValue=function(t){this.options?this.setOptionsFromValues(t||[]):this.tempValues=t},n.prototype.registerOnChange=function(t){this.onChange=t},n.prototype.registerOnTouched=function(t){this.onTouched=t},n.prototype.setDisabledState=function(t){this.options&&this.options.forEach(function(e){return e.disabled=t})},n.prototype.getSelectedOptionValues=function(){return this.options.filter(function(t){return t.selected}).map(function(t){return t.value})},n.prototype.toggleFocusedOption=function(){var t=this.keyManager.activeItemIndex;if(null!=t&&this.isValidIndex(t)){var e=this.options.toArray()[t];e&&this.canDeselectLast(e)&&(e.toggle(),this.emitChangeEvent(e))}},n.prototype.canDeselectLast=function(t){return!(this.noUnselect&&1===this.selectionModel.selected.length&&t.selected)},n.prototype.getHeight=function(){return this.element.nativeElement.getClientRects()[0].height},n.prototype.removeOptionFromList=function(t){if(t.hasFocus){var e=this.getOptionIndex(t);e>0?this.keyManager.setPreviousItemActive():0===e&&this.options.length>1&&this.keyManager.setNextItemActive()}},n.prototype.onKeyDown=function(t){switch(t.keyCode){case s.SPACE:case s.ENTER:this.toggleFocusedOption();break;case s.TAB:return void this.keyManager.tabOut.next();case s.DOWN_ARROW:this.keyManager.setNextItemActive();break;case s.UP_ARROW:this.keyManager.setPreviousItemActive();break;case s.HOME:this.keyManager.setFirstItemActive();break;case s.END:this.keyManager.setLastItemActive();break;case s.PAGE_UP:this.keyManager.setPreviousPageItemActive();break;case s.PAGE_DOWN:this.keyManager.setNextPageItemActive();break;default:return}t.preventDefault(),this.setFocusedOption(this.keyManager.activeItem,t)},n.prototype.reportValueChange=function(){this.options&&this.onChange(this.getSelectedOptionValues())},n.prototype.emitChangeEvent=function(t){this.selectionChange.emit(new h(this,t))},n.prototype.updateTabIndex=function(){this._tabIndex=0===this.options.length?-1:0},n.prototype.resetOptions=function(){this.dropSubscriptions(),this.listenToOptionsFocus()},n.prototype.dropSubscriptions=function(){this.optionFocusSubscription&&(this.optionFocusSubscription.unsubscribe(),this.optionFocusSubscription=null),this.optionBlurSubscription&&(this.optionBlurSubscription.unsubscribe(),this.optionBlurSubscription=null)},n.prototype.listenToOptionsFocus=function(){var t=this;this.optionFocusSubscription=this.optionFocusChanges.subscribe(function(e){var i=t.options.toArray().indexOf(e.option);t.isValidIndex(i)&&t.keyManager.updateActiveItem(i)}),this.optionBlurSubscription=this.optionBlurChanges.subscribe(function(){return t.blur()})},n.prototype.hasFocusedOption=function(){return this.options.some(function(t){return t.hasFocus})},n.prototype.getOptionByValue=function(t){return this.options.find(function(e){return e.value===t})},n.prototype.setOptionsFromValues=function(t){var e=this;this.options.forEach(function(t){return t.setSelected(!1)}),t.map(function(t){return e.getOptionByValue(t)}).filter(Boolean).forEach(function(t){return t.setSelected(!0)})},n.prototype.isValidIndex=function(t){return t>=0&&t<this.options.length},n.prototype.getOptionIndex=function(t){return this.options.toArray().indexOf(t)},n.decorators=[{type:i.Component,args:[{exportAs:"mcListSelection",selector:"mc-list-selection",template:"<ng-content></ng-content>",styles:[".mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mc-divider.mc-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mc-divider.mc-divider-inset{margin-left:80px}[dir=rtl] .mc-divider.mc-divider-inset{margin-left:auto;margin-right:80px}.mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-list,.mc-list-selection{display:block;outline:0}.mc-list .mc-subheader,.mc-list-selection .mc-subheader{display:flex;box-sizing:border-box;height:28px;line-height:-2px;padding:15px;align-items:center}.mc-list .mc-subheader:first-child,.mc-list-selection .mc-subheader:first-child{margin-top:0}.mc-list .mc-list .mc-subheader,.mc-list .mc-list-selection .mc-subheader,.mc-list-selection .mc-list .mc-subheader,.mc-list-selection .mc-list-selection .mc-subheader{margin:0}.mc-list-item,.mc-list-option{display:block;height:28px;border:2px solid transparent}.mc-list-item .mc-list-item-content,.mc-list-option .mc-list-item-content{position:relative;box-sizing:border-box;display:flex;flex-direction:row;align-items:center;height:100%;padding:0 15px}.mc-list-item.mc-2-line,.mc-list-option.mc-2-line{height:72px}.mc-list-item.mc-3-line,.mc-list-option.mc-3-line{height:88px}.mc-list-item.mc-multi-line,.mc-list-option.mc-multi-line{height:auto}.mc-list-item.mc-multi-line .mc-list-item-content,.mc-list-option.mc-multi-line .mc-list-item-content{padding-top:16px;padding-bottom:16px}.mc-list-item .mc-list-text,.mc-list-option .mc-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mc-list-item .mc-list-text>*,.mc-list-option .mc-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mc-list-item .mc-list-text:empty,.mc-list-option .mc-list-text:empty{display:none}.mc-list-item .mc-list-item-content .mc-list-text:not(:nth-child(2)),.mc-list-option .mc-list-item-content .mc-list-text:not(:nth-child(2)){padding-right:0}[dir=rtl] .mc-list-item .mc-list-item-content .mc-list-text:not(:nth-child(2)),[dir=rtl] .mc-list-option .mc-list-item-content .mc-list-text:not(:nth-child(2)){padding-left:0}.mc-list-item .mc-list-icon,.mc-list-option .mc-list-icon{box-sizing:content-box;flex-shrink:0;width:24px;height:24px;border-radius:50%;padding:4px;font-size:24px}.mc-list-item .mc-list-icon~.mc-divider-inset,.mc-list-option .mc-list-icon~.mc-divider-inset{margin-left:62px;width:calc(100% - 62px)}[dir=rtl] .mc-list-item .mc-list-icon~.mc-divider-inset,[dir=rtl] .mc-list-option .mc-list-icon~.mc-divider-inset{margin-left:auto;margin-right:62px}.mc-list-item .mc-divider,.mc-list-option .mc-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mc-list-item .mc-divider,[dir=rtl] .mc-list-option .mc-divider{margin-left:auto;margin-right:0}.mc-list-item .mc-divider.mc-divider-inset,.mc-list-option .mc-divider.mc-divider-inset{position:absolute}.mc-list-option:not([disabled]){cursor:pointer}"],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None,inputs:["disabled"],host:{"[attr.tabindex]":"tabIndex",class:"mc-list-selection","(focus)":"focus()","(blur)":"blur()","(keydown)":"onKeyDown($event)","(window:resize)":"updateScrollSize()"},providers:[d],preserveWhitespaces:!1}]}],n.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:String,decorators:[{type:i.Attribute,args:["tabindex"]}]},{type:String,decorators:[{type:i.Attribute,args:["auto-select"]}]},{type:String,decorators:[{type:i.Attribute,args:["no-unselect"]}]},{type:String,decorators:[{type:i.Attribute,args:["multiple"]}]}]},n.propDecorators={options:[{type:i.ContentChildren,args:[p]}],horizontal:[{type:i.Input}],tabIndex:[{type:i.Input}],selectionChange:[{type:i.Output}]},n}(f),y=function(){function t(){}return t}(),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.decorators=[{type:i.Component,args:[{selector:"mc-list",host:{class:"mc-list"},template:"<ng-content></ng-content>",styles:[".mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mc-divider.mc-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mc-divider.mc-divider-inset{margin-left:80px}[dir=rtl] .mc-divider.mc-divider-inset{margin-left:auto;margin-right:80px}.mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-no-select{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mc-list,.mc-list-selection{display:block;outline:0}.mc-list .mc-subheader,.mc-list-selection .mc-subheader{display:flex;box-sizing:border-box;height:28px;line-height:-2px;padding:15px;align-items:center}.mc-list .mc-subheader:first-child,.mc-list-selection .mc-subheader:first-child{margin-top:0}.mc-list .mc-list .mc-subheader,.mc-list .mc-list-selection .mc-subheader,.mc-list-selection .mc-list .mc-subheader,.mc-list-selection .mc-list-selection .mc-subheader{margin:0}.mc-list-item,.mc-list-option{display:block;height:28px;border:2px solid transparent}.mc-list-item .mc-list-item-content,.mc-list-option .mc-list-item-content{position:relative;box-sizing:border-box;display:flex;flex-direction:row;align-items:center;height:100%;padding:0 15px}.mc-list-item.mc-2-line,.mc-list-option.mc-2-line{height:72px}.mc-list-item.mc-3-line,.mc-list-option.mc-3-line{height:88px}.mc-list-item.mc-multi-line,.mc-list-option.mc-multi-line{height:auto}.mc-list-item.mc-multi-line .mc-list-item-content,.mc-list-option.mc-multi-line .mc-list-item-content{padding-top:16px;padding-bottom:16px}.mc-list-item .mc-list-text,.mc-list-option .mc-list-text{display:flex;flex-direction:column;width:100%;box-sizing:border-box;overflow:hidden;padding:0}.mc-list-item .mc-list-text>*,.mc-list-option .mc-list-text>*{margin:0;padding:0;font-weight:400;font-size:inherit}.mc-list-item .mc-list-text:empty,.mc-list-option .mc-list-text:empty{display:none}.mc-list-item .mc-list-item-content .mc-list-text:not(:nth-child(2)),.mc-list-option .mc-list-item-content .mc-list-text:not(:nth-child(2)){padding-right:0}[dir=rtl] .mc-list-item .mc-list-item-content .mc-list-text:not(:nth-child(2)),[dir=rtl] .mc-list-option .mc-list-item-content .mc-list-text:not(:nth-child(2)){padding-left:0}.mc-list-item .mc-list-icon,.mc-list-option .mc-list-icon{box-sizing:content-box;flex-shrink:0;width:24px;height:24px;border-radius:50%;padding:4px;font-size:24px}.mc-list-item .mc-list-icon~.mc-divider-inset,.mc-list-option .mc-list-icon~.mc-divider-inset{margin-left:62px;width:calc(100% - 62px)}[dir=rtl] .mc-list-item .mc-list-icon~.mc-divider-inset,[dir=rtl] .mc-list-option .mc-list-icon~.mc-divider-inset{margin-left:auto;margin-right:62px}.mc-list-item .mc-divider,.mc-list-option .mc-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mc-list-item .mc-divider,[dir=rtl] .mc-list-option .mc-divider{margin-left:auto;margin-right:0}.mc-list-item .mc-divider.mc-divider-inset,.mc-list-option .mc-divider.mc-divider-inset{position:absolute}.mc-list-option:not([disabled]){cursor:pointer}"],changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],e}(y),v=function(){function t(){}return t.decorators=[{type:i.Directive,args:[{selector:"[mc-subheader], [mcSubheader]",host:{class:"mc-subheader"}}]}],t}(),k=function(){function t(){}return t}(),S=function(t){function e(e){var i=t.call(this)||this;return i._element=e,i}return m(e,t),e.prototype.ngAfterContentInit=function(){this.lineSetter=new c.McLineSetter(this.lines,this._element)},e.prototype.handleFocus=function(){this._element.nativeElement.classList.add("mc-focused")},e.prototype.handleBlur=function(){this._element.nativeElement.classList.remove("mc-focused")},e.prototype.getHostElement=function(){return this._element.nativeElement},e.decorators=[{type:i.Component,args:[{selector:"mc-list-item, a[mc-list-item]",host:{class:"mc-list-item","(focus)":"handleFocus()","(blur)":"handleBlur()"},template:'<div class="mc-list-item-content"><ng-content select="[mc-list-icon], [mcListIcon]"></ng-content><div class="mc-list-text"><ng-content select="[mc-line], [mcLine]"></ng-content></div><ng-content></ng-content></div>',encapsulation:i.ViewEncapsulation.None,preserveWhitespaces:!1,changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.ElementRef}]},e.propDecorators={lines:[{type:i.ContentChildren,args:[c.McLine]}]},e}(k),C=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{imports:[a.CommonModule,o.A11yModule,c.McLineModule],exports:[x,b,S,p,v],declarations:[x,b,S,p,v]}]}],t}();t.McListModule=C,t.McListBase=y,t.McList=x,t.McListSubheaderCssStyler=v,t.McListItemBase=k,t.McListItem=S,t.McListOption=p,t.MC_SELECTION_LIST_VALUE_ACCESSOR=d,t.McListSelectionChange=h,t.McListSelectionBase=g,t.McListSelectionMixinBase=f,t.McListSelection=b,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-list.umd.min.js.map
