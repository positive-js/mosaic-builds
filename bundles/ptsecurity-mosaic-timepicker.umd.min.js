!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/a11y"),require("@angular/cdk/platform"),require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@angular/cdk/coercion"),require("@ptsecurity/cdk/datetime"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("@ptsecurity/mosaic/input"),require("rxjs")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/timepicker",["exports","@angular/cdk/a11y","@angular/cdk/platform","@angular/common","@angular/core","@angular/forms","@angular/cdk/coercion","@ptsecurity/cdk/datetime","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","@ptsecurity/mosaic/input","rxjs"],t):t(((e=e||self).ptsecurity=e.ptsecurity||{},e.ptsecurity.mosaic=e.ptsecurity.mosaic||{},e.ptsecurity.mosaic.timepicker={}),e.ng.cdk.a11y,e.ng.cdk.platform,e.ng.common,e.ng.core,e.ng.forms,e.ng.cdk.coercion,e.datetime,e.ptsecurity.mosaic.core,e.ptsecurity.mosaic["form-field"],e.ptsecurity.mosaic.input,e.rxjs)}(this,(function(e,t,i,r,n,o,a,s,u,m,c,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var d;function h(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}var f={hours:0,minutes:1,seconds:2};f[f.hours]="hours",f[f.minutes]="minutes",f[f.seconds]="seconds";var g={HHmmss:"HH:mm:ss",HHmm:"HH:mm"},y=((d={})[g.HHmmss]="  :  :  ",d[g.HHmm]="  :  ",d),v=g.HHmm,T=new RegExp(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]|[0-9]):([0-5][0-9]|[0-9])?$/),E=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]|[0-9])?$/,C=/^([0-9]|0[0-9]|1[0-9]|2[0-3]):?$/,A=0,R=function(e,t,i,r){this.defaultErrorStateMatcher=e,this.parentForm=t,this.parentFormGroup=i,this.ngControl=r};var D=u.mixinErrorState(R),O=function(e){function t(t,i,r,n,o,a,s,u){var m=e.call(this,o,r,n,i)||this;if(m.elementRef=t,m.ngControl=i,m.renderer=s,m.dateAdapter=u,m.stateChanges=new l.Subject,m.focused=!1,m.controlType="mc-timepicker",m._minTime=null,m._maxTime=null,m.uid="mc-timepicker-"+A++,!m.dateAdapter)throw Error("McTimepicker: No provider found for DateAdapter. You must import one of the existing modules at your application root or provide a custom implementation or use exists ones.");if(m.inputValueAccessor=a||m.elementRef.nativeElement,m.previousNativeValue=m.value,m.onChange=l.noop,m.id=m.id,m.placeholder=y[v],m.ngControl){m.ngControl.valueAccessor=m;var c=m.ngControl.control,p=[function(){return m.parseValidator()},function(){return m.minTimeValidator()},function(){return m.maxTimeValidator()}],d=c.validator?function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}([c.validator],p):p;c.setValidators(d),c.updateValueAndValidity()}return m}return function(e,t){function i(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(t,e),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(e){this._disabled=a.coerceBooleanProperty(e),this.focused&&(this.focused=!1),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this._required},set:function(e){this._required=a.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.inputValueAccessor.value},set:function(e){e!==this.value&&(this.inputValueAccessor.value=e,this.applyInputChanges())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeFormat",{get:function(){return this._timeFormat},set:function(e){var t=this;this._timeFormat=Object.keys(g).map((function(e){return g[e]})).indexOf(e)>-1?e:v,this.placeholder=y[this._timeFormat],setTimeout((function(){return t.applyInputChanges({doTimestringReformat:!0})}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minTime",{get:function(){return this._minTime},set:function(e){this._minTime=e,this.ngControl.control.updateValueAndValidity()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxTime",{get:function(){return this._maxTime},set:function(e){this._maxTime=e,this.ngControl.control.updateValueAndValidity()},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.stateChanges.complete()},t.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this.dirtyCheckNativeValue()},t.prototype.focus=function(){this.elementRef.nativeElement.focus()},t.prototype.focusChanged=function(e){e!==this.focused&&(this.focused=e,this.onTouched(),this.stateChanges.next())},t.prototype.onBlur=function(){this.applyInputChanges(),this.focusChanged(!1)},t.prototype.onPaste=function(e){e.preventDefault();var t=e.clipboardData.getData("text");void 0!==this.getDateFromTimeString(t)&&(this.elementRef.nativeElement.value=t,this.onInput())},t.prototype.onInput=function(){var e=this.elementRef.nativeElement.selectionStart,t=this.elementRef.nativeElement.selectionEnd,i=!1,r=this.getParsedTimeParts(this.elementRef.nativeElement.value),n=r.hoursOnly,o=r.hoursAndMinutes,a=r.hoursAndMinutesAndSeconds;(n&&n[1]&&2===n[1].length||o&&1===o[1].length&&o[2]&&2===o[2].length||a&&2===a[1].length&&2===a[2].length&&a[3]&&2===a[3].length)&&(i=!0),this.applyInputChanges({doTimestringReformat:i}),this.elementRef.nativeElement.selectionStart=e,this.elementRef.nativeElement.selectionEnd=t,i&&null===this.ngControl.errors&&this.createSelectionOfTimeComponentInInput(e+1)},Object.defineProperty(t.prototype,"empty",{get:function(){return!this.elementRef.nativeElement.value&&!this.isBadInput()},enumerable:!0,configurable:!0}),t.prototype.onContainerClick=function(){this.focus()},t.prototype.writeValue=function(e){null!==e&&(this.saveOriginalValue(e),this.renderer.setProperty(this.elementRef.nativeElement,"value",this.getTimeStringFromDate(e,this.timeFormat)),this.applyInputChanges())},t.prototype.onKeyDown=function(e){var t=this.getKeyCode(e);"ArrowUp"!==t&&"ArrowDown"!==t||this.upDownTimeByArrowKeys(e),"ArrowLeft"!==t&&"ArrowRight"!==t||this.switchSelectionBetweenTimeparts(e)},t.prototype.registerOnChange=function(e){this.onChange=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t.prototype.saveOriginalValue=function(e){this.dateAdapter.isValid(e)&&(this.originalValue=e)},t.prototype.dirtyCheckNativeValue=function(){var e=this.value;this.previousNativeValue!==e&&(this.previousNativeValue=e,this.stateChanges.next())},t.prototype.isBadInput=function(){var e=this.elementRef.nativeElement.validity;return e&&e.badInput},t.prototype.applyInputChanges=function(e){void 0===e&&(e={});var t=e.changedTime,i=e.doTimestringReformat,r=void 0===i||i,n=t||this.getDateFromTimeString(this.elementRef.nativeElement.value);if(this.currentDateTimeInput=n,r&&void 0!==n){var o=this.elementRef.nativeElement.selectionStart,a=this.elementRef.nativeElement.selectionEnd;this.renderer.setProperty(this.elementRef.nativeElement,"value",this.getTimeStringFromDate(n,this.timeFormat)),this.elementRef.nativeElement.selectionStart=o,this.elementRef.nativeElement.selectionEnd=a}this.ngControl.control.updateValueAndValidity();var s=null===this.ngControl.errors&&void 0!==n?n:null;this.onChange(s),this.stateChanges.next()},t.prototype.upDownTimeByArrowKeys=function(e){e.preventDefault();var t=this.currentDateTimeInput;if(void 0!==t){var i=this.elementRef.nativeElement.selectionStart,r=this.getTimeEditMetrics(i).modifiedTimePart,n=this.getKeyCode(e);"ArrowUp"===n&&(t=this.incrementTime(t,r)),"ArrowDown"===n&&(t=this.decrementTime(t,r)),this.applyInputChanges({changedTime:t}),this.createSelectionOfTimeComponentInInput(i)}},t.prototype.switchSelectionBetweenTimeparts=function(e){var t=this.currentDateTimeInput,i=this.getKeyCode(e);if(void 0!==t){var r=this.elementRef.nativeElement.selectionStart;"ArrowLeft"===i?r=this.getCursorPositionOfPrevTimePartStart(r,this.elementRef.nativeElement.value):"ArrowRight"===i&&(r=this.getCursorPositionOfNextTimePartStart(r,this.elementRef.nativeElement.value)),this.createSelectionOfTimeComponentInInput(r)}},t.prototype.getKeyCode=function(e){return e.code||e.key},t.prototype.createSelectionOfTimeComponentInInput=function(e){var t=this;setTimeout((function(){var i=t.getTimeEditMetrics(e);t.elementRef.nativeElement.selectionStart=i.cursorStartPosition,t.elementRef.nativeElement.selectionEnd=i.cursorEndPosition}))},t.prototype.incrementTime=function(e,t){void 0===t&&(t=f.seconds);var i=this.getTimeDigitsFromDate(e),r=i.hours,n=i.minutes,o=i.seconds;switch(t){case f.hours:r++;break;case f.minutes:n++;break;case f.seconds:o++}return o>59&&(o=0),n>59&&(n=0),r>23&&(r=0),this.getDateFromTimeDigits(r,n,o)},t.prototype.decrementTime=function(e,t){void 0===t&&(t=f.seconds);var i=this.getTimeDigitsFromDate(e),r=i.hours,n=i.minutes,o=i.seconds;switch(t){case f.hours:r--;break;case f.minutes:n--;break;case f.seconds:o--}return o<0&&(o=59),n<0&&(n=59),r<0&&(r=23),this.getDateFromTimeDigits(r,n,o)},t.prototype.getCursorPositionOfPrevTimePartStart=function(e,t){return 0===e?t.length:e-1},t.prototype.getCursorPositionOfNextTimePartStart=function(e,t,i){void 0===i&&(i=":");var r=t.indexOf(i,e);return void 0!==r?r+1:0},t.prototype.getTimeEditMetrics=function(e){var t,i,r,n=this.elementRef.nativeElement.value,o=n.indexOf(":",1),a=-1!==o?n.indexOf(":",o+1):-1;return-1!==a&&e>a?(t=f.seconds,i=a+1,r=n.length):-1!==o&&e>o?(t=f.minutes,i=o+1,r=a>-1?a:n.length):(t=f.hours,i=0,r=-1!==o?o:n.length),{modifiedTimePart:t,cursorStartPosition:i,cursorEndPosition:r}},t.prototype.getTimeStringFromDate=function(e,t){return void 0===t&&(t=v),null==e?"":this.dateAdapter.format(e,t)},t.prototype.getParsedTimeParts=function(e){var t=this.dateAdapter.parse(e,["h:m a","h:m:s a","H:m","H:m:s"]),i=null!==t?t.format("H:m:s"):"",r=i.match(T),n=i.match(E);return{hoursOnly:i.match(C),hoursAndMinutes:n,hoursAndMinutesAndSeconds:r}},t.prototype.getDateFromTimeDigits=function(e,t,i){return void 0===i&&(i=0),this.getDateFromTimeString(e+":"+t+":"+i)},t.prototype.getDateFromTimeString=function(e){if(void 0!==e){var t=this.getParsedTimeParts(e),i=t.hoursOnly,r=t.hoursAndMinutes,n=t.hoursAndMinutesAndSeconds;if(0!==e.trim().length&&(null!==i||null!==r||null!==n)){var o=0,a=0,s=0;i?o=Number(i[1]):r?(o=Number(r[1]),a=Number(r[2])):n&&(o=Number(n[1]),a=Number(n[2]),s=Number(n[3]));var u=this.dateAdapter.createDateTime(this.dateAdapter.getYear(this.originalValue),this.dateAdapter.getMonth(this.originalValue),this.dateAdapter.getDate(this.originalValue),o,a,s,0);return this.dateAdapter.isValid(u)?u:void 0}}},t.prototype.getTimeDigitsFromDate=function(e){return{hours:this.dateAdapter.getHours(e),minutes:this.dateAdapter.getMinutes(e),seconds:this.dateAdapter.getSeconds(e)}},t.prototype.parseValidator=function(){return void 0===this.currentDateTimeInput?{mcTimepickerParse:{text:this.elementRef.nativeElement.value}}:null},t.prototype.minTimeValidator=function(){return this.minTime&&void 0!==this.currentDateTimeInput&&this.isTimeLowerThenMin(this.currentDateTimeInput)?{mcTimepickerLowerThenMintime:{text:this.elementRef.nativeElement.value}}:null},t.prototype.maxTimeValidator=function(){return this.maxTime&&void 0!==this.currentDateTimeInput&&this.isTimeGreaterThenMax(this.currentDateTimeInput)?{mcTimepickerHigherThenMaxtime:{text:this.elementRef.nativeElement.value}}:null},t.prototype.isTimeLowerThenMin=function(e){return null!=e&&null!==this.minTime&&this.dateAdapter.compareDateTime(e,this.getDateFromTimeString(this.minTime))<0},t.prototype.isTimeGreaterThenMax=function(e){return null!=e&&null!==this.maxTime&&this.dateAdapter.compareDateTime(e,this.getDateFromTimeString(this.maxTime))>=0},t.decorators=[{type:n.Directive,args:[{selector:"input[mcTimepicker]",exportAs:"mcTimepickerInput",host:{class:"mc-timepicker mc-input","[attr.id]":"id","[attr.placeholder]":"placeholder","[disabled]":"disabled","[required]":"required","[attr.time-format]":"timeFormat","[attr.min-time]":"minTime","[attr.max-time]":"maxTime","[attr.value]":"value","[attr.aria-invalid]":"errorState","(blur)":"onBlur()","(focus)":"focusChanged(true)","(input)":"onInput()","(paste)":"onPaste($event)","(keydown)":"onKeyDown($event)"},providers:[{provide:m.McFormFieldControl,useExisting:n.forwardRef((function(){return t}))}]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:o.NgControl,decorators:[{type:n.Optional},{type:n.Self}]},{type:o.NgForm,decorators:[{type:n.Optional}]},{type:o.FormGroupDirective,decorators:[{type:n.Optional}]},{type:u.ErrorStateMatcher},{type:void 0,decorators:[{type:n.Optional},{type:n.Self},{type:n.Inject,args:[c.MC_INPUT_VALUE_ACCESSOR]}]},{type:n.Renderer2},{type:s.DateAdapter,decorators:[{type:n.Optional}]}]},t.propDecorators={errorStateMatcher:[{type:n.Input}],placeholder:[{type:n.Input}],disabled:[{type:n.Input}],id:[{type:n.Input}],required:[{type:n.Input}],value:[{type:n.Input}],timeFormat:[{type:n.Input,args:["time-format"]}],minTime:[{type:n.Input,args:["min-time"]}],maxTime:[{type:n.Input,args:["max-time"]}]},t}(D);var S=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule,t.A11yModule,i.PlatformModule,o.FormsModule],declarations:[O],exports:[O]}]}],e}();e.ARROW_DOWN_KEYCODE="ArrowDown",e.ARROW_LEFT_KEYCODE="ArrowLeft",e.ARROW_RIGHT_KEYCODE="ArrowRight",e.ARROW_UP_KEYCODE="ArrowUp",e.DEFAULT_TIME_FORMAT=v,e.HOURS_MINUTES_REGEXP=E,e.HOURS_MINUTES_SECONDS_REGEXP=T,e.HOURS_ONLY_REGEXP=C,e.HOURS_PER_DAY=23,e.MINUTES_PER_HOUR=59,e.McTimepicker=O,e.McTimepickerBase=R,e.McTimepickerMixinBase=D,e.McTimepickerModule=S,e.SECONDS_PER_MINUTE=59,e.TIMEFORMAT_PLACEHOLDERS=y,e.TimeFormats=g,e.TimeParts=f,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-timepicker.umd.min.js.map