!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/a11y"),require("@angular/common"),require("@angular/core"),require("@angular/forms"),require("@ptsecurity/mosaic/core"),require("@angular/cdk/coercion"),require("@angular/cdk/platform"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("@ptsecurity/cdk/keycodes")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/input",["exports","@angular/cdk/a11y","@angular/common","@angular/core","@angular/forms","@ptsecurity/mosaic/core","@angular/cdk/coercion","@angular/cdk/platform","@ptsecurity/mosaic/form-field","rxjs","@ptsecurity/cdk/keycodes"],e):e(((t=t||self).ptsecurity=t.ptsecurity||{},t.ptsecurity.mosaic=t.ptsecurity.mosaic||{},t.ptsecurity.mosaic.input={}),t.ng.cdk.a11y,t.ng.common,t.ng.core,t.ng.forms,t.ptsecurity.mosaic.core,t.ng.cdk.coercion,t.ng.cdk.platform,t.ptsecurity.mosaic["form-field"],t.rxjs,t.keycodes)}(this,(function(t,e,n,o,r,i,a,s,u,p,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function y(t){return t?t.replace(/,/g,"."):t}function d(t){return/^-?\d+\.\d+$/.test(t)}function f(t){return/^-?\d+$/.test(t)}function m(t){return d(t)||f(t)}function h(t){var e=t.toString().split(".");return 1===e.length?1:Math.pow(10,e[1].length)}function g(t,e){var n=Math.max(h(t),h(e));return(t*n+e*n)/n}var v=function(){function t(t,e,n,o,r,i,a){this.platform=t,this.elementRef=e,this.ngControl=n,this.focused=!1,this.stateChanges=new p.Subject,this.step=m(o)?parseFloat(o):1,this.bigStep=m(r)?parseFloat(r):10,this.min=m(i)?parseFloat(i):-1/0,this.max=m(a)?parseFloat(a):1/0,"valueAsNumber"in this.nativeElement&&Object.defineProperty(Object.getPrototypeOf(this.nativeElement),"valueAsNumber",{get:function(){var t=parseFloat(y(this.value));return isNaN(t)?null:t}})}return Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this.elementRef.nativeElement},enumerable:!0,configurable:!0}),t.prototype.focusChanged=function(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())},t.prototype.onKeyDown=function(t){var e,n=this,o=t.keyCode,r=[c.NUMPAD_MINUS,c.DASH,c.FF_MINUS],i=[c.DELETE,c.BACKSPACE,c.TAB,c.ESCAPE,c.ENTER],a=[c.LEFT_ARROW,c.RIGHT_ARROW];if(!(-1!==[c.HOME,c.END].concat(a).concat(i).concat(r).indexOf(o)||(e=t,e.keyCode===c.A&&(e.ctrlKey||e.metaKey))||function(t){return t.keyCode===c.C&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===c.V&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===c.X&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode===c.Z&&(t.ctrlKey||t.metaKey)}(t)||function(t){return t.keyCode>=c.F1&&t.keyCode<=c.F12}(t)||function(t){return n.platform.EDGE||n.platform.TRIDENT?function(t){return"."===t.key||"Decimal"===t.key}(t):function(t){return"."===t.key||","===t.key}(t)}(t))&&(t.shiftKey||!function(t){return t.keyCode>=c.ZERO&&t.keyCode<=c.NINE||t.keyCode>=c.NUMPAD_ZERO&&t.keyCode<=c.NUMPAD_NINE}(t))){t.preventDefault();var s=t.shiftKey?this.bigStep:this.step;o===c.UP_ARROW&&this.stepUp(s),o===c.DOWN_ARROW&&this.stepDown(s)}},t.prototype.onPaste=function(t){m(y(t.clipboardData.getData("text")))||t.preventDefault()},t.prototype.stepUp=function(t){this.elementRef.nativeElement.focus();var e=Math.max(Math.min(g(this.nativeElement.valueAsNumber||0,t),this.max),this.min);this.nativeElement.value=e.toString(),this.viewToModelUpdate(this.nativeElement.valueAsNumber)},t.prototype.stepDown=function(t){this.elementRef.nativeElement.focus();var e=Math.min(Math.max(g(this.nativeElement.valueAsNumber||0,-t),this.min),this.max);this.nativeElement.value=e.toString(),this.viewToModelUpdate(this.nativeElement.valueAsNumber)},t.prototype.viewToModelUpdate=function(t){this.ngControl&&this.ngControl.control.setValue(t)},t.decorators=[{type:o.Directive,args:[{selector:'input[mcInput][type="number"]',exportAs:"mcNumericalInput",host:{"(blur)":"focusChanged(false)","(focus)":"focusChanged(true)","(paste)":"onPaste($event)","(keydown)":"onKeyDown($event)"}}]}],t.ctorParameters=function(){return[{type:s.Platform},{type:o.ElementRef},{type:r.NgControl,decorators:[{type:o.Optional},{type:o.Self}]},{type:String,decorators:[{type:o.Attribute,args:["step"]}]},{type:String,decorators:[{type:o.Attribute,args:["big-step"]}]},{type:String,decorators:[{type:o.Attribute,args:["min"]}]},{type:String,decorators:[{type:o.Attribute,args:["max"]}]}]},t.propDecorators={bigStep:[{type:o.Input}],step:[{type:o.Input}],min:[{type:o.Input}],max:[{type:o.Input}]},t}();var C=new o.InjectionToken("MC_INPUT_VALUE_ACCESSOR"),b=["button","checkbox","file","hidden","image","radio","range","reset","submit"],I=0,E=function(t,e,n,o){this.defaultErrorStateMatcher=t,this.parentForm=e,this.parentFormGroup=n,this.ngControl=o};var _=i.mixinErrorState(E),O=function(t){function e(e,n,o,r,i,a,u,c,l,y,d){var f=t.call(this,y,c,l,r)||this;return f.elementRef=e,f.rawValidators=n,f.mcValidation=o,f.numberInput=i,f.ngModel=a,f.formControlName=u,f.focused=!1,f.stateChanges=new p.Subject,f.controlType="mc-input",f.uid="mc-input-"+I++,f.neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter((function(t){return s.getSupportedInputTypes().has(t)})),f._disabled=!1,f._required=!1,f._type="text",f._inputValueAccessor=d||f.elementRef.nativeElement,f.previousNativeValue=f.value,f.id=f.id,f}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled},set:function(t){this._disabled=a.coerceBooleanProperty(t),this.focused&&(this.focused=!1,this.stateChanges.next())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t||this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=a.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t||"text",this.validateType(),s.getSupportedInputTypes().has(this._type)&&(this.elementRef.nativeElement.type=this._type)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._inputValueAccessor.value},set:function(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.ngControl&&this.mcValidation.useValidation&&i.setMosaicValidation(this)},e.prototype.ngOnChanges=function(){this.stateChanges.next()},e.prototype.ngOnDestroy=function(){this.stateChanges.complete()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState(),this.dirtyCheckNativeValue()},e.prototype.focus=function(){this.elementRef.nativeElement.focus()},e.prototype.onBlur=function(){if(this.focusChanged(!1),this.ngControl&&this.ngControl.control){var t=this.ngControl.control;t.updateValueAndValidity({emitEvent:!1}),t.statusChanges.emit(t.status)}},e.prototype.focusChanged=function(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())},e.prototype.onInput=function(){},Object.defineProperty(e.prototype,"empty",{get:function(){return!this.isNeverEmpty()&&!this.elementRef.nativeElement.value&&!this.isBadInput()},enumerable:!0,configurable:!0}),e.prototype.onContainerClick=function(){this.focus()},e.prototype.dirtyCheckNativeValue=function(){var t=this.value;this.previousNativeValue!==t&&(this.previousNativeValue=t,this.stateChanges.next())},e.prototype.validateType=function(){if(b.indexOf(this._type)>-1)throw t=this._type,Error('Input type "'+t+"\" isn't supported by mcInput.");var t},e.prototype.isNeverEmpty=function(){return this.neverEmptyInputTypes.indexOf(this._type)>-1},e.prototype.isBadInput=function(){var t=this.elementRef.nativeElement.validity;return t&&t.badInput},e.decorators=[{type:o.Directive,args:[{selector:"input[mcInput]",exportAs:"mcInput",host:{class:"mc-input","[attr.id]":"id","[attr.placeholder]":"placeholder","[disabled]":"disabled","[required]":"required","(blur)":"onBlur()","(focus)":"focusChanged(true)","(input)":"onInput()"},providers:[{provide:u.McFormFieldControl,useExisting:e}]}]}],e.ctorParameters=function(){return[{type:o.ElementRef},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[r.NG_VALIDATORS]}]},{type:void 0,decorators:[{type:o.Optional},{type:o.Inject,args:[i.MC_VALIDATION]}]},{type:r.NgControl,decorators:[{type:o.Optional},{type:o.Self}]},{type:v,decorators:[{type:o.Optional},{type:o.Self}]},{type:r.NgModel,decorators:[{type:o.Optional},{type:o.Self}]},{type:r.FormControlName,decorators:[{type:o.Optional},{type:o.Self}]},{type:r.NgForm,decorators:[{type:o.Optional}]},{type:r.FormGroupDirective,decorators:[{type:o.Optional}]},{type:i.ErrorStateMatcher},{type:void 0,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[C]}]}]},e.propDecorators={errorStateMatcher:[{type:o.Input}],placeholder:[{type:o.Input}],disabled:[{type:o.Input}],id:[{type:o.Input}],required:[{type:o.Input}],type:[{type:o.Input}],value:[{type:o.Input}]},e}(_);var A=function(){function t(){}return t.decorators=[{type:o.Directive,args:[{selector:"input[mcInputMonospace]",exportAs:"McInputMonospace",host:{class:"mc-input_monospace"}}]}],t}(),M={provide:r.NG_VALIDATORS,useExisting:o.forwardRef((function(){return x})),multi:!0},x=function(){function t(){}return t.prototype.ngOnChanges=function(t){"min"in t&&(this.createValidator(),this.onChange&&this.onChange())},t.prototype.validate=function(t){return this.validator(t)},t.prototype.registerOnValidatorChange=function(t){this.onChange=t},t.prototype.createValidator=function(){this.validator=r.Validators.min(parseInt(this.min,10))},t.decorators=[{type:o.Directive,args:[{selector:"[min][formControlName],[min][formControl],[min][ngModel]",providers:[M],host:{"[attr.min]":"min ? min : null"}}]}],t.propDecorators={min:[{type:o.Input}]},t}();var N={provide:r.NG_VALIDATORS,useExisting:o.forwardRef((function(){return S})),multi:!0},S=function(){function t(){}return t.prototype.ngOnChanges=function(t){"max"in t&&(this.createValidator(),this.onChange&&this.onChange())},t.prototype.validate=function(t){return this.validator(t)},t.prototype.registerOnValidatorChange=function(t){this.onChange=t},t.prototype.createValidator=function(){this.validator=r.Validators.max(parseInt(this.max,10))},t.decorators=[{type:o.Directive,args:[{selector:"[max][formControlName],[max][formControl],[max][ngModel]",providers:[N],host:{"[attr.max]":"max ? max : null"}}]}],t.propDecorators={max:[{type:o.Input}]},t}();var k=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[n.CommonModule,e.A11yModule,i.McCommonModule,r.FormsModule],exports:[O,v,A,x,S],declarations:[O,v,A,x,S]}]}],t}();t.BIG_STEP=10,t.MC_INPUT_VALUE_ACCESSOR=C,t.McInput=O,t.McInputBase=E,t.McInputMixinBase=_,t.McInputModule=k,t.McInputMono=A,t.McNumberInput=v,t.SMALL_STEP=1,t.add=g,t.getPrecision=h,t.isDigit=m,t.isFloat=d,t.isInt=f,t.normalizeSplitter=y,t.ɵa=M,t.ɵb=x,t.ɵc=N,t.ɵd=S,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-input.umd.min.js.map