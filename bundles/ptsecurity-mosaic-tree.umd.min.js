!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("@ptsecurity/cdk/tree"),require("@ptsecurity/mosaic/core"),require("rxjs/operators"),require("@angular/cdk/coercion"),require("@ptsecurity/cdk/keycodes"),require("rxjs"),require("@angular/cdk/collections"),require("@angular/forms"),require("@ptsecurity/cdk/a11y")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/tree",["exports","@angular/common","@angular/core","@ptsecurity/cdk/tree","@ptsecurity/mosaic/core","rxjs/operators","@angular/cdk/coercion","@ptsecurity/cdk/keycodes","rxjs","@angular/cdk/collections","@angular/forms","@ptsecurity/cdk/a11y"],t):t(((e=e||self).ptsecurity=e.ptsecurity||{},e.ptsecurity.mosaic=e.ptsecurity.mosaic||{},e.ptsecurity.mosaic.tree={}),e.ng.common,e.ng.core,e.tree,e.ptsecurity.mosaic.core,e.rxjs.operators,e.ng.cdk.coercion,e.keycodes,e.rxjs,e.ng.cdk.collections,e.ng.forms,e.a11y)}(this,(function(e,t,n,o,r,i,s,a,c,u,l,d){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function h(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.decorators=[{type:n.Directive,args:[{selector:"[mcTreeNodeDef]",inputs:["when: mcTreeNodeDefWhen"],providers:[{provide:o.CdkTreeNodeDef,useExisting:t}]}]}],t.propDecorators={data:[{type:n.Input,args:["mcTreeNode"]}]},t}(o.CdkTreeNodeDef);var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseLeftPadding=12,t._indent=20,t.iconWidth=20,t}return h(t,e),Object.defineProperty(t.prototype,"leftPadding",{get:function(){return(this.withIcon?0:this.iconWidth)+this.baseLeftPadding},enumerable:!0,configurable:!0}),t.prototype.paddingIndent=function(){var e=this.treeNode.data&&this.tree.treeControl.getLevel?this.tree.treeControl.getLevel(this.treeNode.data):0,t=this.level||e;return t>0?t*this._indent+this.leftPadding+"px":this.leftPadding+"px"},t.prototype.ngOnInit=function(){this.withIcon=this.tree.treeControl.isExpandable(this.treeNode.data),this.setPadding()},t.decorators=[{type:n.Directive,args:[{selector:"[mcTreeNodePadding]",providers:[{provide:o.CdkTreeNodePadding,useExisting:t}]}]}],t.propDecorators={level:[{type:n.Input,args:["mcTreeNodePadding"]}],indent:[{type:n.Input,args:["mcTreeNodePaddingIndent"]}]},t}(o.CdkTreeNodePadding);var b=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.disabled=!1,o.tree.treeControl.filterValue.pipe(i.map((function(e){return e.length>0}))).subscribe((function(e){return o.disabled=e})),o}return h(t,e),Object.defineProperty(t.prototype,"iconState",{get:function(){return this.disabled||this.tree.treeControl.isExpanded(this.node)},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"mc-tree-node-toggle",template:'\n        <i class="mc mc-icon mc-angle-down-S_16"></i>\n    ',host:{class:"mc-tree-node-toggle","(click)":"toggle($event)","[class.mc-opened]":"iconState","[attr.disabled]":"disabled || null"},encapsulation:n.ViewEncapsulation.None,providers:[{provide:o.CdkTreeNodeToggle,useExisting:t}]}]}],t.ctorParameters=function(){return[{type:o.CdkTree},{type:o.CdkTreeNode}]},t.propDecorators={node:[{type:n.Input}]},t}(o.CdkTreeNodeToggle);var v=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.disabled=!1,o.tree.treeControl.filterValue.pipe(i.map((function(e){return e.length>0}))).subscribe((function(e){return o.disabled=e})),o}return h(t,e),t.decorators=[{type:n.Directive,args:[{selector:"[mcTreeNodeToggle]",host:{"(click)":"toggle($event)","[attr.disabled]":"disabled || null"},providers:[{provide:o.CdkTreeNodeToggle,useExisting:t}]}]}],t.ctorParameters=function(){return[{type:o.CdkTree},{type:o.CdkTreeNode}]},t}(o.CdkTreeNodeToggle);var C=new n.InjectionToken("MC_TREE_OPTION_PARENT_COMPONENT"),k=function(e,t){void 0===t&&(t=!1),this.source=e,this.isUserInput=t};var O=0,M=function(e){function t(t,o,r,i){var s=e.call(this,t,i)||this;return s.changeDetectorRef=o,s.ngZone=r,s.tree=i,s.onFocus=new c.Subject,s.onBlur=new c.Subject,s._disabled=!1,s.onSelectionChange=new n.EventEmitter,s._selected=!1,s._id="mc-tree-option-"+O++,s.hasFocus=!1,s}return h(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||this.tree&&this.tree.disabled},set:function(e){var t=s.coerceBooleanProperty(e);t!==this._disabled&&(this._disabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCheckbox",{get:function(){return void 0!==this._showCheckbox?this._showCheckbox:this.tree.showCheckbox},set:function(e){this._showCheckbox=s.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){var t=s.coerceBooleanProperty(e);t!==this._selected&&this.setSelected(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this.tree.multiple},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewValue",{get:function(){return(this.getHostElement().textContent||"").trim()},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this.value=this.tree.treeControl.getValue(this.data)},t.prototype.toggle=function(){this.selected=!this.selected},t.prototype.setSelected=function(e){this._selected!==e&&this.tree.selectionModel&&(this._selected=e,e?this.tree.selectionModel.select(this.data):this.tree.selectionModel.deselect(this.data),this.changeDetectorRef.markForCheck())},t.prototype.focus=function(e){var t=this;"program"!==e&&(this.disabled||this.hasFocus||(this.elementRef.nativeElement.focus(),this.onFocus.next({option:this}),Promise.resolve().then((function(){t.hasFocus=!0,t.changeDetectorRef.markForCheck()}))))},t.prototype.blur=function(){var e=this;this.ngZone.onStable.asObservable().pipe(i.take(1)).subscribe((function(){e.ngZone.run((function(){e.hasFocus=!1,e.onBlur.next({option:e})}))}))},t.prototype.getHeight=function(){var e=this.elementRef.nativeElement.getClientRects();return e.length?e[0].height:0},t.prototype.select=function(){this._selected||(this._selected=!0,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent())},t.prototype.deselect=function(){this._selected&&(this._selected=!1,this.changeDetectorRef.markForCheck())},t.prototype.selectViaInteraction=function(e){if(!this.disabled){this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent(!0);var t=!!e&&a.hasModifierKey(e,"shiftKey"),n=!!e&&a.hasModifierKey(e,"ctrlKey");this.tree.setSelectedOptionsByClick(this,t,n)}},t.prototype.emitSelectionChangeEvent=function(e){void 0===e&&(e=!1),this.onSelectionChange.emit(new k(this,e))},t.prototype.getHostElement=function(){return this.elementRef.nativeElement},t.prototype.markForCheck=function(){this.changeDetectorRef.markForCheck()},t.decorators=[{type:n.Component,args:[{selector:"mc-tree-option",exportAs:"mcTreeOption",template:'<ng-content select="[mc-icon]"></ng-content>\n\n<ng-content select="mc-tree-node-toggle"></ng-content>\n\n<mc-pseudo-checkbox\n    *ngIf="showCheckbox"\n    [state]="selected ? \'checked\' : \'unchecked\'"\n    [disabled]="disabled">\n</mc-pseudo-checkbox>\n\n<span class="mc-option-text mc-no-select"><ng-content></ng-content></span>\n\n<div class="mc-option-overlay"></div>\n',host:{"[attr.id]":"id","[attr.tabindex]":"-1","[attr.disabled]":"disabled || null",class:"mc-tree-option","[class.mc-selected]":"selected","[class.mc-focused]":"hasFocus","(focus)":"focus()","(blur)":"blur()","(click)":"selectViaInteraction($event)"},changeDetection:n.ChangeDetectionStrategy.OnPush,encapsulation:n.ViewEncapsulation.None,providers:[{provide:o.CdkTreeNode,useExisting:t}]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.NgZone},{type:void 0,decorators:[{type:n.Inject,args:[C]}]}]},t.propDecorators={disabled:[{type:n.Input}],showCheckbox:[{type:n.Input}],onSelectionChange:[{type:n.Output}]},t}(o.CdkTreeNode);var x={provide:l.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return _})),multi:!0},E=function(e,t){this.source=e,this.option=t};var I=function(e,t){this.source=e,this.option=t};var _=function(e){function t(t,o,i,s){var a=e.call(this,o,i)||this;return a.elementRef=t,a.resetFocusedItemOnBlur=!0,a.navigationChange=new n.EventEmitter,a.selectionChange=new n.EventEmitter,a.multipleMode=null,a.userTabIndex=null,a._autoSelect=!0,a._noUnselectLast=!0,a._disabled=!1,a._tabIndex=0,a.destroy=new c.Subject,a.onChange=function(){},a.onTouched=function(){},s===r.MultipleMode.CHECKBOX||s===r.MultipleMode.KEYBOARD?a.multipleMode=s:null!==s&&(a.multipleMode=r.MultipleMode.CHECKBOX),a.multipleMode===r.MultipleMode.CHECKBOX&&(a.autoSelect=!1,a.noUnselectLast=!1),a.selectionModel=new u.SelectionModel(a.multiple),a}return h(t,e),Object.defineProperty(t.prototype,"autoSelect",{get:function(){return this._autoSelect},set:function(e){this._autoSelect=s.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optionFocusChanges",{get:function(){return c.merge.apply(void 0,g(this.renderedOptions.map((function(e){return e.onFocus}))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"optionBlurChanges",{get:function(){return c.merge.apply(void 0,g(this.renderedOptions.map((function(e){return e.onBlur}))))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return!!this.multipleMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noUnselectLast",{get:function(){return this._noUnselectLast},set:function(e){this._noUnselectLast=s.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){var t=s.coerceBooleanProperty(e);this._disabled!==t&&(this._disabled=t,this.markOptionsForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tabIndex",{get:function(){return this.disabled?-1:this._tabIndex},set:function(e){this._tabIndex=e,this.userTabIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showCheckbox",{get:function(){return this.multipleMode===r.MultipleMode.CHECKBOX},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){var e=this;this.keyManager=new d.FocusKeyManager(this.renderedOptions).withVerticalOrientation(!0).withHorizontalOrientation(null),this.keyManager.change.pipe(i.takeUntil(this.destroy)).subscribe((function(){e.keyManager.activeItem&&(e.emitNavigationEvent(e.keyManager.activeItem),e.autoSelect&&!e.keyManager.activeItem.disabled&&e.updateOptionsFocus())})),this.keyManager.tabOut.pipe(i.takeUntil(this.destroy)).subscribe((function(){return e.allowFocusEscape()})),this.selectionModel.changed.pipe(i.takeUntil(this.destroy)).subscribe((function(){e.onChange(e.getSelectedValues()),e.renderedOptions.notifyOnChanges()})),this.renderedOptions.changes.pipe(i.takeUntil(this.destroy)).subscribe((function(t){e.resetOptions(),e.updateTabIndex(),t.forEach((function(t){t.deselect(),e.getSelectedValues().forEach((function(e){t.value===e&&t.select()}))}))}))},t.prototype.ngOnDestroy=function(){this.destroy.next(),this.destroy.complete()},t.prototype.focus=function(e){0===this.renderedOptions.length||this.isFocusReceivedFromNestedOption(e)||this.keyManager.setFirstItemActive()},t.prototype.blur=function(){!this.hasFocusedOption()&&this.resetFocusedItemOnBlur&&this.keyManager.setActiveItem(-1),this.onTouched(),this.changeDetectorRef.markForCheck()},t.prototype.onKeyDown=function(e){switch(this.keyManager.setFocusOrigin("keyboard"),e.keyCode){case a.DOWN_ARROW:this.keyManager.setNextItemActive();break;case a.UP_ARROW:this.keyManager.setPreviousItemActive();break;case a.LEFT_ARROW:return this.keyManager.activeItem&&this.treeControl.collapse(this.keyManager.activeItem.data),void e.preventDefault();case a.RIGHT_ARROW:return this.keyManager.activeItem&&this.treeControl.expand(this.keyManager.activeItem.data),void e.preventDefault();case a.SPACE:case a.ENTER:this.toggleFocusedOption(),e.preventDefault();break;case a.HOME:this.keyManager.setFirstItemActive(),e.preventDefault();break;case a.END:this.keyManager.setLastItemActive(),e.preventDefault();break;case a.PAGE_UP:this.keyManager.setPreviousPageItemActive(),e.preventDefault();break;case a.PAGE_DOWN:this.keyManager.setNextPageItemActive(),e.preventDefault();break;default:return}this.keyManager.activeItem&&this.setSelectedOptionsByKey(this.keyManager.activeItem,a.hasModifierKey(e,"shiftKey"),a.hasModifierKey(e,"ctrlKey"))},t.prototype.updateScrollSize=function(){this.renderedOptions.first&&this.keyManager.withScrollSize(Math.floor(this.getHeight()/this.renderedOptions.first.getHeight()))},t.prototype.setSelectedOptionsByKey=function(e,t,n){if(t&&this.multiple)this.setSelectedOptions(e);else if(n){if(!this.canDeselectLast(e))return}else this.autoSelect&&(this.selectionModel.clear(),this.selectionModel.toggle(e.data));this.emitChangeEvent(e)},t.prototype.setSelectedOptionsByClick=function(e,t,n){if(t||n||this.keyManager.setActiveItem(e),t&&this.multiple)this.setSelectedOptions(e);else if(n){if(!this.canDeselectLast(e))return;this.selectionModel.toggle(e.data)}else this.autoSelect?(this.selectionModel.clear(),this.selectionModel.toggle(e.data)):this.selectionModel.toggle(e.data);this.emitChangeEvent(e)},t.prototype.setSelectedOptions=function(e){var t,n=this,o=e.selected,r=this.keyManager.previousActiveItemIndex,i=this.keyManager.previousActiveItemIndex=this.keyManager.activeItemIndex;i!==r&&(r>i&&(r=(t=f([i,r],2))[0],i=t[1]),this.renderedOptions.toArray().slice(r,i+1).filter((function(e){return!e.disabled})).forEach((function(e){e===n.keyManager.activeItem&&e.selected&&n.noUnselectLast||e.setSelected(!o)})))},t.prototype.setFocusedOption=function(e){this.keyManager.setActiveItem(e)},t.prototype.toggleFocusedOption=function(){var e=this.keyManager.activeItem;!e||e.selected&&!this.canDeselectLast(e)||(e.toggle(),this.emitChangeEvent(e))},t.prototype.renderNodeChanges=function(t,n,o,r){void 0===n&&(n=this.dataDiffer),void 0===o&&(o=this.nodeOutlet.viewContainer),e.prototype.renderNodeChanges.call(this,t,n,o,r);var i=[],s=[];o._embeddedViews.forEach((function(e){var t=e.def;t.nodes.forEach((function(n){if(t.nodeMatchedQueries===n.matchedQueryIds){var o=e.nodes[n.nodeIndex];i.push(o.instance),s.push(o.instance.changeDetectorRef)}}))})),setTimeout((function(){s.forEach((function(e){e.destroyed||e.detectChanges()}))})),this.renderedOptions&&(this.renderedOptions.reset(i),this.renderedOptions.notifyOnChanges()),this.updateScrollSize(),this.nodeOutlet.changeDetectorRef.detectChanges()},t.prototype.getHeight=function(){var e=this.elementRef.nativeElement.getClientRects();return e.length?e[0].height:0},t.prototype.getItemHeight=function(){return this.renderedOptions.first?this.renderedOptions.first.getHeight():0},t.prototype.emitNavigationEvent=function(e){this.navigationChange.emit(new E(this,e))},t.prototype.emitChangeEvent=function(e){this.selectionChange.emit(new E(this,e))},t.prototype.writeValue=function(e){if(this.multiple&&e&&!Array.isArray(e))throw r.getMcSelectNonArrayValueError();this.renderedOptions&&this.setOptionsFromValues(this.multiple?e:[e])},t.prototype.registerOnChange=function(e){this.onChange=e},t.prototype.registerOnTouched=function(e){this.onTouched=e},t.prototype.setDisabledState=function(e){this._disabled=e,this.changeDetectorRef.markForCheck()},t.prototype.setOptionsFromValues=function(e){var t,n=this;this.selectionModel.clear();var o=e.reduce((function(e,t){return n.treeControl.hasValue(t)?g(e,[n.treeControl.hasValue(t)]):g(e)}),[]);(t=this.selectionModel).select.apply(t,g(o))},t.prototype.getSelectedValues=function(){var e=this;return this.selectionModel.selected.map((function(t){return e.treeControl.getValue(t)}))},t.prototype.updateTabIndex=function(){this._tabIndex=0===this.renderedOptions.length?-1:0},t.prototype.allowFocusEscape=function(){var e=this;-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout((function(){e._tabIndex=e.userTabIndex||0,e.changeDetectorRef.markForCheck()})))},t.prototype.resetOptions=function(){this.dropSubscriptions(),this.listenToOptionsFocus()},t.prototype.dropSubscriptions=function(){this.optionFocusSubscription&&(this.optionFocusSubscription.unsubscribe(),this.optionFocusSubscription=null),this.optionBlurSubscription&&(this.optionBlurSubscription.unsubscribe(),this.optionBlurSubscription=null)},t.prototype.listenToOptionsFocus=function(){var e=this;this.optionFocusSubscription=this.optionFocusChanges.subscribe((function(t){var n=e.renderedOptions.toArray().indexOf(t.option);e.renderedOptions.filter((function(e){return e.hasFocus})).forEach((function(e){return e.hasFocus=!1})),e.isValidIndex(n)&&e.keyManager.updateActiveItem(n)})),this.optionBlurSubscription=this.optionBlurChanges.subscribe((function(){return e.blur()}))},t.prototype.isValidIndex=function(e){return e>=0&&e<this.renderedOptions.length},t.prototype.hasFocusedOption=function(){return this.renderedOptions.some((function(e){return e.hasFocus}))},t.prototype.markOptionsForCheck=function(){this.renderedOptions&&this.renderedOptions.forEach((function(e){return e.markForCheck()}))},t.prototype.updateOptionsFocus=function(){this.renderedOptions.filter((function(e){return e.hasFocus})).forEach((function(e){return e.hasFocus=!1}))},t.prototype.canDeselectLast=function(e){return!(this.noUnselectLast&&1===this.selectionModel.selected.length&&e.selected)},t.prototype.isFocusReceivedFromNestedOption=function(e){return!(!e||!e.relatedTarget)&&e.relatedTarget.classList.contains("mc-tree-option")},t.decorators=[{type:n.Component,args:[{selector:"mc-tree-selection",exportAs:"mcTreeSelection",template:"<ng-container cdkTreeNodeOutlet></ng-container>",host:{class:"mc-tree-selection","[attr.tabindex]":"tabIndex","[attr.disabled]":"disabled || null","(blur)":"blur()","(focus)":"focus($event)","(keydown)":"onKeyDown($event)","(window:resize)":"updateScrollSize()"},encapsulation:n.ViewEncapsulation.None,changeDetection:n.ChangeDetectionStrategy.OnPush,providers:[x,{provide:C,useExisting:t},{provide:o.CdkTree,useExisting:t}],styles:[".mc-tree-selection{display:block}.mc-tree-option{display:flex;align-items:center;height:28px;word-wrap:break-word;border:2px solid transparent}.mc-tree-option>.mc-icon{margin-right:4px;cursor:pointer}.mc-tree-option:focus{outline:0}.mc-tree-option:not([disabled]){cursor:pointer}.mc-tree-option .mc-pseudo-checkbox{margin-right:8px}.mc-tree-node-toggle{margin-right:4px;cursor:pointer}.mc-tree-node-toggle .mc-icon{transform:rotate(-90deg)}.mc-tree-node-toggle.mc-opened .mc-icon{transform:rotate(0)}.mc-tree-node-toggle[disabled]{cursor:default}"]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.IterableDiffers},{type:n.ChangeDetectorRef},{type:r.MultipleMode,decorators:[{type:n.Attribute,args:["multiple"]}]}]},t.propDecorators={nodeOutlet:[{type:n.ViewChild,args:[o.CdkTreeNodeOutlet,{static:!0}]}],renderedOptions:[{type:n.ContentChildren,args:[M]}],treeControl:[{type:n.Input}],navigationChange:[{type:n.Output}],selectionChange:[{type:n.Output}],autoSelect:[{type:n.Input}],noUnselectLast:[{type:n.Input}],disabled:[{type:n.Input}],tabIndex:[{type:n.Input}]},t}(o.CdkTree);var S=[_,M,y,m,b,v],T=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[t.CommonModule,o.CdkTreeModule,r.McPseudoCheckboxModule],exports:S,declarations:S}]}],e}(),D=function(){function e(e,t,n,o){this.transformFunction=e,this.getLevel=t,this.isExpandable=n,this.getChildren=o}return e.prototype.flattenNode=function(e,t,n,o){var r=this,s=this.transformFunction(e,t,o);if(n.push(s),this.isExpandable(s)){var a=this.getChildren(e);a&&(Array.isArray(a)?this.flattenChildren(a,t,n,s):a.pipe(i.take(1)).subscribe((function(e){r.flattenChildren(e,t,n,s)})))}return n},e.prototype.flattenChildren=function(e,t,n,o){var r=this;e.forEach((function(e){r.flattenNode(e,t+1,n,o)}))},e.prototype.flattenNodes=function(e){var t=this,n=[];return e.forEach((function(e){return t.flattenNode(e,0,n,null)})),n},e.prototype.expandFlattenedNodes=function(e,t){var n=this,o=[],r=[];return r[0]=!0,e.forEach((function(e){for(var i=!0,s=0;s<=n.getLevel(e);s++)i=i&&r[s];i&&o.push(e),n.isExpandable(e)&&(r[n.getLevel(e)+1]=t.isExpanded(e))})),o},e}();var N="expansion",F="filter",P=function(e){function t(t,n,o){void 0===o&&(o=[]);var r=e.call(this)||this;return r.treeControl=t,r.treeFlattener=n,r.flattenedData=new c.BehaviorSubject([]),r.expandedData=new c.BehaviorSubject([]),r.filteredData=new c.BehaviorSubject([]),r._data=new c.BehaviorSubject(o),r}return h(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e),this.flattenedData.next(this.treeFlattener.flattenNodes(this.data)),this.treeControl.dataNodes=this.flattenedData.value},enumerable:!0,configurable:!0}),t.prototype.connect=function(e){var t=this;return c.merge(e.viewChange,this.treeControl.expansionModel.changed.pipe(i.map((function(e){return{type:N,value:e}}))),this.treeControl.filterValue.pipe(i.map((function(e){return{type:F,value:e}}))),this.flattenedData).pipe(i.map((function(e){return e.type===F&&e.value&&e.value.length>0?t.filterHandler():t.expansionHandler()})))},t.prototype.filterHandler=function(){return this.filteredData.next(this.treeControl.filterModel.selected),this.filteredData.value},t.prototype.expansionHandler=function(){var e=this.treeFlattener.expandFlattenedNodes(this.flattenedData.value,this.treeControl);return this.expandedData.next(e),this.expandedData.value},t.prototype.disconnect=function(){},t}(u.DataSource);var w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._data=new c.BehaviorSubject([]),t}return h(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._data.value},set:function(e){this._data.next(e)},enumerable:!0,configurable:!0}),t.prototype.connect=function(e){var t=this;return c.merge.apply(void 0,g([e.viewChange,this._data])).pipe(i.map((function(){return t.data})))},t.prototype.disconnect=function(){},t}(u.DataSource);e.MC_SELECTION_TREE_VALUE_ACCESSOR=x,e.MC_TREE_OPTION_PARENT_COMPONENT=C,e.McTreeFlatDataSource=P,e.McTreeFlattener=D,e.McTreeModule=T,e.McTreeNavigationChange=E,e.McTreeNestedDataSource=w,e.McTreeNodeDef=y,e.McTreeNodePadding=m,e.McTreeNodeToggleComponent=b,e.McTreeNodeToggleDirective=v,e.McTreeOption=M,e.McTreeOptionChange=k,e.McTreeSelection=_,e.McTreeSelectionChange=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ptsecurity-mosaic-tree.umd.min.js.map