/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/coercion"),require("@angular/cdk/collections"),require("@angular/core"),require("@angular/forms"),require("@ptsecurity/cdk/a11y"),require("@ptsecurity/mosaic/button"),require("@ptsecurity/mosaic/core")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/button-toggle",["exports","@angular/cdk/coercion","@angular/cdk/collections","@angular/core","@angular/forms","@ptsecurity/cdk/a11y","@ptsecurity/mosaic/button","@ptsecurity/mosaic/core"],e):e((t.ng=t.ng||{},t.ng.mosaic=t.ng.mosaic||{},t.ng.mosaic.buttonToggle={}),t.ng.cdk.coercion,t.ng.cdk.collections,t.ng.core,t.ng.forms,t.ng.cdk.a11y,t.ng.mosaic.button,t.ng.mosaic.core)}(this,function(t,e,o,n,i,r,c,l){"use strict";var u={provide:i.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return a}),multi:!0},s=function(){function t(t,e){this.source=t,this.value=e}return t}(),a=function(){function t(t){this._changeDetector=t,this.valueChange=new n.EventEmitter,this.change=new n.EventEmitter,this._vertical=!1,this._multiple=!1,this._disabled=!1,this.controlValueAccessorChangeFn=function(){},this.onTouched=function(){}}return Object.defineProperty(t.prototype,"vertical",{get:function(){return this._vertical},set:function(t){this._vertical=e.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t=this.selectionModel?this.selectionModel.selected:[];return this.multiple?t.map(function(t){return t.value}):t[0]?t[0].value:void 0},set:function(t){this.setSelectionByValue(t),this.valueChange.emit(this.value)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){var t=this.selectionModel.selected;return this.multiple?t:t[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},set:function(t){this._multiple=e.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=e.coerceBooleanProperty(t),this.buttonToggles&&this.buttonToggles.forEach(function(t){return t.markForCheck()})},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.selectionModel=new o.SelectionModel(this.multiple,void 0,!1)},t.prototype.ngAfterContentInit=function(){var t;(t=this.selectionModel).select.apply(t,this.buttonToggles.filter(function(t){return t.checked})),this.disabled=this._disabled},t.prototype.writeValue=function(t){this.value=t,this._changeDetector.markForCheck()},t.prototype.registerOnChange=function(t){this.controlValueAccessorChangeFn=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.emitChangeEvent=function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,o=new s(e,this.value);this.controlValueAccessorChangeFn(o.value),this.change.emit(o)},t.prototype.syncButtonToggle=function(t,e,o){void 0===o&&(o=!1),this.multiple||!this.selected||t.checked||(this.selected.checked=!1),e?this.selectionModel.select(t):this.selectionModel.deselect(t),o&&this.emitChangeEvent(),this.valueChange.emit(this.value)},t.prototype.isSelected=function(t){return this.selectionModel.isSelected(t)},t.prototype.isPrechecked=function(t){return void 0!==this.rawValue&&(this.multiple&&Array.isArray(this.rawValue)?this.rawValue.some(function(e){return null!=t.value&&e===t.value}):t.value===this.rawValue)},t.prototype.setSelectionByValue=function(t){var e=this;if(this.rawValue=t,this.buttonToggles)if(this.multiple&&t){if(!Array.isArray(t))throw Error("Value must be an array in multiple-selection mode.");this.clearSelection(),t.forEach(function(t){return e.selectValue(t)})}else this.clearSelection(),this.selectValue(t)},t.prototype.clearSelection=function(){this.selectionModel.clear(),this.buttonToggles.forEach(function(t){return t.checked=!1})},t.prototype.selectValue=function(t){var e=this.buttonToggles.find(function(e){return null!=e.value&&e.value===t});e&&(e.checked=!0,this.selectionModel.select(e))},t.decorators=[{type:n.Directive,args:[{selector:"mc-button-toggle-group",providers:[u],host:{role:"group",class:"mc-button-toggle-group","[class.mc-button-toggle-vertical]":"vertical"},exportAs:"mcButtonToggleGroup"}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef}]},t.propDecorators={vertical:[{type:n.Input}],value:[{type:n.Input}],multiple:[{type:n.Input}],buttonToggles:[{type:n.ContentChildren,args:[n.forwardRef(function(){return g})]}],disabled:[{type:n.Input}],valueChange:[{type:n.Output}],change:[{type:n.Output}]},t}(),g=function(){function t(t,e,o,i){this.buttonToggleGroup=t,this.changeDetectorRef=e,this.focusMonitor=o,this.element=i,this.change=new n.EventEmitter,this.isSingleSelector=!1,this._checked=!1,this._disabled=!1}return Object.defineProperty(t.prototype,"checked",{get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.isSelected(this):this._checked},set:function(t){var o=e.coerceBooleanProperty(t);o!==this._checked&&(this._checked=o,this.buttonToggleGroup&&this.buttonToggleGroup.syncButtonToggle(this,this._checked),this.changeDetectorRef.markForCheck())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=e.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.isSingleSelector=this.buttonToggleGroup&&!this.buttonToggleGroup.multiple,this.type=this.isSingleSelector?"radio":"checkbox",this.buttonToggleGroup&&this.buttonToggleGroup.isPrechecked(this)&&(this.checked=!0),this.focusMonitor.monitor(this.element.nativeElement,!0)},t.prototype.ngOnDestroy=function(){var t=this,e=this.buttonToggleGroup;this.focusMonitor.stopMonitoring(this.element.nativeElement),e&&e.isSelected(this)&&Promise.resolve().then(function(){return e.syncButtonToggle(t,!1)})},t.prototype.focus=function(){this.element.nativeElement.focus()},t.prototype.onToggleClick=function(){if(!this.disabled){var t=!!this.isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup.syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup.onTouched())),this.change.emit(new s(this,this.value))}},t.prototype.markForCheck=function(){this.changeDetectorRef.markForCheck()},t.decorators=[{type:n.Component,args:[{selector:"mc-button-toggle",template:'\n        <button\n            mc-button\n            type="button"\n            [disabled]="disabled"\n            [attr.tabindex]="disabled ? -1 : tabIndex"\n            (click)="onToggleClick()">\n            <ng-content></ng-content>\n        </button>\n    ',styles:[".mc-button-toggle-group{display:flex;flex-direction:row}.mc-button-toggle-group:not(.mc-button-toggle-vertical) .mc-button-toggle:not([disabled])+.mc-button-toggle:not([disabled]){margin-left:-1px}.mc-button-toggle-group .mc-button-toggle:first-of-type:not(:last-of-type)>.mc-button,.mc-button-toggle-group .mc-button-toggle:first-of-type:not(:last-of-type)>.mc-icon-button{border-bottom-right-radius:0;border-top-right-radius:0}.mc-button-toggle-group .mc-button-toggle:last-of-type:not(:first-of-type)>.mc-button,.mc-button-toggle-group .mc-button-toggle:last-of-type:not(:first-of-type)>.mc-icon-button{border-bottom-left-radius:0;border-top-left-radius:0}.mc-button-toggle-group .mc-button-toggle:not(:first-of-type):not(:last-of-type)>.mc-button,.mc-button-toggle-group .mc-button-toggle:not(:first-of-type):not(:last-of-type)>.mc-icon-button{border-radius:0}.mc-button-toggle-vertical{flex-direction:column}.mc-button-toggle-vertical .mc-button-toggle:not([disabled])+.mc-button-toggle:not([disabled]){margin-top:-1px}.mc-button-toggle-vertical .mc-button-toggle .mc-button,.mc-button-toggle-vertical .mc-button-toggle .mc-icon-button{width:100%}.mc-button-toggle-vertical .mc-button-toggle:first-child:not(:last-child)>.mc-button,.mc-button-toggle-vertical .mc-button-toggle:first-child:not(:last-child)>.mc-icon-button{border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-right-radius:3px}.mc-button-toggle-vertical .mc-button-toggle:last-child:not(:first-child)>.mc-button,.mc-button-toggle-vertical .mc-button-toggle:last-child:not(:first-child)>.mc-icon-button{border-top-right-radius:0;border-top-left-radius:0;border-bottom-left-radius:3px}.mc-button-toggle-vertical .mc-button-toggle:not(:first-child):not(:last-child)>.mc-button,.mc-button-toggle-vertical .mc-button-toggle:not(:first-child):not(:last-child)>.mc-icon-button{border-radius:0}"],encapsulation:n.ViewEncapsulation.None,exportAs:"mcButtonToggle",changeDetection:n.ChangeDetectionStrategy.OnPush,host:{"[class.mc-button-toggle-standalone]":"!buttonToggleGroup","[class.mc-button-toggle-checked]":"checked",class:"mc-button-toggle","[attr.tabindex]":"-1","[attr.disabled]":"disabled || null","(focus)":"focus()"}}]}],t.ctorParameters=function(){return[{type:a,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef},{type:r.FocusMonitor},{type:n.ElementRef}]},t.propDecorators={checked:[{type:n.Input}],mcButton:[{type:n.ViewChild,args:[c.McButton,{static:!1}]}],value:[{type:n.Input}],tabIndex:[{type:n.Input}],disabled:[{type:n.Input}],change:[{type:n.Output}]},t}(),h=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[l.McCommonModule,c.McButtonModule],exports:[l.McCommonModule,a,g],declarations:[a,g]}]}],t}();t.McButtonToggleModule=h,t.MC_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR=u,t.McButtonToggleChange=s,t.McButtonToggleGroup=a,t.McButtonToggle=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-button-toggle.umd.min.js.map
