/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/platform"),require("@angular/common"),require("@angular/core"),require("@ptsecurity/cdk/keycodes"),require("@angular/cdk/coercion"),require("@angular/forms"),require("@angular/cdk/bidi"),require("@angular/cdk/collections"),require("@ptsecurity/cdk/a11y"),require("@ptsecurity/mosaic/core"),require("@ptsecurity/mosaic/form-field"),require("rxjs"),require("rxjs/operators"),require("@ptsecurity/mosaic/icon")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/tags",["exports","@angular/cdk/platform","@angular/common","@angular/core","@ptsecurity/cdk/keycodes","@angular/cdk/coercion","@angular/forms","@angular/cdk/bidi","@angular/cdk/collections","@ptsecurity/cdk/a11y","@ptsecurity/mosaic/core","@ptsecurity/mosaic/form-field","rxjs","rxjs/operators","@ptsecurity/mosaic/icon"],e):(t=t||self,e((t.ng=t.ng||{},t.ng.mosaic=t.ng.mosaic||{},t.ng.mosaic.tags={}),t.ng.cdk.platform,t.ng.common,t.ng.core,t.ng.cdk.keycodes,t.ng.cdk.coercion,t.ng.forms,t.ng.cdk.bidi,t.ng.cdk.collections,t.ng.cdk.a11y,t.ng.mosaic.core,t.ng.mosaic.formField,t.rxjs,t.rxjs.operators,t.ng.mosaic.icon))}(this,function(t,e,n,i,o,s,r,a,c,l,u,p,h,d,g){"use strict";function f(t,e){function n(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(t,e){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},m=new i.InjectionToken("mc-tags-default-options"),b=function(){function t(t,e,n){void 0===n&&(n=!1),this.source=t,this.selected=e,this.isUserInput=n}return t}(),v=["mc-basic-tag"],C=function(){function t(){}return t.decorators=[{type:i.Directive,args:[{selector:"mc-tag-avatar, [mcTagAvatar]",host:{class:"mc-tag-avatar"}}]}],t}(),_=function(){function t(){}return t.decorators=[{type:i.Directive,args:[{selector:"mc-tag-trailing-icon, [mcTagTrailingIcon]",host:{class:"mc-tag-trailing-icon"}}]}],t}(),x=function(){function t(t){this._elementRef=t}return t}(),I=u.mixinColor(u.mixinDisabled(x)),S=function(t){function e(e,n,o){var s=t.call(this,e)||this;return s.elementRef=e,s.changeDetectorRef=n,s._ngZone=o,s.onFocus=new h.Subject,s.onBlur=new h.Subject,s.hasFocus=!1,s.tagListSelectable=!0,s.selectionChange=new i.EventEmitter,s.destroyed=new i.EventEmitter,s.removed=new i.EventEmitter,s._selected=!1,s._selectable=!0,s._removable=!0,s._disabled=!1,s.addHostClassName(),s.nativeElement=e.nativeElement,s}return f(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){var e=s.coerceBooleanProperty(t);e!==this._selected&&(this._selected=e,this.dispatchSelectionChange())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return void 0!==this._value?this._value:this.elementRef.nativeElement.textContent},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable&&this.tagListSelectable},set:function(t){this._selectable=s.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removable",{get:function(){return this._removable},set:function(t){this._removable=s.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabindex",{get:function(){return this.selectable?this.disabled?null:-1:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this.disabled&&(this._disabled=t)},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){this.addClassModificatorForIcons()},e.prototype.addClassModificatorForIcons=function(){var t=this.contentChildren.map(function(t){return t._elementRef.nativeElement});if(1===t.length){var e=t[0];e.previousElementSibling||e.nextElementSibling||(e.nextSibling&&(e.classList.add("mc-icon_left"),this.nativeElement.classList.add("mc-left-icon")),e.previousSibling&&(e.classList.add("mc-icon_right"),this.nativeElement.classList.add("mc-right-icon")))}else if(t.length>1){var n=t[0],i=t[1];n.classList.add("mc-icon_left"),i.classList.add("mc-icon_right")}},e.prototype.addHostClassName=function(){for(var t=0,e=v;t<e.length;t++){var n=e[t];if(this.elementRef.nativeElement.hasAttribute(n)||this.elementRef.nativeElement.tagName.toLowerCase()===n)return void this.elementRef.nativeElement.classList.add(n)}this.elementRef.nativeElement.classList.add("mc-standard-tag")},e.prototype.ngOnDestroy=function(){this.destroyed.emit({tag:this})},e.prototype.select=function(){this._selected||(this._selected=!0,this.dispatchSelectionChange())},e.prototype.deselect=function(){this._selected&&(this._selected=!1,this.dispatchSelectionChange())},e.prototype.selectViaInteraction=function(){this._selected||(this._selected=!0,this.dispatchSelectionChange(!0))},e.prototype.toggleSelected=function(t){return void 0===t&&(t=!1),this._selected=!this.selected,this.dispatchSelectionChange(t),this.selected},e.prototype.focus=function(){var t=this;this.selectable&&(this.hasFocus||(this.elementRef.nativeElement.focus(),this.onFocus.next({tag:this}),Promise.resolve().then(function(){t.hasFocus=!0,t.changeDetectorRef.markForCheck()})))},e.prototype.remove=function(){this.removable&&this.removed.emit({tag:this})},e.prototype.handleClick=function(t){this.disabled?t.preventDefault():t.stopPropagation()},e.prototype.handleKeydown=function(t){if(!this.disabled)switch(t.keyCode){case o.DELETE:case o.BACKSPACE:this.remove(),t.preventDefault();break;case o.SPACE:this.selectable&&this.toggleSelected(!0),t.preventDefault()}},e.prototype.blur=function(){var t=this;this._ngZone.onStable.asObservable().pipe(d.take(1)).subscribe(function(){t._ngZone.run(function(){t.hasFocus=!1,t.onBlur.next({tag:t})})})},e.prototype.dispatchSelectionChange=function(t){void 0===t&&(t=!1),this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})},e.decorators=[{type:i.Component,args:[{selector:"mc-tag, [mc-tag], mc-basic-tag, [mc-basic-tag]",exportAs:"mcTag",template:'<div class="mc-tag__wrapper"><span class="mc-tag__text"><ng-content></ng-content></span><ng-content select="[mc-icon]"></ng-content><div class="mc-tag-overlay"></div></div>',styles:[".mc-tag{position:relative;display:inline-block;overflow:hidden;margin:2px;height:24px;border-width:1px;border-style:solid;border-radius:4px;cursor:default;outline:0;box-sizing:border-box}.mc-tag.mc-left-icon{padding-left:3px}.mc-tag.mc-right-icon{padding-right:3px}.mc-tag__wrapper{display:flex;align-items:center;height:100%;flex:1 1 100%}.mc-tag__wrapper .mc-icon{display:flex;align-items:center;justify-content:center;flex-shrink:0;width:24px;height:24px}.mc-tag__wrapper .mc-icon_left{margin-right:3px}.mc-tag__wrapper .mc-icon_right{margin-left:3px}.mc-tag-overlay{position:absolute;top:-1px;left:-1px;right:-1px;bottom:-1px;pointer-events:none;border-radius:inherit}.mc-tag__text{margin-left:7px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}"],inputs:["color","disabled"],host:{class:"mc-tag","[attr.tabindex]":"tabindex","[attr.disabled]":"disabled || null","[class.mc-selected]":"selected","[class.mc-focused]":"hasFocus","[class.mc-tag-with-avatar]":"avatar","[class.mc-tag-with-trailing-icon]":"trailingIcon || removeIcon","[class.mc-tag-disabled]":"disabled","[class.mc-disabled]":"disabled","(click)":"handleClick($event)","(keydown)":"handleKeydown($event)","(focus)":"focus()","(blur)":"blur()"},changeDetection:i.ChangeDetectionStrategy.OnPush,encapsulation:i.ViewEncapsulation.None}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:i.NgZone}]},e.propDecorators={contentChildren:[{type:i.ContentChildren,args:[g.McIcon]}],avatar:[{type:i.ContentChild,args:[C,{static:!1}]}],trailingIcon:[{type:i.ContentChild,args:[_,{static:!1}]}],removeIcon:[{type:i.ContentChild,args:[i.forwardRef(function(){return T}),{static:!1}]}],selectionChange:[{type:i.Output}],destroyed:[{type:i.Output}],removed:[{type:i.Output}],selected:[{type:i.Input}],value:[{type:i.Input}],selectable:[{type:i.Input}],removable:[{type:i.Input}]},e}(I),T=function(){function t(t){this.parentTag=t}return t.prototype.focus=function(t){t.stopPropagation()},t.prototype.handleClick=function(t){this.parentTag.removable&&this.parentTag.remove(),t.stopPropagation()},t.decorators=[{type:i.Directive,args:[{selector:"[mcTagRemove]",host:{class:"mc-tag-remove mc-tag-trailing-icon","[attr.tabindex]":"-1","(click)":"handleClick($event)","(focus)":"focus($event)"}}]}],t.ctorParameters=function(){return[{type:S}]},t}(),E=function(){function t(t,e,n,i){this.defaultErrorStateMatcher=t,this.parentForm=e,this.parentFormGroup=n,this.ngControl=i}return t}(),O=u.mixinErrorState(E),k=0,w=function(){function t(t,e){this.source=t,this.value=e}return t}(),M=function(t){function e(e,n,o,s,r,a,c,l,u,p,d){var g=t.call(this,o,c,l,u)||this;return g.elementRef=e,g.changeDetectorRef=n,g.rawValidators=s,g.mcValidation=r,g.dir=a,g.ngModel=p,g.formControlName=d,g.controlType="mc-tag-list",g.valueChange=new i.EventEmitter,g.uid="mc-tag-list-"+k++,g.userTabIndex=null,g.tagChanges=new i.EventEmitter,g.orientation="horizontal",g.change=new i.EventEmitter,g._tabIndex=0,g._required=!1,g._disabled=!1,g._selectable=!0,g._multiple=!1,g.lastDestroyedTagIndex=null,g.destroyed=new h.Subject,g.onTouched=function(){},g.onChange=function(){},g._compareWith=function(t,e){return t===e},g.ngControl&&(g.ngControl.valueAccessor=g),g}return f(e,t),Object.defineProperty(e.prototype,"tagSelectionChanges",{get:function(){return h.merge.apply(void 0,this.tags.map(function(t){return t.selectionChange}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagFocusChanges",{get:function(){return h.merge.apply(void 0,this.tags.map(function(t){return t.onFocus}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagBlurChanges",{get:function(){return h.merge.apply(void 0,this.tags.map(function(t){return t.onBlur}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tagRemoveChanges",{get:function(){return h.merge.apply(void 0,this.tags.map(function(t){return t.destroyed}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.multiple?this.selectionModel.selected:this.selectionModel.selected[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canShowCleaner",{get:function(){return this.cleaner&&this.tags.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiple",{get:function(){return this._multiple},set:function(t){this._multiple=s.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"compareWith",{get:function(){return this._compareWith},set:function(t){this._compareWith=t,this.selectionModel&&this.initializeSelection()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){this.writeValue(t),this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.tagInput?this.tagInput.id:this.uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){this._required=s.coerceBooleanProperty(t),this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholder",{get:function(){return this.tagInput?this.tagInput.placeholder:this._placeholder},set:function(t){this._placeholder=t,this.stateChanges.next()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this.tagInput&&this.tagInput.focused||this.hasFocusedTag()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return(!this.tagInput||this.tagInput.empty)&&0===this.tags.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldLabelFloat",{get:function(){return!this.empty||this.focused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.ngControl?!!this.ngControl.disabled:this._disabled},set:function(t){this._disabled=s.coerceBooleanProperty(t),this.syncTagsDisabledState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){var e=this;this._selectable=s.coerceBooleanProperty(t),this.tags&&this.tags.forEach(function(t){return t.tagListSelectable=e._selectable})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tabIndex",{set:function(t){this.userTabIndex=t,this._tabIndex=t},enumerable:!0,configurable:!0}),e.prototype.ngAfterContentInit=function(){var t=this;this.mcValidation.useValidation&&u.setMosaicValidation(this),this.keyManager=new l.FocusKeyManager(this.tags).withVerticalOrientation().withHorizontalOrientation(this.dir?this.dir.value:"ltr"),this.dir&&this.dir.change.pipe(d.takeUntil(this.destroyed)).subscribe(function(e){return t.keyManager.withHorizontalOrientation(e)}),this.keyManager.tabOut.pipe(d.takeUntil(this.destroyed)).subscribe(function(){t._tabIndex=-1,setTimeout(function(){t._tabIndex=t.userTabIndex||0,t.changeDetectorRef.markForCheck()})}),this.tags.changes.pipe(d.startWith(null),d.takeUntil(this.destroyed)).subscribe(function(){t.disabled&&Promise.resolve().then(function(){t.syncTagsDisabledState()}),t.resetTags(),t.initializeSelection(),t.updateTabIndex(),t.updateFocusForDestroyedTags(),Promise.resolve().then(function(){t.tagChanges.emit(t.tags.toArray()),t.stateChanges.next(),t.propagateTagsChanges()})})},e.prototype.ngOnInit=function(){this.selectionModel=new c.SelectionModel(this.multiple,void 0,!1),this.stateChanges.next()},e.prototype.ngDoCheck=function(){this.ngControl&&this.updateErrorState()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.stateChanges.complete(),this.dropSubscriptions()},e.prototype.registerInput=function(t){var e=this;this.tagInput=t,this.ngControl&&t.ngControl&&t.ngControl.statusChanges.subscribe(function(){return e.ngControl.control.setErrors(t.ngControl.errors)})},e.prototype.writeValue=function(t){this.tags&&this.setSelectionByValue(t,!1)},e.prototype.registerOnChange=function(t){this.onChange=t},e.prototype.registerOnTouched=function(t){this.onTouched=t},e.prototype.setDisabledState=function(t){this.disabled=t,this.stateChanges.next()},e.prototype.onContainerClick=function(t){this.originatesFromTag(t)||this.focus()},e.prototype.focus=function(){this.disabled||this.tagInput&&this.tagInput.focused||(this.tags.length>0?(this.keyManager.setFirstItemActive(),this.stateChanges.next()):(this.focusInput(),this.stateChanges.next()))},e.prototype.focusInput=function(){this.tagInput&&this.tagInput.focus()},e.prototype.keydown=function(t){var e=t.target;t.keyCode===o.BACKSPACE&&this.isInputEmpty(e)?(this.keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mc-tag")&&(t.keyCode===o.HOME?(this.keyManager.setFirstItemActive(),t.preventDefault()):t.keyCode===o.END?(this.keyManager.setLastItemActive(),t.preventDefault()):this.keyManager.onKeydown(t),this.stateChanges.next())},e.prototype.setSelectionByValue=function(t,e){var n=this;if(void 0===e&&(e=!0),this.clearSelection(),this.tags.forEach(function(t){return t.deselect()}),Array.isArray(t))t.forEach(function(t){return n.selectValue(t,e)}),this.sortValues();else{var i=this.selectValue(t,e);i&&e&&this.keyManager.setActiveItem(i)}},e.prototype.blur=function(){var t=this;this.hasFocusedTag()||this.keyManager.setActiveItem(-1),this.disabled||(this.tagInput?setTimeout(function(){t.focused||t.markAsTouched()}):this.markAsTouched())},e.prototype.markAsTouched=function(){this.onTouched(),this.changeDetectorRef.markForCheck(),this.stateChanges.next()},e.prototype.updateTabIndex=function(){this._tabIndex=this.userTabIndex||(0===this.tags.length?-1:0)},e.prototype.updateFocusForDestroyedTags=function(){if(null!=this.lastDestroyedTagIndex)if(this.tags.length){var t=Math.min(this.lastDestroyedTagIndex,this.tags.length-1);this.keyManager.setActiveItem(t)}else this.focusInput();this.lastDestroyedTagIndex=null},e.prototype.isValidIndex=function(t){return t>=0&&t<this.tags.length},e.prototype.isInputEmpty=function(t){if(t&&"input"===t.nodeName.toLowerCase()){return!t.value}return!1},e.prototype.selectValue=function(t,e){var n=this;void 0===e&&(e=!0);var i=this.tags.find(function(e){return null!=e.value&&n._compareWith(e.value,t)});return i&&(e?i.selectViaInteraction():i.select(),this.selectionModel.select(i)),i},e.prototype.initializeSelection=function(){var t=this;Promise.resolve().then(function(){(t.ngControl||t._value)&&(t.setSelectionByValue(t.ngControl?t.ngControl.value:t._value,!1),t.stateChanges.next())})},e.prototype.clearSelection=function(t){this.selectionModel.clear(),this.tags.forEach(function(e){e!==t&&e.deselect()}),this.stateChanges.next()},e.prototype.sortValues=function(){var t=this;this._multiple&&(this.selectionModel.clear(),this.tags.forEach(function(e){e.selected&&t.selectionModel.select(e)}),this.stateChanges.next())},e.prototype.propagateChanges=function(t){var e=null;e=Array.isArray(this.selected)?this.selected.map(function(t){return t.value}):this.selected?this.selected.value:t,this._value=e,this.change.emit(new w(this,e)),this.valueChange.emit(e),this.onChange(e),this.changeDetectorRef.markForCheck()},e.prototype.propagateTagsChanges=function(){var t=this.tags.map(function(t){return t.value});this._value=t,this.change.emit(new w(this,t)),this.valueChange.emit(t),this.onChange(t),this.changeDetectorRef.markForCheck()},e.prototype.resetTags=function(){this.dropSubscriptions(),this.listenToTagsFocus(),this.listenToTagsSelection(),this.listenToTagsRemoved()},e.prototype.dropSubscriptions=function(){this.tagFocusSubscription&&(this.tagFocusSubscription.unsubscribe(),this.tagFocusSubscription=null),this.tagBlurSubscription&&(this.tagBlurSubscription.unsubscribe(),this.tagBlurSubscription=null),this.tagSelectionSubscription&&(this.tagSelectionSubscription.unsubscribe(),this.tagSelectionSubscription=null),this.tagRemoveSubscription&&(this.tagRemoveSubscription.unsubscribe(),this.tagRemoveSubscription=null)},e.prototype.listenToTagsSelection=function(){var t=this;this.tagSelectionSubscription=this.tagSelectionChanges.subscribe(function(e){e.source.selected?t.selectionModel.select(e.source):t.selectionModel.deselect(e.source),t.multiple||t.tags.forEach(function(e){!t.selectionModel.isSelected(e)&&e.selected&&e.deselect()}),e.isUserInput&&t.propagateChanges()})},e.prototype.listenToTagsFocus=function(){var t=this;this.tagFocusSubscription=this.tagFocusChanges.subscribe(function(e){var n=t.tags.toArray().indexOf(e.tag);t.isValidIndex(n)&&t.keyManager.updateActiveItem(n),t.stateChanges.next()}),this.tagBlurSubscription=this.tagBlurChanges.subscribe(function(){t.blur(),t.stateChanges.next()})},e.prototype.listenToTagsRemoved=function(){var t=this;this.tagRemoveSubscription=this.tagRemoveChanges.subscribe(function(e){var n=e.tag,i=t.tags.toArray().indexOf(e.tag);t.isValidIndex(i)&&n.hasFocus?t.lastDestroyedTagIndex=i:t.isValidIndex(i)&&!n.hasFocus&&t.focusInput()})},e.prototype.originatesFromTag=function(t){for(var e=t.target;e&&e!==this.elementRef.nativeElement;){if(e.classList.contains("mc-tag"))return!0;e=e.parentElement}return!1},e.prototype.hasFocusedTag=function(){return this.tags.some(function(t){return t.hasFocus})},e.prototype.syncTagsDisabledState=function(){var t=this;this.tags&&this.tags.forEach(function(e){e.disabled=t._disabled})},e.decorators=[{type:i.Component,args:[{selector:"mc-tag-list",exportAs:"mcTagList",template:'<div class="mc-tags-list__list-container"><ng-content></ng-content></div><div class="mc-tags-list__cleaner" *ngIf="canShowCleaner"><ng-content select="mc-cleaner"></ng-content></div>',host:{class:"mc-tag-list","[attr.tabindex]":"disabled ? null : _tabIndex","[class.mc-disabled]":"disabled","[class.mc-invalid]":"errorState","[class.mc-required]":"required","(focus)":"focus()","(blur)":"blur()","(keydown)":"keydown($event)","[id]":"uid"},providers:[{provide:p.McFormFieldControl,useExisting:e}],styles:[".mc-tag-list{display:flex;flex-direction:row}.mc-tag-input{border:none;outline:0;background:0 0}.mc-tags-list__list-container{display:flex;flex-wrap:wrap;flex:1 1 100%;min-width:0;min-height:28px;padding:1px 6px}.mc-tags-list__list-container .mc-tag-input{max-width:100%;flex:1 1 auto;height:22px;margin:2px 4px}.mc-tags-list__cleaner .mc-cleaner{height:30px}"],encapsulation:i.ViewEncapsulation.None,changeDetection:i.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:i.ChangeDetectorRef},{type:u.ErrorStateMatcher},{type:Array,decorators:[{type:i.Optional},{type:i.Inject,args:[r.NG_VALIDATORS]}]},{type:void 0,decorators:[{type:i.Optional},{type:i.Inject,args:[u.MC_VALIDATION]}]},{type:a.Directionality,decorators:[{type:i.Optional}]},{type:r.NgForm,decorators:[{type:i.Optional}]},{type:r.FormGroupDirective,decorators:[{type:i.Optional}]},{type:r.NgControl,decorators:[{type:i.Optional},{type:i.Self}]},{type:r.NgModel,decorators:[{type:i.Optional},{type:i.Self}]},{type:r.FormControlName,decorators:[{type:i.Optional},{type:i.Self}]}]},e.propDecorators={multiple:[{type:i.Input}],compareWith:[{type:i.Input}],value:[{type:i.Input}],required:[{type:i.Input}],placeholder:[{type:i.Input}],disabled:[{type:i.Input}],selectable:[{type:i.Input}],tabIndex:[{type:i.Input}],valueChange:[{type:i.Output}],errorStateMatcher:[{type:i.Input}],orientation:[{type:i.Input,args:["orientation"]}],change:[{type:i.Output}],cleaner:[{type:i.ContentChild,args:["mcTagListCleaner",{static:!0}]}],tags:[{type:i.ContentChildren,args:[S,{descendants:!0}]}]},e}(O),P=0,D=function(){function t(t,e,n,o){this.elementRef=t,this.renderer=e,this.defaultOptions=n,this.ngControl=o,this.focused=!1,this.separatorKeyCodes=this.defaultOptions.separatorKeyCodes,this.tagEnd=new i.EventEmitter,this.placeholder="",this.id="mc-tag-list-input-"+P++,this._addOnBlur=!0,this._disabled=!1,this.countOfSymbolsForUpdateWidth=3,this.inputElement=this.elementRef.nativeElement,this.setDefaultInputWidth()}return Object.defineProperty(t.prototype,"tagList",{set:function(t){t&&(this._tagList=t,this._tagList.registerInput(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"addOnBlur",{get:function(){return this._addOnBlur},set:function(t){this._addOnBlur=s.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled||this._tagList&&this._tagList.disabled},set:function(t){this._disabled=s.coerceBooleanProperty(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return!this.inputElement.value},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(){this._tagList.stateChanges.next()},t.prototype.keydown=function(t){this.emitTagEnd(t)},t.prototype.blur=function(){this.focused=!1,this._tagList.focused||(this.triggerValidation(),this._tagList.blur()),!this.addOnBlur||this.hasControl()&&this.ngControl.invalid||this.emitTagEnd(),this._tagList.stateChanges.next()},t.prototype.triggerValidation=function(){this.hasControl()&&this.ngControl.statusChanges.emit(this.ngControl.status)},t.prototype.emitTagEnd=function(t){!this.inputElement.value&&t&&this._tagList.keydown(t),t&&!this.isSeparatorKey(t)||(this.tagEnd.emit({input:this.inputElement,value:this.inputElement.value}),this.updateInputWidth(),t&&t.preventDefault())},t.prototype.onInput=function(){this.updateInputWidth(),this._tagList.stateChanges.next()},t.prototype.onPaste=function(t){var e=this;if(t.clipboardData){var n=t.clipboardData.getData("text");if(!n||0!==n.length){for(var i=[],o=0,s=this.separatorKeyCodes;o<s.length;o++){var r=s[o],a=this.separatorKeyToSymbol(r);if(n.search(a)>-1){i.push.apply(i,n.split(a));break}}0===i.length&&i.push(n),i.forEach(function(t){return e.tagEnd.emit({input:e.inputElement,value:t})}),this.updateInputWidth(),t.preventDefault(),t.stopPropagation()}}},t.prototype.updateInputWidth=function(){var t=this.inputElement.value.length;this.renderer.setStyle(this.inputElement,"max-width",0),this.oneSymbolWidth=this.inputElement.scrollWidth/t,this.renderer.setStyle(this.inputElement,"max-width",""),t>this.countOfSymbolsForUpdateWidth?this.renderer.setStyle(this.inputElement,"width",t*this.oneSymbolWidth+"px"):this.setDefaultInputWidth()},t.prototype.onFocus=function(){this.focused=!0,this._tagList.stateChanges.next()},t.prototype.focus=function(){this.inputElement.focus()},t.prototype.separatorKeyToSymbol=function(t){var e,n=(e={},e[o.ENTER]=/\r?\n/,e[o.TAB]=/\t/,e[o.SPACE]=/ /,e[o.COMMA]=/,/,e)[t];return n||t},t.prototype.hasControl=function(){return!!this.ngControl},t.prototype.setDefaultInputWidth=function(){this.renderer.setStyle(this.inputElement,"width","30px")},t.prototype.isSeparatorKey=function(t){return!o.hasModifierKey(t)&&this.separatorKeyCodes.indexOf(t.keyCode)>-1},t.decorators=[{type:i.Directive,args:[{selector:"input[mcTagInputFor]",exportAs:"mcTagInput, mcTagInputFor",host:{class:"mc-tag-input mc-input-element","[id]":"id","[attr.disabled]":"disabled || null","[attr.placeholder]":"placeholder || null","(keydown)":"keydown($event)","(blur)":"blur()","(focus)":"onFocus()","(input)":"onInput()","(paste)":"onPaste($event)"}}]}],t.ctorParameters=function(){return[{type:i.ElementRef},{type:i.Renderer2},{type:void 0,decorators:[{type:i.Inject,args:[m]}]},{type:r.NgControl,decorators:[{type:i.Optional},{type:i.Self}]}]},t.propDecorators={separatorKeyCodes:[{type:i.Input,args:["mcTagInputSeparatorKeyCodes"]}],tagEnd:[{type:i.Output,args:["mcTagInputTokenEnd"]}],placeholder:[{type:i.Input}],id:[{type:i.Input}],tagList:[{type:i.Input,args:["mcTagInputFor"]}],addOnBlur:[{type:i.Input,args:["mcTagInputAddOnBlur"]}],disabled:[{type:i.Input}]},t}(),F={separatorKeyCodes:[o.ENTER]},j=function(){function t(){}return t.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule,e.PlatformModule],exports:[M,S,D,_,C,T],declarations:[M,S,D,_,C,T],providers:[{provide:m,useValue:F}]}]}],t}();t.MC_TAGS_DEFAULT_OPTIONS=m,t.McTag=S,t.McTagAvatar=C,t.McTagBase=x,t.McTagInput=D,t.McTagList=M,t.McTagListBase=E,t.McTagListChange=w,t.McTagListMixinBase=O,t.McTagMixinBase=I,t.McTagRemove=T,t.McTagSelectionChange=b,t.McTagTrailingIcon=_,t.McTagsModule=j,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-tags.umd.min.js.map
