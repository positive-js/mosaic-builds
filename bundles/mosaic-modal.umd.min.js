/**
 * @license
 * Positive Technologies All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/cdk/overlay"),require("@angular/common"),require("@angular/core"),require("@ptsecurity/cdk/keycodes"),require("rxjs"),require("@angular/cdk/a11y"),require("@ptsecurity/mosaic/button"),require("@ptsecurity/mosaic/icon"),require("@angular/cdk/portal"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@ptsecurity/mosaic/modal",["exports","@angular/cdk/overlay","@angular/common","@angular/core","@ptsecurity/cdk/keycodes","rxjs","@angular/cdk/a11y","@ptsecurity/mosaic/button","@ptsecurity/mosaic/icon","@angular/cdk/portal","rxjs/operators"],e):(t=t||self,e((t.ng=t.ng||{},t.ng.mosaic=t.ng.mosaic||{},t.ng.mosaic.modal={}),t.ng.cdk.overlay,t.ng.common,t.ng.core,t.ng.cdk.keycodes,t.rxjs,t.ng.cdk.a11y,t.ng.mosaic.button,t.ng.mosaic.icon,t.ng.cdk.portal,t.rxjs.operators))}(this,function(t,e,n,o,i,a,r,c,s,l,m){"use strict";function p(t,e){function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function u(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then&&"function"==typeof t.catch}var d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},f=function(){return f=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},f.apply(this,arguments)},y=function(){function t(t){this.parentService=t,this.rootOpenModals=this.parentService?null:[],this.rootAfterAllClose=this.parentService?null:new a.Subject,this.rootRegisteredMetaMap=this.parentService?null:new Map}return Object.defineProperty(t.prototype,"afterAllClose",{get:function(){return this.parentService?this.parentService.afterAllClose:this.rootAfterAllClose},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"openModals",{get:function(){return this.parentService?this.parentService.openModals:this.rootOpenModals},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"registeredMetaMap",{get:function(){return this.parentService?this.parentService.registeredMetaMap:this.rootRegisteredMetaMap},enumerable:!0,configurable:!0}),t.prototype.registerModal=function(t){var e=this;if(!this.hasRegistered(t)){var n=t.afterOpen.subscribe(function(){return e.openModals.push(t)}),o=t.afterClose.subscribe(function(){return e.removeOpenModal(t)});this.registeredMetaMap.set(t,{modalRef:t,afterOpenSubscription:n,afterCloseSubscription:o})}},t.prototype.hasRegistered=function(t){return this.registeredMetaMap.has(t)},t.prototype.closeAll=function(){for(var t=this.openModals.length;t--;)this.openModals[t].close()},t.prototype.removeOpenModal=function(t){var e=this.openModals.indexOf(t);e>-1&&(this.openModals.splice(e,1),this.openModals.length||this.afterAllClose.next())},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:t,decorators:[{type:o.Optional},{type:o.SkipSelf}]}]},t}(),g=function(){function t(){}return t}(),h=function(){function t(t){this.document=t,this.lastPosition={x:-1,y:-1},this.listenDocumentClick()}return t.prototype.getLastClickPosition=function(){return this.lastPosition},t.prototype.listenDocumentClick=function(){var t=this;this.document.addEventListener("click",function(e){t.lastPosition={x:e.clientX,y:e.clientY}})},t}(),C=new h(document),b=function(t){function a(e,n,i,a,r,c,s,l){var m=t.call(this)||this;return m.overlay=e,m.renderer=n,m.cfr=i,m.elementRef=a,m.viewContainer=r,m.modalControl=c,m.changeDetector=s,m.document=l,m.mcModalType="default",m._mcVisible=!1,m.mcVisibleChange=new o.EventEmitter,m.mcZIndex=1e3,m.mcWidth=480,m.mcCloseByESC=!0,m._mcClosable=!0,m._mcMask=!0,m._mcMaskClosable=!1,m.mcAfterOpen=new o.EventEmitter,m.mcAfterClose=new o.EventEmitter,m.mcOkType="primary",m._mcOkLoading=!1,m.mcOnOk=new o.EventEmitter,m._mcCancelLoading=!1,m.mcOnCancel=new o.EventEmitter,m.transformOrigin="0px 0px 0px",m.mcGetContainer=function(){return m.overlay.create()},m}return p(a,t),Object.defineProperty(a.prototype,"mcVisible",{get:function(){return this._mcVisible},set:function(t){this._mcVisible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mcClosable",{get:function(){return this._mcClosable},set:function(t){this._mcClosable=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mcMask",{get:function(){return this._mcMask},set:function(t){this._mcMask=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mcMaskClosable",{get:function(){return this._mcMaskClosable},set:function(t){this._mcMaskClosable=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mcOkLoading",{get:function(){return this._mcOkLoading},set:function(t){this._mcOkLoading=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mcCancelLoading",{get:function(){return this._mcCancelLoading},set:function(t){this._mcCancelLoading=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"afterOpen",{get:function(){return this.mcAfterOpen.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"afterClose",{get:function(){return this.mcAfterClose.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"okText",{get:function(){return this.mcOkText},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"cancelText",{get:function(){return this.mcCancelText},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"hidden",{get:function(){return!this.mcVisible&&!this.animationState},enumerable:!0,configurable:!0}),a.prototype.ngOnInit=function(){this.isComponent(this.mcContent)&&this.createDynamicComponent(this.mcContent),this.isModalButtons(this.mcFooter)&&(this.mcFooter=this.formatModalButtons(this.mcFooter)),this.isComponent(this.mcComponent)&&this.createDynamicComponent(this.mcComponent),this.container="function"==typeof this.mcGetContainer?this.mcGetContainer():this.mcGetContainer,this.container instanceof HTMLElement?this.container.appendChild(this.elementRef.nativeElement):this.container instanceof e.OverlayRef&&this.container.overlayElement.appendChild(this.elementRef.nativeElement),this.modalControl.registerModal(this)},a.prototype.ngOnChanges=function(t){t.mcVisible&&this.handleVisibleStateChange(this.mcVisible,!t.mcVisible.firstChange)},a.prototype.ngAfterViewInit=function(){this.contentComponentRef&&this.bodyContainer.insert(this.contentComponentRef.hostView);for(var t=0,e=this.autoFocusedButtons.toArray();t<e.length;t++){var n=e[t];if(n.nativeElement.autofocus){n.nativeElement.focus();break}}},a.prototype.ngOnDestroy=function(){this.container instanceof e.OverlayRef&&this.container.dispose()},a.prototype.open=function(){this.changeVisibleFromInside(!0)},a.prototype.close=function(t){this.changeVisibleFromInside(!1,t)},a.prototype.destroy=function(t){this.close(t)},a.prototype.markForCheck=function(){this.changeDetector.markForCheck()},a.prototype.triggerOk=function(){this.onClickOkCancel("ok")},a.prototype.triggerCancel=function(){this.onClickOkCancel("cancel")},a.prototype.getInstance=function(){return this},a.prototype.getContentComponentRef=function(){return this.contentComponentRef},a.prototype.getContentComponent=function(){return this.contentComponentRef&&this.contentComponentRef.instance},a.prototype.getElement=function(){return this.elementRef&&this.elementRef.nativeElement},a.prototype.onClickMask=function(t){this.mcMask&&this.mcMaskClosable&&t.target.classList.contains("mc-modal-wrap")&&this.mcVisible&&this.onClickOkCancel("cancel")},a.prototype.isModalType=function(t){return this.mcModalType===t},a.prototype.onKeyDown=function(t){t.keyCode===i.ESCAPE&&this.container&&this.container instanceof e.OverlayRef&&(this.close(),t.preventDefault())},a.prototype.onClickCloseBtn=function(){this.mcVisible&&this.onClickOkCancel("cancel")},a.prototype.onClickOkCancel=function(t){var e=this,n={ok:this.mcOnOk,cancel:this.mcOnCancel}[t],i={ok:"mcOkLoading",cancel:"mcCancelLoading"}[t];if(n instanceof o.EventEmitter)n.emit(this.getContentComponent());else if("function"==typeof n){var a=n(this.getContentComponent()),r=function(t){return!1!==t&&e.close(t)};if(u(a)){this[i]=!0;var c=function(t){e[i]=!1,r(t)};a.then(c).catch(c)}else r(a)}},a.prototype.isNonEmptyString=function(t){return"string"==typeof t&&""!==t},a.prototype.isTemplateRef=function(t){return t instanceof o.TemplateRef},a.prototype.isComponent=function(t){return t instanceof o.Type},a.prototype.isModalButtons=function(t){return Array.isArray(t)&&t.length>0},a.prototype.getButtonCallableProp=function(t,e){var n=t[e],o=[];return this.contentComponentRef&&o.push(this.contentComponentRef.instance),"function"==typeof n?n.apply(t,o):n},a.prototype.onButtonClick=function(t){var e=this.getButtonCallableProp(t,"onClick");u(e)&&(t.loading=!0,e.then(function(){return t.loading=!1}).catch(function(){return t.loading=!1}))},a.prototype.handleVisibleStateChange=function(t,e,n){var o=this;return void 0===e&&(e=!0),t&&this.changeBodyOverflow(1),Promise.resolve(e&&this.animateTo(t)).then(function(){t?o.mcAfterOpen.emit():(o.mcAfterClose.emit(n),o.changeBodyOverflow())})},a.prototype.changeVisibleFromInside=function(t,e){return this.mcVisible!==t?(this.mcVisible=t,this.mcVisibleChange.emit(t),this.handleVisibleStateChange(t,!0,e)):Promise.resolve()},a.prototype.changeAnimationState=function(t){var e,n;this.animationState=t,t?(this.maskAnimationClassMap=(e={},e["fade-"+t]=!0,e["fade-"+t+"-active"]=!0,e),this.modalAnimationClassMap=(n={},n["zoom-"+t]=!0,n["zoom-"+t+"-active"]=!0,n)):this.maskAnimationClassMap=this.modalAnimationClassMap=null,this.contentComponentRef?this.contentComponentRef.changeDetectorRef.markForCheck():this.changeDetector.markForCheck()},a.prototype.animateTo=function(t){var e=this;return t&&window.setTimeout(function(){return e.updateTransformOrigin()}),this.changeAnimationState(t?"enter":"leave"),new Promise(function(t){return window.setTimeout(function(){e.changeAnimationState(null),t()},200)})},a.prototype.formatModalButtons=function(t){return t.map(function(t){return f({type:"default",size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1},t)})},a.prototype.createDynamicComponent=function(t){var e=this.cfr.resolveComponentFactory(t),n=o.Injector.create({providers:[{provide:g,useValue:this}],parent:this.viewContainer.injector});this.contentComponentRef=e.create(n),this.mcComponentParams&&Object.assign(this.contentComponentRef.instance,this.mcComponentParams),this.contentComponentRef.changeDetectorRef.detectChanges()},a.prototype.updateTransformOrigin=function(){var t=this.modalContainer.nativeElement,e=C.getLastClickPosition();e&&(this.transformOrigin=e.x-t.offsetLeft+"px "+(e.y-t.offsetTop)+"px 0px")},a.prototype.changeBodyOverflow=function(t){void 0===t&&(t=0),this.modalControl.openModals.length+t>0?this.renderer.setStyle(this.document.body,"overflow","hidden"):this.renderer.removeStyle(this.document.body,"overflow")},a.decorators=[{type:o.Component,args:[{selector:"mc-modal",template:'<ng-template #tplOriginContent><ng-content></ng-content></ng-template><div><div *ngIf="mcMask" class="mc-modal-mask" [ngClass]="maskAnimationClassMap" [class.mc-modal-mask-hidden]="hidden" [ngStyle]="mcMaskStyle" [style.zIndex]="mcZIndex"></div><div (mousedown)="onClickMask($event)" class="mc-modal-wrap {{ mcWrapClassName }}" [style.zIndex]="mcZIndex" [style.display]="hidden ? \'none\' : \'\'" tabindex="-1" role="dialog"><div #modalContainer class="mc-modal {{ mcClassName }}" [ngClass]="modalAnimationClassMap" [ngStyle]="mcStyle" [style.width]="mcWidth | toCssUnit" [style.transform-origin]="transformOrigin" role="document"><div class="mc-modal-content" cdkTrapFocus><button *ngIf="mcClosable" mc-button (click)="onClickCloseBtn()" class="mc-modal-close mc-button_transparent" aria-label="Close"><i mc-icon="mc-close-L_16" class="mc-icon mc-icon_light" color="second"></i></button><ng-container [ngSwitch]="true"><ng-container *ngSwitchCase="isModalType(\'default\')" [ngTemplateOutlet]="tplContentDefault"></ng-container><ng-container *ngSwitchCase="isModalType(\'confirm\')" [ngTemplateOutlet]="tplContentConfirm"></ng-container><ng-container *ngSwitchCase="isModalType(\'custom\')" [ngTemplateOutlet]="tplContentCustom"></ng-container></ng-container></div></div></div></div><ng-template #tplContentCustom><ng-container #bodyContainer></ng-container></ng-template><ng-template #tplContentDefault><div *ngIf="mcTitle" class="mc-modal-header"><div class="mc-modal-title"><ng-container [ngSwitch]="true"><ng-container *ngSwitchCase="isTemplateRef(mcTitle)" [ngTemplateOutlet]="mcTitle"></ng-container><ng-container *ngSwitchCase="isNonEmptyString(mcTitle)"><div [innerHTML]="mcTitle"></div></ng-container></ng-container></div></div><div class="mc-modal-body" [ngStyle]="mcBodyStyle"><ng-container #bodyContainer><ng-container *ngIf="!isComponent(mcContent)" [ngSwitch]="true"><ng-container *ngSwitchCase="isTemplateRef(mcContent)" [ngTemplateOutlet]="mcContent"></ng-container><ng-container *ngSwitchCase="isNonEmptyString(mcContent)"><div [innerHTML]="mcContent"></div></ng-container><ng-container *ngSwitchDefault [ngTemplateOutlet]="tplOriginContent"></ng-container></ng-container></ng-container></div><div *ngIf="mcFooter !== null" class="mc-modal-footer"><ng-container [ngSwitch]="true"><ng-container *ngSwitchCase="isTemplateRef(mcFooter)" [ngTemplateOutlet]="mcFooter"></ng-container><ng-container *ngSwitchCase="isNonEmptyString(mcFooter)"><div [innerHTML]="mcFooter"></div></ng-container><ng-container *ngSwitchCase="isModalButtons(mcFooter)"><ng-container *ngFor="let button of mcFooter"><button mc-button #autoFocusedButton [attr.autofocus]="button.autoFocus" *ngIf="getButtonCallableProp(button, \'show\')" [disabled]="getButtonCallableProp(button, \'disabled\')" [class.mc-progress]="getButtonCallableProp(button, \'loading\')" (click)="onButtonClick(button)" [color]="button.type">{{ button.label }}</button></ng-container></ng-container><ng-container *ngSwitchDefault><button #autoFocusedButton [attr.autofocus]="true" *ngIf="mcOkText !== null" mc-button color="primary" (click)="onClickOkCancel(\'ok\')">{{ okText }}</button> <button *ngIf="mcCancelText!==null" mc-button (click)="onClickOkCancel(\'cancel\')">{{ cancelText }}</button></ng-container></ng-container></div></ng-template><ng-template #tplContentConfirm><div class="mc-modal-body" [ngStyle]="mcBodyStyle"><div class="mc-confirm-body-wrapper"><div class="mc-confirm-body"><div class="mc-confirm-content"><ng-container #bodyContainer><ng-container *ngIf="!isComponent(mcContent)" [ngSwitch]="true"><ng-container *ngSwitchCase="isTemplateRef(mcContent)" [ngTemplateOutlet]="mcContent"></ng-container><ng-container *ngSwitchCase="isNonEmptyString(mcContent)"><div [innerHTML]="mcContent"></div></ng-container><ng-container *ngSwitchDefault [ngTemplateOutlet]="tplOriginContent"></ng-container></ng-container></ng-container></div></div></div></div><div class="mc-confirm-btns"><button mc-button #autoFocusedButton [color]="mcOkType" [attr.autofocus]="true" *ngIf="mcOkText !== \'\'" (click)="onClickOkCancel(\'ok\')">{{ okText }}</button> <button mc-button color="second" *ngIf="mcCancelText!==\'\'" (click)="onClickOkCancel(\'cancel\')">{{ cancelText }}</button></div></ng-template>',styles:['@keyframes mcFadeIn{0%{opacity:0}100%{opacity:1}}@keyframes mcFadeOut{0%{opacity:1}100%{opacity:0}}@keyframes mcZoomIn{0%{opacity:0;transform:translate(0,-25%)}100%{opacity:1;transform:scale(1)}}@keyframes mcZoomOut{0%{transform:scale(1)}100%{opacity:0;transform:translate(0,-30%)}}.fade-appear,.fade-enter{animation-duration:.3s;animation-fill-mode:both;animation-play-state:paused}.fade-leave{animation-duration:.3s;animation-fill-mode:both;animation-play-state:paused}.fade-appear.fade-appear-active,.fade-enter.fade-enter-active{animation-name:mcFadeIn;animation-play-state:running}.fade-leave.fade-leave-active{animation-name:mcFadeOut;animation-play-state:running;pointer-events:none}.className-appear,.className-enter{opacity:0;animation-timing-function:ease-out}.className-leave{animation-timing-function:ease-out}.zoom-appear,.zoom-enter{animation-duration:.3s;animation-fill-mode:both;animation-play-state:paused}.zoom-leave{animation-duration:.3s;animation-fill-mode:both;animation-play-state:paused}.zoom-appear.zoom-appear-active,.zoom-enter.zoom-enter-active{animation-name:mcZoomIn;animation-play-state:running}.zoom-leave.zoom-leave-active{animation-name:mcZoomOut;animation-play-state:running;pointer-events:none}.className-appear,.className-enter{transform:translate(0,-25%);animation-timing-function:cubic-bezier(.075,.82,.165,1)}.className-leave{transform:translate(0,0);animation-timing-function:cubic-bezier(.785,.135,.15,.86)}.mc-confirm .mc-modal-header{display:none}.mc-confirm .mc-modal-close{display:none}.mc-confirm .mc-modal-body{padding:24px}.mc-confirm-body-wrapper{zoom:1}.mc-confirm-body-wrapper:after,.mc-confirm-body-wrapper:before{content:"";display:table}.mc-confirm-body-wrapper:after{clear:both}.mc-confirm-body .mc-confirm-title{display:block;overflow:auto}.mc-confirm .mc-confirm-btns{border-radius:0 0 4px 4px;text-align:right}.mc-confirm .mc-confirm-btns button+button{margin:16px 16px 16px}.mc-modal{box-sizing:border-box;position:relative;top:48px;width:auto;margin:0 auto;padding:0 0 24px 0;list-style:none}.mc-modal.zoom-appear,.mc-modal.zoom-enter{animation-duration:.3s;transform:none;opacity:0}.mc-modal .mc-modal-close{position:absolute;z-index:10;top:0;right:0;width:56px;height:56px}.mc-modal-wrap{position:fixed;z-index:1000;top:0;right:0;bottom:0;left:0;overflow:auto;-webkit-overflow-scrolling:touch;outline:0}.mc-modal-title{margin:0}.mc-modal-content{position:relative;border-radius:4px;background-clip:padding-box;background-color:#fff}.mc-modal-header{padding:14px 16px;display:block;border-radius:4px 4px 0 0}.mc-modal-body{display:block;padding:16px 24px 24px 24px;max-height:calc(100vh - 260px);word-wrap:break-word;overflow-y:auto}.mc-modal-footer{display:block;padding:16px 16px;border-radius:0 0 4px 4px;text-align:right}.mc-modal-footer button+button{margin-left:16px;margin-bottom:0}.mc-modal-mask{position:fixed;z-index:1000;top:0;right:0;left:0;bottom:0;height:100%;background-color:rgba(0,0,0,.5)}.mc-modal-mask.mc-modal-mask-hidden{display:none}.mc-modal-open{overflow:hidden}'],changeDetection:o.ChangeDetectionStrategy.OnPush,encapsulation:o.ViewEncapsulation.None,host:{"(keydown)":"onKeyDown($event)"}}]}],a.ctorParameters=function(){return[{type:e.Overlay},{type:o.Renderer2},{type:o.ComponentFactoryResolver},{type:o.ElementRef},{type:o.ViewContainerRef},{type:y},{type:o.ChangeDetectorRef},{type:void 0,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}]},a.propDecorators={mcModalType:[{type:o.Input}],mcComponent:[{type:o.Input}],mcContent:[{type:o.Input}],mcComponentParams:[{type:o.Input}],mcFooter:[{type:o.Input}],mcVisible:[{type:o.Input}],mcVisibleChange:[{type:o.Output}],mcZIndex:[{type:o.Input}],mcWidth:[{type:o.Input}],mcWrapClassName:[{type:o.Input}],mcClassName:[{type:o.Input}],mcStyle:[{type:o.Input}],mcTitle:[{type:o.Input}],mcCloseByESC:[{type:o.Input}],mcClosable:[{type:o.Input}],mcMask:[{type:o.Input}],mcMaskClosable:[{type:o.Input}],mcMaskStyle:[{type:o.Input}],mcBodyStyle:[{type:o.Input}],mcAfterOpen:[{type:o.Output}],mcAfterClose:[{type:o.Output}],mcOkText:[{type:o.Input}],mcOkType:[{type:o.Input}],mcOkLoading:[{type:o.Input}],mcOnOk:[{type:o.Input},{type:o.Output}],mcCancelText:[{type:o.Input}],mcCancelLoading:[{type:o.Input}],mcOnCancel:[{type:o.Input},{type:o.Output}],modalContainer:[{type:o.ViewChild,args:["modalContainer",{static:!0}]}],bodyContainer:[{type:o.ViewChild,args:["bodyContainer",{read:o.ViewContainerRef,static:!1}]}],autoFocusedButtons:[{type:o.ViewChildren,args:["autoFocusedButton",{read:o.ElementRef}]}],mcGetContainer:[{type:o.Input}]},a}(g),v=function(){function t(){}return t.prototype.transform=function(t,e){void 0===e&&(e="px");var n=+t;return isNaN(n)?""+t:""+n+e},t.decorators=[{type:o.Pipe,args:[{name:"toCssUnit"}]}],t}(),k=function(){function t(){}return t.decorators=[{type:o.Directive,args:[{selector:"[mc-modal-title], mc-modal-title, [mcModalTitle]",host:{class:"mc-modal-header mc-modal-title"}}]}],t}(),O=function(){function t(){}return t.decorators=[{type:o.Directive,args:[{selector:"[mc-modal-body], mc-modal-body, [mcModalBody]",host:{class:"mc-modal-body"}}]}],t}(),M=function(){function t(){}return t.decorators=[{type:o.Directive,args:[{selector:"[mc-modal-footer], mc-modal-footer, [mcModalFooter]",host:{class:"mc-modal-footer"}}]}],t}(),w=function(){function t(t,e){var n=this;void 0===e&&(e={}),this.overlay=t,this.createModal(),"mcGetContainer"in e||(e.mcGetContainer=void 0),this.changeProps(e),this.modalRef.instance.open(),this.modalRef.instance.mcAfterClose.subscribe(function(){return n.destroyModal()}),this.overlayRef.keydownEvents().pipe(m.filter(function(t){return t.keyCode===i.ESCAPE&&e.mcCloseByESC})).subscribe(function(){return n.modalRef.instance.close()})}return t.prototype.getInstance=function(){return this.modalRef&&this.modalRef.instance},t.prototype.destroyModal=function(){this.modalRef&&(this.overlayRef.dispose(),this.modalRef=null)},t.prototype.changeProps=function(t){this.modalRef&&Object.assign(this.modalRef.instance,t)},t.prototype.createModal=function(){this.overlayRef=this.overlay.create(),this.modalRef=this.overlayRef.attach(new l.ComponentPortal(b))},t}(),x=function(){function t(t,e){this.overlay=t,this.modalControl=e}return Object.defineProperty(t.prototype,"openModals",{get:function(){return this.modalControl.openModals},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterAllClose",{get:function(){return this.modalControl.afterAllClose.asObservable()},enumerable:!0,configurable:!0}),t.prototype.closeAll=function(){this.modalControl.closeAll()},t.prototype.create=function(t){return void 0===t&&(t={}),"function"!=typeof t.mcOnCancel&&(t.mcOnCancel=function(){}),"mcCloseByESC"in t||(t.mcCloseByESC=!0),"mcWidth"in t||(t.mcWidth=480),new w(this.overlay,t).getInstance()},t.prototype.confirm=function(t,e){return void 0===t&&(t={}),void 0===e&&(e="confirm"),"mcFooter"in t&&console.warn('The Confirm-Modal doesn\'t support "mcFooter", this property will be ignored.'),"function"!=typeof t.mcOnOk&&(t.mcOnOk=function(){}),t.mcModalType="confirm",t.mcClassName="mc-confirm mc-confirm-"+e+" "+(t.mcClassName||""),this.create(t)},t.prototype.open=function(t){return void 0===t&&(t={}),t.mcModalType="custom",this.create(t)},t.prototype.success=function(t){return void 0===t&&(t={}),this.simpleConfirm(t,"success")},t.prototype.delete=function(t){return void 0===t&&(t={}),this.simpleConfirm(t,"warn")},t.prototype.simpleConfirm=function(t,e){return void 0===t&&(t={}),"mcCancelText"in t||(t.mcCancelText=null),this.confirm(t,e)},t.decorators=[{type:o.Injectable}],t.ctorParameters=function(){return[{type:e.Overlay},{type:y}]},t}(),S=function(){function t(){}return t.decorators=[{type:o.NgModule,args:[{imports:[n.CommonModule,e.OverlayModule,r.A11yModule,c.McButtonModule,s.McIconModule],exports:[b,k,O,M],declarations:[b,k,O,M,v],entryComponents:[b],providers:[y,x]}]}],t}();t.McModalComponent=b,t.McModalModule=S,t.McModalRef=g,t.McModalService=x,t.ɵa28=y,t.ɵb28=k,t.ɵc28=O,t.ɵd28=M,t.ɵe28=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mosaic-modal.umd.min.js.map
