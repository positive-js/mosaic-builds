// Import all the theming
@keyframes mc-progress {
    from {
        background-position: 0 0;
    }

    to {
        background-position: 29px 0;
    }
}

.mc-progress {
    position: relative;

    &:after {
        content: '';
        position: absolute;

        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        $lighter: transparent;
        $darker: rgba(0, 0, 0, .05);
        background: linear-gradient(
                135deg,
                $darker 10px, $lighter 10px,
                $lighter 20px, $darker 20px,
                $darker 30px, $lighter 30px
        ) repeat;
        background-size: 29px 29px;
        animation: mc-progress 1s linear infinite;
    }
}


@mixin cdk-a11y {

    .cdk-visually-hidden {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;

        // Avoid browsers rendering the focus ring in some cases.
        outline: 0;

        // Avoid some cases where the browser will still render the native controls (see #9049).
        -webkit-appearance: none;
        -moz-appearance: none;
    }
}

@mixin cdk-high-contrast($target: active) {
    @media screen and (-ms-high-contrast: $target) {
        @content;
    }
}

// We want overlays to always appear over user content, so set a baseline
// very high z-index for the overlay container, which is where we create the new
// stacking context for all overlays.
$cdk-z-index-overlay-container: 1000;
$cdk-z-index-overlay: 1000;
$cdk-z-index-overlay-backdrop: 1000;

// Background color for all of the backdrops
$cdk-overlay-dark-backdrop-background: rgba(0, 0, 0, 0.288);

// Default backdrop animation is based on the Material Design swift-ease-out.
$backdrop-animation-duration: 400ms !default;
$backdrop-animation-timing-function: cubic-bezier(0.25, 0.8, 0.25, 1) !default;

@mixin cdk-overlay() {
    .cdk-overlay-container, .cdk-global-overlay-wrapper {
        // Disable events from being captured on the overlay container.
        pointer-events: none;

        // The container should be the size of the viewport.
        top: 0;
        left: 0;
        height: 100%;
        width: 100%;
    }

    // The overlay-container is an invisible element which contains all individual overlays.
    .cdk-overlay-container {
        position: fixed;
        z-index: $cdk-z-index-overlay-container;

        &:empty {
            // Hide the element when it doesn't have any child nodes. This doesn't
            // include overlays that have been detached, rather than disposed.
            display: none;
        }
    }

    // We use an extra wrapper element in order to use make the overlay itself a flex item.
    // This makes centering the overlay easy without running into the subpixel rendering
    // problems tied to using `transform` and without interfering with the other position
    // strategies.
    .cdk-global-overlay-wrapper {
        display: flex;
        position: absolute;
        z-index: $cdk-z-index-overlay;
    }

    // A single overlay pane.
    .cdk-overlay-pane {
        // Note: it's important for this one to start off `absolute`,
        // in order for us to be able to measure it correctly.
        position: absolute;
        pointer-events: auto;
        box-sizing: border-box;
        z-index: $cdk-z-index-overlay;

        // For connected-position overlays, we set `display: flex` in
        // order to force `max-width` and `max-height` to take effect.
        display: flex;
        max-width: 100%;
        max-height: 100%;
    }

    .cdk-overlay-backdrop {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;

        z-index: $cdk-z-index-overlay-backdrop;
        pointer-events: auto;
        -webkit-tap-highlight-color: transparent;
        transition: opacity $backdrop-animation-duration $backdrop-animation-timing-function;
        opacity: 0;

        &.cdk-overlay-backdrop-showing {
            opacity: 1;

            // In high contrast mode the rgba background will become solid so we need to fall back
            // to making it opaque using `opacity`. Note that we can't use the `cdk-high-contrast`
            // mixin, because we can't normalize the import path to the _a11y.scss both for the
            // source and when this file is distributed. See #10908.
            @media screen and (-ms-high-contrast: active) {
                opacity: 0.6;
            }
        }
    }

    .cdk-overlay-dark-backdrop {
        background: $cdk-overlay-dark-backdrop-background;
    }

    .cdk-overlay-transparent-backdrop {
        // Note: as of Firefox 57, having the backdrop be `background: none` will prevent it from
        // capturing the user's mouse scroll events. Since we also can't use something like
        // `rgba(0, 0, 0, 0)`, we work around the inconsistency by not setting the background at
        // all and using `opacity` to make the element transparent.
        &, &.cdk-overlay-backdrop-showing {
            opacity: 0;
        }
    }

    // Overlay parent element used with the connected position strategy. Used to constrain the
    // overlay element's size to fit within the viewport.
    .cdk-overlay-connected-position-bounding-box {
        position: absolute;
        z-index: $cdk-z-index-overlay;

        // We use `display: flex` on this element exclusively for centering connected overlays.
        // When *not* centering, a top/left/bottom/right will be set which overrides the normal
        // flex layout.
        display: flex;

        // We use the `column` direction here to avoid some flexbox issues in Edge
        // when using the "grow after open" options.
        flex-direction: column;

        // Add some dimensions so the element has an `innerText` which some people depend on in tests.
        min-width: 1px;
        min-height: 1px;
    }

    // Used when disabling global scrolling.
    .cdk-global-scrollblock {
        position: fixed;

        // Necessary for the content not to lose its width. Note that we're using 100%, instead of
        // 100vw, because 100vw includes the width plus the scrollbar, whereas 100% is the width
        // that the element had before we made it `fixed`.
        width: 100%;

        // Note: this will always add a scrollbar to whatever element it is on, which can
        // potentially result in double scrollbars. It shouldn't be an issue, because we won't
        // block scrolling on a page that doesn't have a scrollbar in the first place.
        overflow-y: scroll;
    }
}


$black-12-opacity: rgba(black, 0.12);
$black-6-opacity:  rgba(black, 0.06);

$white-12-opacity: rgba(white, 0.12);

$dark-text-default:     #4d4d4d;
$dark-text-secondary:   #999999;
$dark-text-disabled:    #b3b3b3;

$dark-icon-secondary:   #cccccc;

$light-text-default:    #f0f0f0;
$light-text-secondary:  #999999;
$light-text-disabled:   #999999;

$light-icon-secondary:  #999999;

$mc-blue: (
    40: #f5fafd,
    60: #ebf4fb,
    100: #d8eaf7,
    200: #aad1ec,
    300: #7fbae1,
    400: #57a4d7,
    500: #338fcc,
    560: #277bb3,
    600: #206ea2,
    700: #114e77,
    800: #07314d,
    A100: rgba(0, 153, 255, 0.15),
    A200: rgba(0, 153, 255, 0.3),
    contrast: (
        40: $dark-text-default,
        60: $dark-text-default,
        100: $dark-text-default,
        200: $dark-text-default,
        300: $dark-text-default,
        400: white,
        500: white,
        560: white,
        600: white,
        700: white,
        800: white,
        A100: $dark-text-default,
        A200: white,
    )
);

$mc-green: (
    40: #f6fbf4,
    60: #edf8e9,
    100: #dcf1d4,
    200: #b4dea4,
    300: #8fcc79,
    400: #6fba53,
    500: #52a832,
    560: #449327,
    600: #3b8520,
    700: #276211,
    800: #163f07,
    A100: rgba(68, 255, 0, 0.15),
    contrast: (
        40: $dark-text-default,
        60: $dark-text-default,
        100: $dark-text-default,
        200: $dark-text-default,
        300: $dark-text-default,
        400: white,
        500: white,
        560: white,
        600: white,
        700: white,
        800: white,
        A100: $dark-text-default,
    )
);

$mc-red: (
    40: #fef7f6,
    60: #fcefec,
    100: #fadeda,
    200: #f4b7ae,
    300: #ed9284,
    400: #e76e5c,
    500: #e04d36,
    560: #c43e29,
    600: #b23522,
    700: #832112,
    800: #541208,
    A100: rgba(224, 79, 56, 0.15),
    contrast: (
        40: $dark-text-default,
        60: $dark-text-default,
        100: $dark-text-default,
        200: $dark-text-default,
        300: $dark-text-default,
        400: white,
        500: white,
        560: white,
        600: white,
        700: white,
        800: white,
        A100: $dark-text-default,
    )
);

$mc-grey: (
    40: #f5f5f5,
    60: #f0f0f0,
    100: #e6e6e6,
    200: #cccccc,
    300: #b3b3b3,
    400: #999999,
    500: #808080,
    560: #707070,
    600: #666666,
    700: #4d4d4d,
    800: #333333,
    A40: rgba(0, 0, 0, 0.04),
    A60: rgba(0, 0, 0, 0.06),
    A100: rgba(0, 0, 0, 0.1),
    A200: rgba(0, 0, 0, 0.2),
    A300: rgba(0, 0, 0, 0.3),
    A500: rgba(0, 0, 0, 0.5),
    contrast: (
        40: $dark-text-default,
        60: $dark-text-default,
        100: $dark-text-default,
        200: $dark-text-default,
        300: $dark-text-default,
        400: white,
        500: white,
        560: white,
        600: white,
        700: white,
        800: white,
    )
);

$mc-yellow: (
    40: #fdfaf3,
    60: #fcf5e8,
    100: #f8ebd1,
    200: #f0d49b,
    300: #e7bd68,
    400: #dfa739,
    500: #d6930d,
    560: #bb800a,
    600: #aa7408,
    700: #7d5504,
    800: #503602,
    A100: rgba(255, 170, 0, 0.15),
    contrast: (
        40: $dark-text-default,
        60: $dark-text-default,
        100: $dark-text-default,
        200: $dark-text-default,
        300: $dark-text-default,
        400: white,
        500: white,
        560: white,
        600: white,
        700: white,
        800: white,
        A100: $dark-text-default,
    )
);


$mc-light-theme-foreground: (
    base:              black, //скорей всего это fg-default-text
    disabled:          $dark-text-disabled,
    disabled-button:   rgba(black, 0.26),
    hint-text:         rgba(black, 0.38),
    icon:              rgba(black, 0.54),
    secondary-text:    rgba(black, 0.54), //скорей всего это fg-less-contrast-text

    // ↓ новое
    text:               $dark-text-default,
    less-contrast-text: $dark-text-secondary,
    disabled-text:      $dark-text-disabled,

    default-icon:       rgba(transparent, 0.45),
);

$mc-dark-theme-foreground: (
    base:               white,
    disabled:           rgba(white, 0.3),
    disabled-button:    rgba(white, 0.3),
    hint-text:          rgba(white, 0.3),
    icon:               white,
    secondary-text:     rgba(white, 0.7),

    // ↓ новое
    text:               $light-text-default,
    less-contrast-text: $light-text-secondary,
    disabled-text:      $light-text-disabled,

    default-icon:       rgba(white, 1),
);

$mc-light-theme-background: (
    disabled-button:      $black-12-opacity,
    selected-button:      grey,
    focused-button:       $black-6-opacity,
    disabled-list-option: #CCC,

    // ↓ новое
    background:           white,
    // todo not used
    bg-content:           map-get($mc-grey, 60),
    bg-dropdowns:         white,

    button-bg:            map-get($mc-grey, 60),
    button-border:        map-get($mc-grey, 200),
    disabled-overlay:     rgba(white, 0.3),

    hover:                rgba(black, 0.05),

    in-shadow:            inset 0 1px 2px 0 rgba(black, 0.2),
);

$mc-dark-theme-background: (
    disabled-button:      $white-12-opacity,
    selected-button:      grey,
    focused-button:       $black-6-opacity,
    disabled-list-option: #CCC,

    // ↓ новое
    background:           map-get($mc-grey, 800),
    // todo not used
    bg-content:           map-get($mc-grey,  60),
    bg-dropdowns:         #ffffff,

    // цвет бордера зависит от палитры
    button-bg:            map-get($mc-grey, 600),
    button-border:        map-get($mc-grey, 500),
    disabled-overlay:     rgba(black, 0.2),

    hover:                rgba(white, 0.05),

    in-shadow:            inset 1px 2px 2px 0 rgba(black, 0.2),
);



@function mc-contrast($palette, $hue) {
    @return map-get(map-get($palette, contrast), $hue);
}

@function mc-palette($base-palette, $lighter: 100, $default: 500, $darker: 700) {
    $result: map_merge($base-palette, (
        default: map-get($base-palette, $default),
        lighter: map-get($base-palette, $lighter),
        darker:  map-get($base-palette, $darker),

        default-contrast: mc-contrast($base-palette, $default),
        lighter-contrast: mc-contrast($base-palette, $lighter),
        darker-contrast:  mc-contrast($base-palette, $darker)
    ));

    // For each hue in the palette, add a "-contrast" color to the map.
    @each $hue, $color in $base-palette {
        $result: map_merge($result, (
            '#{$hue}-contrast': mc-contrast($base-palette, $hue)
        ));
    }

    @return $result;
}

@function mc-color($palette, $hue: default, $opacity: null) {
    // If hueKey is a number between zero and one, then it actually contains an
    // opacity value, so recall this function with the default hue and that given opacity.
    @if type-of($hue) == number and $hue >= 0 and $hue <= 1 {
        @return mc-color($palette, default, $hue);
    }

    $color: map-get($palette, $hue);
    $opacity: if($opacity == null, opacity($color), $opacity);

    @return rgba($color, $opacity);
}

// todo additional palette should be refactored asap (possibly to separated palette)
@function mc-light-theme(
    $primary,
    $second,
    $error,

    $info: mc-palette($mc-blue),
    $success: mc-palette($mc-green),
    $warning: mc-palette($mc-yellow)
) {
    @return (
        is-dark: false,

        primary: $primary,
        second: $second,
        error: $error,

        foreground: $mc-light-theme-foreground,
        background: $mc-light-theme-background,

        warning: $warning,
        success: $success,
        info: $info,
    );
}

@function mc-dark-theme(
    $primary,
    $second,
    $error,

    $info: mc-palette($mc-blue),
    $success: mc-palette($mc-green),
    $warning: mc-palette($mc-yellow)
) {
    @return (
        is-dark: true,

        primary: $primary,
        second: $second,
        error: $error,

        foreground: $mc-dark-theme-foreground,
        background: $mc-dark-theme-background,

        warning: $warning,
        success: $success,
        info: $info,
    );
}



@mixin mc-pseudo-checkbox-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);

    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-pseudo-checkbox {
        border-color: mc-color($second);
        background-color: map-get($background, background);;
    }

    .mc-checkbox-checkmark,
    .mc-checkbox-mixedmark {
        color: white;
    }

    .mc-pseudo-checkbox.mc-checked {
        border-color: mc-color($primary, if($is-dark-theme, lighter, darker));

        background: if($is-dark-theme, mc-color($primary, 600), mc-color($primary));
    }

    .mc-pseudo-checkbox.mc-disabled {
        border-color: map-get($background, button-border);

        background-color: map-get($background, button-bg);

        .mc-checkbox-checkmark,
        .mc-checkbox-mixedmark {
            color: map-get($foreground, disabled-text);
        }
    }
}



$typography-font-weight-values: (
    thin: 100,
    light: 300,
    regular: 400,
    medium: 500,
    bold: 700,
    black: 900
) !default;


// TODO add caption-height
$fonts: (
    base: (
        font-family: #{Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif}
    ),
    monospace: (
        font-family: #{'Roboto Mono', 'Consolas', 'Menlo', 'Monaco', monospace}
    )
);

$base-font-size: 15px !default;




@function mc-typography-level(
    $font-size,
    $line-height: $font-size,
    $letter-spacing: normal,
    $font-weight: normal,
    $font-family: null,
    $text-transform: null
) {
    @return (
        font-size: $font-size,
        line-height: $line-height,
        font-weight: $font-weight,
        font-family: $font-family,
        letter-spacing: $letter-spacing,
        text-transform: $text-transform
    );
}

@function _mc-get-type-value($config, $level, $name) {
    @return map-get(map-get($config, $level), $name);
}

@function mc-font-size($config, $level) {
    @return _mc-get-type-value($config, $level, font-size);
}

@function mc-line-height($config, $level) {
    @return _mc-get-type-value($config, $level, line-height);
}

@function mc-font-weight($config, $level) {
    @return _mc-get-type-value($config, $level, font-weight);
}

@function mc-letter-spacing($config, $level) {
    @return _mc-get-type-value($config, $level, letter-spacing);
}

@function mc-text-transform($config, $level) {
    @return _mc-get-type-value($config, $level, text-transform);
}

// Gets the font-family from a typography config and removes the quotes around it.
@function mc-font-family($config, $level: null) {
    $font-family: map-get($config, font-family);

    @if $level != null {
        $font-family: _mc-get-type-value($config, $level, font-family);
    }

    @return unquote($font-family);
}

@mixin mc-typography-level-to-styles($config, $level) {
    $font-size: mc-font-size($config, $level);
    $font-weight: mc-font-weight($config, $level);
    $line-height: mc-line-height($config, $level);
    $font-family: mc-font-family($config, $level);
    $text-transform: mc-font-family($config, $level);

    font: $font-weight #{$font-size}/#{$line-height} $font-family;
    letter-spacing: mc-letter-spacing($config, $level);
    text-transform: mc-text-transform($config, $level);
}

@mixin mc-base-typography($config) {
    .mc-display-1 {
        @include mc-typography-level-to-styles($config, display-1);
    }

    .mc-display-2 {
        @include mc-typography-level-to-styles($config, display-2);
    }

    .mc-display-3 {
        @include mc-typography-level-to-styles($config, display-3);
    }

    .mc-headline {
        @include mc-typography-level-to-styles($config, headline);
    }

    .mc-subheading {
        @include mc-typography-level-to-styles($config, subheading);
    }

    .mc-title {
        @include mc-typography-level-to-styles($config, title);
    }

    .mc-body {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-body_strong {
        @include mc-typography-level-to-styles($config, body-strong);
    }

    .mc-body_caps {
        @include mc-typography-level-to-styles($config, body-caps);
    }

    .mc-body_mono {
        @include mc-typography-level-to-styles($config, body-mono);
    }

    .mc-caption {
        @include mc-typography-level-to-styles($config, caption);
    }

    .mc-caption_caps {
        @include mc-typography-level-to-styles($config, caption-caps);
    }

    .mc-caption_mono {
        @include mc-typography-level-to-styles($config, caption-mono);
    }

    .mc-small-text {
        @include mc-typography-level-to-styles($config, small-text);
    }

    .mc-extra-small-text {
        @include mc-typography-level-to-styles($config, extra-small-text);
    }
}



@function mc-typography-config(
    $font-family:   map-get(map-get($fonts, base), font-family),
    $font-family-mono:   map-get(map-get($fonts, monospace), font-family),

    $display-1:     mc-typography-level(56px, 76px, -0.4px),
    $display-2:     mc-typography-level(45px, 56px),
    $display-3:     mc-typography-level(34px, 44px, 0.25px),

    $headline:      mc-typography-level(24px, 32px),
    $title:         mc-typography-level(20px, 28px, 0.15px, 500),
    $subheading:    mc-typography-level(15px, 20px, 0.15px, 500),

    $body:          mc-typography-level(15px, 20px, 0.15px),
    $body-strong:   mc-typography-level(15px, 20px, 0.15px, 500),
    $body-caps:     mc-typography-level(15px, 20px, 1.7px, normal, $font-family, uppercase),
    $body-mono:     mc-typography-level(15px, 20px, normal, normal, $font-family-mono),

    $caption:       mc-typography-level(13px, 16px, 0.25px),
    $caption-caps:  mc-typography-level(13px, 16px, 1.5px, normal, $font-family, uppercase),
    $caption-mono:  mc-typography-level(13px, 16px, normal, normal, $font-family-mono),

    $small-text:    mc-typography-level(13px, 16px, 0.25px),
    $extra-small-text:    mc-typography-level(11px, 16px, 0.22px)
) {

    $config: (
        display-1:      $display-1,
        display-2:      $display-2,
        display-3:      $display-3,

        headline:       $headline,
        subheading:     $subheading,
        title:          $title,

        body:           $body,
        body-strong:    $body-strong,
        body-caps:      $body-caps,
        body-mono:      $body-mono,

        caption:        $caption,
        caption-caps:   $caption-caps,
        caption-mono:   $caption-mono,

        small-text:     $small-text,
        extra-small-text: $extra-small-text
    );

    @each $key, $level in $config {
        @if map-get($level, font-family) == null {
            $new-level: map-merge($level, (font-family: $font-family));
            $config: map-merge($config, ($key: $new-level));
        }
    }

    // Add the base font family to the config.
    @return map-merge($config, (font-family: $font-family));
}






.mc-badge {
    display: inline-block;
    min-width: 10px;
    padding: 4px 8px;
    vertical-align: middle;
    white-space: nowrap;
    text-align: center;
    border-radius: 4px;
}

@mixin mc-badge-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);
    $warning: map-get($theme, warning);
    $success: map-get($theme, success);
    $info: map-get($theme, info);

    .mc-badge {
        color: white;
        background-color: mc-color($second, 500);

        &__badge {
            // Empty badges collapse automatically (not available in IE8)
            &:empty {
                display: none;
            }
        }

        &__info {
            background-color: mc-color($info, 500);
        }

        &__primary {
            background-color: mc-color($primary, 500);
        }

        &__warning {
            background-color: mc-color($warning, 500);
        }

        &__error {
            background-color: mc-color($error, 500);
        }

        &__success {
            background-color: mc-color($success, 500);
        }

        &__transparent {
            color: mc-color($second, 800);
            background-color: transparent;
            box-shadow: inset 0 0.0.1-a73ab4cpx mc-color($second, 300);
        }

        &__light {
            color: mc-color($second, 800);
            background-color: mc-color($second, 100);
        }
    }
}

@mixin mc-badge-typography($config) {

    .mc-badge {
        @include mc-typography-level-to-styles($config, caption);

        &__caps {
            @include mc-typography-level-to-styles($config, caption-caps);
        }
    }
}






.mc-alert {
    display: flex;
    align-items: baseline;

    vertical-align: top;
    text-align: left;

    border: 1px solid transparent;
    border-radius: 4px;

    .mc-link {
        padding-left: 0;
    }

    .mc-alert__icon {
        margin-right: 8px;
    }

    &.mc-alert_small {
        // todo откуда такие паддинги ?
        padding: 11px 15px;

        &.mc-alert_dismissible {
            padding-right: 32px;
        }
    }

    &:not(.mc-alert_small) {
        // todo откуда такие паддинги ?
        padding: 13px 15px;

        &.mc-alert_dismissible {
            padding-right: 32px;
        }
    }
}

.mc-alert_dismissible {
    position: relative;

    .mc-alert__close {
        position: absolute;

        z-index: 10;
        right: 15px;

        border: 1px solid transparent;
        outline: 0;

        margin: 0;

        background: transparent;

        padding: 0;

        cursor: pointer;
        text-align: center;
    }

    &.mc-alert_small {
        .mc-alert__close {
            top: 10px;
        }
    }

    &:not(.mc-alert_small) {
        .mc-alert__close {
            top: 14px;
        }
    }
}

@mixin alert-theme($color, $is-dark) {
    background-color: mc-color($color, if($is-dark, darker, lighter));
    border-color: mc-color($color, if($is-dark, darker, default));

    .mc-alert__icon {
        color: mc-color($color, if($is-dark, default, darker));
    }
}

@mixin mc-alert-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $warning: map-get($theme, warning);
    $success: map-get($theme, success);
    $info: map-get($theme, info);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark: map-get($theme, is-dark);

    .mc-alert__close:focus {
        border: 1px solid mc-color($primary);
        box-shadow: 0 0.0.1-a73ab4cpx mc-color($primary);
        z-index: 1;
    }

    .mc-alert {
        color: mc-color($foreground, text);
    }

    .mc-alert_error {
        background-color: mc-color($error, if($is-dark, darker, lighter));
        // todo $error более темный в светлой теме
        border-color: mc-color($error, if($is-dark, darker, 200));

        .mc-alert__icon {
            color: mc-color($error, if($is-dark, default, 400));
        }
    }

    .mc-alert_warning {
        @include alert-theme($warning, $is-dark);
    }

    .mc-alert_success {
        @include alert-theme($success, $is-dark);
    }

    .mc-alert_info {
        @include alert-theme($info, $is-dark);
    }

    .mc-alert:not(.mc-alert_error):not(.mc-alert_warning):not(.mc-alert_success):not(.mc-alert_info) {
        background-color: mc-color($second, if($is-dark, darker, lighter));
        border-color: mc-color($second, if($is-dark, darker, 200));

        .mc-alert__icon {
            color: mc-color($second, if($is-dark, default, 400));
        }
    }
}

@mixin mc-alert-typography($config) {

    .mc-alert:not(.mc-alert_small) {
        @include mc-typography-level-to-styles($config, body);

        header {
            @include mc-typography-level-to-styles($config, subheading);
        }
    }

    .mc-alert.mc-alert_small {
        @include mc-typography-level-to-styles($config, caption);

        header {
            @include mc-typography-level-to-styles($config, caption);
        }

        .mc-link__text {
            @include mc-typography-level-to-styles($config, caption);
        }
    }

    .mc-icon {
        letter-spacing: unset;
    }
}

@mixin _mc-button-primary-color($palette, $foreground, $background) {
    border-color: map-get($palette, 560);
    background: mc-color($palette, 500);
    color: mc-contrast($palette, 500);

    .mc-button-overlay {
        background: transparent;
    }

    .mc-icon {
        color: mc-contrast($palette, 500);
    }

    &:hover,
    &.mc-hover {
        & .mc-button-overlay {
            background: map-get($background, hover);
        }
    }

    &:active,
    &.mc-active {
        border-color: darken(mc-color($palette, 560), 5);
        background: darken(mc-color($palette, 500), 5);
        box-shadow: map-get($background, in-shadow);
    }

    &.mc-disabled,
    &[disabled] {
        border-color: map-get($palette, 500);
        color: transparentize(mc-contrast($palette, 500), 0.5);

        & .mc-button-overlay {
            background: mc-color($background, disabled-overlay);
        }

        .mc-icon {
            color: transparentize(mc-contrast($palette, 500), 0.5);
        }
    }
}

@mixin _mc-button-second-color($palette, $foreground, $background) {
    border-color: mc-color($background, button-border);
    background: map-get($background, button-bg);
    color: map-get($foreground, text);

    .mc-icon {
        color: map-get($foreground, text);
    }

    &:hover,
    &.mc-hover {
        & .mc-button-overlay {
            background: map-get($background, hover);
        }
    }

    &:active,
    &.mc-active {
        border-color: darken(mc-color($background, button-border), 5);
        background: darken(map-get($background, button-bg), 5);
        box-shadow: map-get($background, in-shadow);
    }

    &.mc-disabled,
    &[disabled] {
        border-color: mc-color($background, button-bg);
        color: map-get($foreground, disabled-text);

        & .mc-button-overlay {
            background: mc-color($background, disabled-overlay);
        }

        .mc-icon {
            color: map-get($foreground, disabled-text);
        }
    }
}

@mixin _mc-button-error-color($second, $error, $foreground, $background) {
    @include _mc-button-second-color($second, $foreground, $background);

    color: mc-color($error);

    .mc-icon {
        color: mc-color($error, 400);
    }

    &.mc-disabled,
    &[disabled] {
        border-color: mc-color($background, button-bg);
        color: map-get($foreground, disabled-text);

        & .mc-button-overlay {
            background: mc-color($background, disabled-overlay);
        }

        .mc-icon {
            color: map-get($foreground, disabled-text);
        }
    }
}

@mixin _mc-button-theme-color($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);
    $is-dark: map-get($theme, is-dark);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    &.mc-primary {
        @include _mc-button-primary-color($primary, $foreground, $background);
    }

    &.mc-second {
        @include _mc-button-second-color($second, $foreground, $background);
    }

    &.mc-error {
        @include _mc-button-error-color($second, $error, $foreground, $background);
    }

    &.mc-primary,
    &.mc-second,
    &.mc-error {
        -webkit-font-smoothing: antialiased;

        &.cdk-keyboard-focused {
            $focus-color: mc-color($primary);

            border-color: $focus-color;
            box-shadow: 0 0.0.1-a73ab4cpx $focus-color;
        }
    }
}

@mixin mc-button-theme($theme) {
    .mc-button,
    .mc-icon-button {
        @include _mc-button-theme-color($theme);
    }
}

@mixin mc-button-typography($config) {
    .mc-button,
    .mc-icon-button {
        @include mc-typography-level-to-styles($config, body);

        &.mc-primary {
            @include mc-typography-level-to-styles($config, body-strong);
        }
    }

    .mc-icon-button.mc-button-wrapper {
        .mc-icon {
            line-height: mc-line-height($config, body);
        }
    }
}






@mixin mc-dropdown-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark: map-get($theme, is-dark);

    .mc-dropdown__panel {
        border-color: mc-color($second);

        // todo A-black-200 нет в палитре
        box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.2);

        background-color: if($is-dark, map-get($second, 700), map-get($background, background));
    }

    .mc-dropdown__item {
        color: mc-color($foreground, text);

        background: transparent;

        &:hover:not([disabled]),
        &.mc-hovered:not([disabled]) {
            background: mc-color($background, hover);
        }

        &.cdk-keyboard-focused {
            border-color: mc-color($primary);
            box-shadow: inset 0 0.0.1-a73ab4cpx mc-color($primary);
        }

        &[disabled] {
            color: mc-color($foreground, disabled-text);
        }

        .mc-dropdown__item-caption {
            color: mc-color($foreground, less-contrast-text);
        }
    }
}

@mixin mc-dropdown-typography($config) {
    .mc-dropdown__item,
    .mc-dropdown__content {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-dropdown__item-caption {
        @include mc-typography-level-to-styles($config, caption);
    }
}






@mixin _mc-link-dashes_mixin($color, $percentage: 66%, $opacity: 0.5) {
    background: linear-gradient(90deg, rgba($color, $opacity) $percentage, transparent 0) repeat-x;
    background-size: 5px 1px;
    // 1.29em это меньше line-height что бы было видно подчеркивание
    background-position: 0 1.29em;
}

@mixin mc-link-typography($config) {
    .mc-link {
        @include mc-typography-level-to-styles($config, body);
    }
}

@mixin mc-link-theme($theme) {
    $link: map-get($theme, primary);
    $foreground: map-get($theme, foreground);
    $link-disabled: mc-color($foreground, disabled-text);

    .mc-link {
        color: mc-color($link, 500);

        &.mc-visited,
        &:visited {
            color: mc-color($link, 500);
        }

        &.mc-active,
        &.mc-hovered,
        &:active,
        &:hover {
            color: mc-color($link, 700);
        }

        &:hover.cdk-keyboard-focused,
        &.mc-hovered.cdk-keyboard-focused,
        &:hover.mc-focused {
            outline: none;
            box-shadow: 0 0 0 2px mc-color($link, 500);
            color: mc-color($link, 700);
        }

        &.mc-focused,
        &.cdk-keyboard-focused {
            color: mc-color($link, 500);
            border-color: mc-color($link, 500);
            box-shadow: 0 0 0 2px mc-color($link, 500);
        }

        &[disabled] {
            color: $link-disabled !important;
            box-shadow: none;

            &.mc-focused,
            &:focus {
                border-color: $link-disabled;
                box-shadow: none;
            }
        }

        &.mc-link_underlined {

            & > .mc-link__text {
                @include _mc-link-dashes_mixin(mc-color($link, 500), 100%, 0.32);
            }

            &.mc-visited,
            &:visited {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin(mc-color($link, 500), 100%, 0.32);
                }
            }

            &.mc-active,
            &.mc-hovered,
            &.mc-focused,
            &:active,
            &:hover,
            &:focus {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin(mc-color($link, 700), 100%, 0.32);
                }
            }

            &[disabled] {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin($link-disabled, 100%, 0.32*0.3);
                }
            }
        }

        &.mc-link_dashed {

            & > .mc-link__text {
                @include _mc-link-dashes_mixin(mc-color($link, 500));
            }

            &.mc-visited,
            &:visited {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin(mc-color($link, 500));
                }
            }

            &.mc-active,
            &.mc-hovered,
            &.mc-focused,
            &:active,
            &:hover,
            &:focus {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin(mc-color($link, 700));
                }
            }

            &[disabled] {
                & > .mc-link__text {
                    @include _mc-link-dashes_mixin($link-disabled, 66%, 0.32*0.3);
                }
            }
        }
    }
}






// TODO: Its only for testing colors


// This mixin will ensure that lines that overflow the container will hide the overflow and
// truncate neatly with an ellipsis.
@mixin mc-truncate-line() {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

// Mixin to provide all mc-line styles, changing secondary font size based on whether the list is in dense mode.
@mixin mc-line-base($secondary-font-size) {
    .mc-line {
        @include mc-truncate-line();

        display: block;
        box-sizing: border-box;

        // all lines but the top line should have smaller text
        &:nth-child(n + 2) {
            font-size: $secondary-font-size;
        }
    }
}

// This mixin normalizes default element styles, e.g. font weight for heading text.
@mixin mc-normalize-text() {
    & > * {
        margin: 0;
        padding: 0;
        font-weight: normal;
        font-size: inherit;
    }
}

// This mixin provides base styles for the wrapper around mc-line elements in a list.
@mixin mc-line-wrapper-base() {
    @include mc-normalize-text();

    display: flex;
    flex-direction: column;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;

    // Must remove wrapper when lines are empty or it takes up horizontal
    // space and pushes other elements to the right.
    &:empty {
        display: none;
    }
}

.mc-no-select {
    -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* Internet Explorer/Edge */
    user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
}



@mixin mc-list-theme($theme) {
    $primary: map-get($theme, primary);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-list,
    .mc-list-selection {
        .mc-subheader {
            color: mc-color($foreground, secondary-text);
        }
    }

    .mc-list-item {
        color: mc-color($foreground, text);
    }

    .mc-list-option {
        outline: none;

        color: mc-color($foreground, text);

        &:hover,
        &.mc-hovered {
            background: mc-color($background, hover);
        }

        &.mc-focused {
            border-color: mc-color($primary);
        }

        &.mc-selected {
            background: mc-color($primary, if($is-dark-theme, 700, 100));
        }

        &[disabled] {
            background: transparent;

            color: mc-color($foreground, disabled-text);
        }
    }
}

@mixin mc-list-typography($config) {
    .mc-list-item,
    .mc-list-option {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-list,
    .mc-list-selection {
        // todo now we are not use it
        .mc-subheader {
            font-family: mc-font-family($config, subheading);
            font-size: mc-font-size($config, subheading);
            font-weight: mc-font-weight($config, subheading);
        }
    }
}






@mixin mc-tree-theme($theme) {
    $primary: map-get($theme, primary);

    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-tree-node {
        color: mc-color($foreground, text);

        &.mc-focused {
            border-color: mc-color($primary);
        }

        &:hover,
        &.mc-hovered {
            background-color: mc-color($background, hover);
        }

        &.mc-selected {
            background: mc-color($primary, if($is-dark-theme, 700, 100));
        }

        &[disabled] {
            background-color: transparent;

            color: mc-color($foreground, disabled-text);
        }
    }
}

@mixin mc-tree-typography($config) {
    .mc-tree-node {
        @include mc-typography-level-to-styles($config, body);
    }
}





@mixin mc-radio-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark: map-get($theme, is-dark);

    $focus-color: mc-color($primary);

    .mc-radio-group {
        color: map-get($foreground, text);
    }

    .mc-radio-button {
        & .mc-radio-button__outer-circle {
            background: map-get($background, background);
            border-color: mc-color($second);
        }

        &:hover {
            & .mc-radio-button__outer-circle {
                background: mix(map-get($background, background), map-get($background, hover), 5);
            }
        }

        &.mc-checked {
            & .mc-radio-button__outer-circle {
                background: white;

                border-color: mc-color($primary, if($is-dark, lighter, darker));
            }

            & .mc-radio-button__inner-circle {
                display: block;

                border-color: if($is-dark, mc-color($primary, 600), mc-color($primary));
            }
        }

        & .mc-radio-input:focus {
            + .mc-radio-label-content .mc-radio-button__outer-circle {
                border-color: $focus-color;

                box-shadow: 0 0 0 2px $focus-color;
            }

            + .mc-radio-label-content .mc-radio-button__inner-circle {
                box-shadow: 0 0.0.1-a73ab4cpx white;
            }
        }

        &.mc-disabled {
            color: map-get($foreground, disabled-text);

            & .mc-radio-label {
                cursor: default;
            }

            & .mc-radio-button__outer-circle {
                border-color: map-get($background, button-border);

                background: map-get($background, button-bg);
            }

            & .mc-radio-button__inner-circle {
                border-color: map-get($background, button-bg);

                box-shadow: none;

                background: mc-color($second, 200);
            }
        }
    }
}

@mixin mc-radio-typography($config) {
    .mc-radio-group {
        @include mc-typography-level-to-styles($config, body);
    }
}



// Width and height of input toggles
$mc-toggle-size: 16px !default;

$zindex-modal-mask      : 1000;
$zindex-modal           : 1000;
$zindex-notification    : 1010;
$zindex-message         : 1010;
$zindex-popover         : 1030;
$zindex-picker          : 1050;
$zindex-dropdown        : 1050;
$zindex-tooltip         : 1060;


@mixin mc-checkbox-theme($theme) {
    $hover-lighten: 5%;

    $primary: map-get($theme, primary);
    $second: map-get($theme, second);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark: map-get($theme, is-dark);

    $focus-color: mc-color($primary);

    .mc-checkbox-frame {
        border-color: mc-color($second);

        & .mc-checkbox-checkmark,
        & .mc-checkbox-mixedmark {
            color: white;
        }
    }

    .mc-checkbox {
        color: map-get($foreground, text);

        &:hover {
            .mc-checkbox-frame {
                background: mix(map-get($background, background), map-get($background, hover), 5);
            }
        }

        &.mc-checked,
        &.mc-indeterminate {
            .mc-checkbox-frame {
                border-color: mc-color($primary, if($is-dark, lighter, darker));

                background: if($is-dark, mc-color($primary, 600), mc-color($primary));
            }
        }

        & .mc-checkbox-input.cdk-focused {
            + .mc-checkbox-frame {
                border-color: $focus-color;

                box-shadow: inset 0 0.0.1-a73ab4cpx white, 0 0.0.1-a73ab4cpx $focus-color;
            }
        }

        &.mc-disabled {
            color: map-get($foreground, disabled-text);

            .mc-checkbox-frame {
                border-color: map-get($background, button-border);

                background-color: map-get($background, button-bg);
            }

            .mc-checkbox-checkmark,
            .mc-checkbox-mixedmark {
                color: map-get($foreground, disabled-text);
            }
        }
    }
}

@mixin mc-checkbox-typography($config) {
    .mc-checkbox {
        @include mc-typography-level-to-styles($config, body);
    }
}




@mixin _mc-navbar-theme-color($theme) {
    $palette: map-get($theme, primary);

    background-color: mc-color($palette, 700);

    mc-navbar-item.mc-navbar-item-active {
        $active-lighten: 5%;
        background-color: lighten(mc-color($palette, 700), $active-lighten)
    }

    mc-navbar-item[disabled] {
        > mc-navbar-title, .mc-navbar-title, [mc-icon] {
            opacity: 0.3;
        }
    }

    mc-navbar-item, .mc-navbar-item, .mc-navbar-title {
        color: mc-color($palette, 100);
    }

    mc-navbar-item, .mc-navbar-item {
        outline: 0;

        &.cdk-focused {
            > .mc-navbar-item {
                outline: 0;
            }
        }
    }

    mc-navbar-item:not([disabled]), .mc-navbar-item:not([disabled]) {

        outline: 0;

        &.cdk-focused {
            border-color: mc-color($palette, 500);
            box-shadow: 0 0.0.1-a73ab4cpx mc-color($palette, 500);
            z-index: 1;

            > .mc-navbar-item {
                outline: 0;
            }
        }
    }

    mc-navbar-item:hover:not([disabled]):not(.mc-progress) {
        $hover-lighten: 5%;
        background-color: lighten(mc-color($palette, 700), $hover-lighten)
    }

    mc-navbar-item.mc-progress:hover:not([disabled]) {
        $bg-lighten: 15%;
        background-color: lighten(mc-color($palette, 800), $bg-lighten);
    }

    .mc-navbar-brand {
        .mc-navbar-title {
            opacity: 0.5;
        }
    }

    .mc-navbar-dropdown {
        background-color: #fff;
        border-color: mc-color($mc-grey, 300);
        box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.2);

        &-link {
            color: mc-color($mc-grey, 700);
            outline: none;

            &:hover {
                background-color: $black-6-opacity;
            }

            &.cdk-focused {
                border-color: mc-color($palette, 500);
            }

            &:active,
            &.is-active {
                background-color: mc-color($palette, 100);

                &:hover::before {
                    background-color: $black-6-opacity;
                }
            }
        }
    }
}

@mixin mc-navbar-theme($theme) {
    .mc-navbar {
        @include _mc-navbar-theme-color($theme);
    }
}

@mixin mc-navbar-typography($config) {
    .mc-navbar-title,
    .mc-navbar-dropdown {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-navbar-item {
        .mc-navbar-title {
            @include mc-typography-level-to-styles($config, body);
        }
    }

    .mc-navbar-brand {
        .mc-navbar-title {
            @include mc-typography-level-to-styles($config, title);
        }
    }
}




@mixin mc-input-theme($theme) {
    $foreground: map-get($theme, foreground);

    .mc-input {
        color: map-get($foreground, text);;

        &::placeholder {
            color: map-get($foreground, disabled-text);;
        }

        &::-ms-input-placeholder {
            color: map-get($foreground, disabled-text);;
        }

        &::-webkit-input-placeholder {
            color: map-get($foreground, disabled-text);;
        }
    }
}

@mixin mc-input-typography($config) {
    .mc-input {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-input.mc-input_monospace {
        @include mc-typography-level-to-styles($config, body-mono);
    }
}





@mixin mc-form-field-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-form-field {
        background: {
            color: map-get($background, background);
        }

        .mc-form-field__container {
            border: {
                color: mc-color($second);
            }
        }

        &:not(.mc-form-field_without-borders) {

            &:hover .mc-form-field__container {
                border: {
                    color: mc-color($second, if($is-dark-theme, lighter, darker));
                }
            }

            &.mc-focused:not(.ng-invalid) .mc-form-field__container {
                border: {
                    color: mc-color($primary);
                }

                box-shadow: 0 0.0.1-a73ab4cpx mc-color($primary);
            }

            &.ng-invalid .mc-form-field__container {
                background: {
                    color: if($is-dark-theme, transparent, mc-color($error, lighter));
                }

                border: {
                    color: mc-color($error);
                }

                .mc-input,
                .mc-textarea {
                    color: mc-color($error);
                }
            }

            &.ng-invalid.mc-focused .mc-form-field__container {
                box-shadow: 0 0.0.1-a73ab4cpx mc-color($error);
            }

            &.mc-disabled .mc-form-field__container {
                border: {
                    color: mix(map-get($background, button-border), map-get($background, disabled-overlay));
                }

                background: {
                    color: mix(map-get($background, button-bg), map-get($background, disabled-overlay));
                }

                .mc-icon,
                .mc-input,
                .mc-textarea {
                    color: mc-color($foreground, disabled-text);
                }
            }
        }
    }

    .mc-form-field__hint {
        color: mc-color($second, 400);
    }
}

@mixin mc-form-field-typography($config) {
    .mc-form-field {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-form-field__hint {
        @include mc-typography-level-to-styles($config, caption);
    }
}







@mixin mc-modal-theme($theme) {

    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $hover-darken: 5%;

    .mc-modal {
        &-title {
            color: mc-color($second, 700);
        }

        &-header {
            border-bottom: 1px solid mc-color($second, 60);
        }

        &-content {
            box-shadow:
                0 0.0.1-a73ab4cpx mc-color($second, 300),
                0 6px 12px 0 rgba(0, 0, 0, 0.5);
        }

        &-footer {
            background-color: mc-color($second, 60);
        }


        &-close-x {

            .mc-closer__icon {
                color: mc-color($second, 200);
            }

            &:hover .mc-closer__icon {
                color: darken(mc-color($second, 200), $hover-darken);
            }
        }
    }

    .mc-confirm {

        .mc-confirm-btns {
            background-color: mc-color($second, 60);
            border-top: 1px solid mc-color($second, 60);
        }
    }
}

@mixin mc-modal-typography($config) {

    .mc-modal {
        &-title {
            @include mc-typography-level-to-styles($config, title);
        }

        .mc-modal-body {
            @include mc-typography-level-to-styles($config, body);
        }
    }

    .mc-confirm {
        .mc-modal-body {
            @include mc-typography-level-to-styles($config, body);
        }
    }
}






@mixin mc-option-theme($theme) {
    $primary: map-get($theme, primary);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-option {
        color: mc-color($foreground, text);

        &:hover:not(.mc-disabled),
        &.mc-hovered:not(.mc-disabled) {
            .mc-option-overlay {
                background: mc-color($background, hover);
            }
        }

        &.mc-active {
            border-color: mc-color($primary);
        }

        &.mc-selected {
            // todo пока непонятно откуда брать эти цвета
            background: mc-color($primary, if($is-dark-theme, 700, 100));
        }

        &.mc-disabled {
            background: transparent;

            color: mc-color($foreground, disabled-text);
        }
    }
}

@mixin mc-option-typography($config) {
    .mc-option {
        @include mc-typography-level-to-styles($config, body);
    }
}







@mixin _mc-tag-color($main-color, $focus-color, $foreground, $background, $is-dark-theme) {
    color: mc-color($foreground, text);

    background: mc-color($main-color, if($is-dark-theme, 700, 100));
    border-color: mc-color($main-color, if($is-dark-theme, 700, 100));

    &.mc-active,
    &.mc-focused {
        border-color: mc-color($focus-color);
        box-shadow: 0 0.0.1-a73ab4cpx mc-color($focus-color);
    }

    &.mc-disabled {
        border-color: mix(mc-color($main-color), transparent, 10%);
        background: mix(mc-color($main-color), transparent, 10%);

        color: mix(mc-color($main-color), transparent, 50%);
    }

    &:not(.mc-disabled) .mc-icon {
        color: mix(mc-color($main-color, 400), mc-color($background, hover));

        &:hover {
            cursor: pointer;
            color: mc-color($main-color, if($is-dark-theme, lighter, darker));
        }
    }
}

@mixin mc-tag-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark-theme: map-get($theme, is-dark);

    .mc-tag {
        &.mc-primary {
            @include _mc-tag-color($primary, $primary, $foreground, $background, $is-dark-theme);
        }

        &.mc-second {
            @include _mc-tag-color($second, $primary, $foreground, $background, $is-dark-theme);
        }

        &.mc-error {
            @include _mc-tag-color($error, $error, $foreground, $background, $is-dark-theme);
        }

        &:hover:not(.mc-disabled),
        &.mc-hovered:not(.mc-disabled) {
            & .mc-tag-overlay {
                background: mc-color($background, hover);
            }
        }
    }
}

@mixin mc-tag-typography($config) {
    .mc-tag:not(.mc-tag_mono):not(.mc-tag_caps) {
        @include mc-typography-level-to-styles($config, caption);
    }

    .mc-tag_mono {
        @include mc-typography-level-to-styles($config, caption-mono);
    }

    .mc-tag_caps {
        @include mc-typography-level-to-styles($config, caption-caps);
    }
}





@mixin mc-textarea-theme($theme) {
    $foreground: map-get($theme, foreground);

    .mc-input {
        color: map-get($foreground, text);

        &::placeholder {
            color: map-get($foreground, disabled-text);
        }

        &::-ms-input-placeholder {
            color: map-get($foreground, disabled-text);
        }

        &::-webkit-input-placeholder {
            color: map-get($foreground, disabled-text);
        }
    }
}

@mixin mc-textarea-typography($config) {
    textarea.mc-textarea {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-textarea.mc-textarea_monospace {
        @include mc-typography-level-to-styles($config, body-mono);
    }
}






$shadow-color: rgba(0, 0, 0, 0.2);
$box-shadow-base: 0 2px 4px 0 $shadow-color;


@mixin mc-tooltip-theme($theme) {
    $second: map-get($theme, second);
    $tooltip-arrow-bg: mc-color($second, 700);

    .mc-tooltip-inner {
        background-color: mc-color($second, 700);
        color: white;
    }

    .mc-tooltip_placement-top .mc-tooltip-arrow {
        border-top-color: $tooltip-arrow-bg;
    }

    .mc-tooltip_placement-right .mc-tooltip-arrow {
        border-right-color: $tooltip-arrow-bg;
    }

    .mc-tooltip_placement-left .mc-tooltip-arrow {
        border-left-color: $tooltip-arrow-bg;
    }

    .mc-tooltip_placement-bottom .mc-tooltip-arrow {
        border-bottom-color: $tooltip-arrow-bg;
    }
}

@mixin mc-tooltip-typography($config) {

    .mc-tooltip,
    .mc-tooltip-inner {

        @include mc-typography-level-to-styles($config, caption);
    }
}





$hover-darken: 5%;

@mixin mc-toggle-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);

    $is-dark: map-get($theme, is-dark);

    .mc-toggle {
        color: map-get($foreground, text);

        .mc-toggle-bar {
            background: map-get($background, button-bg);
            border-color: mc-color($background, button-border);
        }

        .mc-toggle__circle {
            border-color: mc-color($background, button-border);

            background: linear-gradient(to bottom, white, if($is-dark, white, mc-color($second, lighter)));
        }

        &.mc-toggle_off {
            .mc-toggle-bar {
                background: linear-gradient(to bottom, mc-color($second, lighter), mc-color($background, button-bg));

                @if $is-dark {
                    background: map-get($background, background);
                }
            }
        }

        &:hover {
            & .mc-toggle__focus-frame {
                background: map-get($background, hover);
            }
        }

        &.cdk-keyboard-focused {
            & .mc-toggle__focus-frame {
                box-shadow: inset 0 0.0.1-a73ab4cpx map-get($background, background), 0 0 0 2px mc-color($primary);
            }
        }

        &.mc-primary:not(.mc-toggle_off) {
            .mc-toggle-bar {
                border-color: mc-color($primary);
                background: mc-color($primary);
            }
        }

        &.mc-error:not(.mc-toggle_off) {
            .mc-toggle-bar {
                border-color: mc-color($error);
                background: mc-color($error);
            }
        }

        &.mc-disabled {
            color: map-get($foreground, disabled-text);

            &.mc-toggle_off {
                .mc-toggle-bar {
                    @if $is-dark {
                        background: map-get($mc-grey, 700);
                    }
                }
            }

            & .mc-toggle__focus-frame {
                background: map-get($background, disabled-overlay);
            }
        }
    }
}


@mixin mc-toggle-typography($config) {
    .mc-toggle:not(.mc-toggle_small) {
        @include mc-typography-level-to-styles($config, body);
    }

    .mc-toggle.mc-toggle_small {
        @include mc-typography-level-to-styles($config, caption);
    }
}



@mixin mosaic-typography($config: null) {
    @if $config == null {
        $config: mc-typography-config();
    }

    @include mc-base-typography($config);

    @include mc-link-typography($config);
    @include mc-alert-typography($config);
    @include mc-badge-typography($config);
    @include mc-button-typography($config);
    @include mc-dropdown-typography($config);
    @include mc-list-typography($config);
    @include mc-radio-typography($config);
    @include mc-checkbox-typography($config);
    @include mc-tree-typography($config);
    @include mc-navbar-typography($config);
    @include mc-input-typography($config);
    @include mc-form-field-typography($config);
    @include mc-tooltip-typography($config);
    @include mc-modal-typography($config);
    @include mc-option-typography($config);
    @include mc-tag-typography($config);
    @include mc-textarea-typography($config);
    @include mc-toggle-typography($config);
}



// Mixin that renders all of the core styles that are not theme-dependent.
@mixin mc-core($typography-config: null) {
    @include mosaic-typography($typography-config);
    @include cdk-a11y();
    @include cdk-overlay();
}

// Mixin that renders all of the core styles that depend on the theme.
@mixin mc-core-theme($theme) {
    @include mc-pseudo-checkbox-theme($theme);

    .mc-app-background {
        $background: map-get($theme, background);
        $foreground: map-get($theme, foreground);

        background-color: mc-color($background, background);
        color: mc-color($foreground, text);
    }
}






@mixin mc-panel-theme($theme) {
    $backgroundColor: map-get(map-get($theme, background), background);
    $borderColor: map-get($mc-grey, 60);

    .mc-panel {
        background-color: $backgroundColor;
        border: 1px solid $borderColor;
    }
}








@mixin normal-state($color, $second, $isDark) {
    box-shadow:
        inset -1px 0 0 0 mc-color($second, if($isDark, darker, lighter)),
        inset 0 1px 0 0 mc-color($second, if($isDark, darker, lighter)),
        inset 0 -1px 0 0 mc-color($second, if($isDark, darker, lighter));

    background-color: mc-color($color, if($isDark, darker, lighter));

    border-left-color: mc-color($color);
}

@mixin mc-card-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $info: map-get($theme, info);
    $success: map-get($theme, success);
    $warning: map-get($theme, warning);

    $isDark: map-get($theme, is-dark);

    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);

    .mc-card {
        color: map-get($foreground, text);
        
        &.mc-card_info {
            @include normal-state($info, $second, $isDark);

            // todo для mc-card_selected в темной теме макеты не готовы
            &.mc-card_selected {
                background-color: mc-color($primary, 100);
            }
        }
        
        &.mc-card_warning {
            @include normal-state($warning, $second, $isDark);
            
            &.mc-card_selected {
                background-color: mc-color($primary, 100);
            }
        }

        &.mc-card_success {
            @include normal-state($success, $second, $isDark);
            
            &.mc-card_selected {
                background-color: mc-color($primary, 100);
            }
        }
        
        &.mc-card_error {
            @include normal-state($error, $second, $isDark);
            
            &.mc-card_selected {
                background-color: mc-color($primary, 100);
            }
        }
        
        &.mc-card_white {
            background-color: mix(map-get($background, background), white, 90%);
        }

        // todo мне кажется тут можно сделать без overlay
        &:not(.mc-card_readonly):hover {
            .mc-card__overlay {
                background: map-get($background, hover);
            }
        }

        &.cdk-keyboard-focused {
            box-shadow: 0 0 0 2px mc-color($primary);
        }
    }
}







@mixin mc-icon-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $primary-color: mc-color($primary, 400);
    $second-color: mc-color($second);
    $error-color: mc-color($error);

    // Дефолтные серые иконки default-icon: лупа в поле, иконки дропдаунов v, все иконки вне полей.
    .mc-icon:not(.mc-icon_light) {
        &.mc-primary {
            color: mix(map-get($foreground, default-icon), $primary-color, 30%);

            &[disabled],
            &.mc-disabled {
                color: $primary-color;
            }
        }

        &.mc-second {
            // todo Миша, less-contrast-text - в темной теме не такой как на макетах.
            color: map-get($foreground, less-contrast-text);

            &[disabled],
            &.mc-disabled {
                color: mc-color($second);
            }
        }

        &.mc-error {
            color: mix(map-get($foreground, default-icon), $error-color, 30%);

            &[disabled],
            &.mc-disabled {
                color: $error-color;
            }
        }

        .mc-icon:not(.mc-primary):not(.mc-second):not(.mc-error) {
            color: map-get($foreground, text);
        }
    }

    // Облегченные серые иконки less-contrast-icon нужны тогда, когда действие, которое они делают не дефолтное и
    // не самое важное. Не используются вне инпутов или селектов.
    .mc-icon.mc-icon_light {
        &.mc-primary {
            color: $primary-color;

            &:hover {
                color: mix(map-get($foreground, text), $primary-color);
            }
        }

        &.mc-second {
            color: $second-color;

            &:hover {
                color: mix(map-get($foreground, text), $second-color, 90%);
            }
        }

        &.mc-error {
            color: $error-color;

            &:hover {
                color: mix(map-get($foreground, text), $error-color);
            }
        }
    }
}

@mixin mc-icon-typography($config) {
    .mc-icon {
        font: {
            size:   mc-font-size($config, button);
            family: mc-font-family($config, button);
            weight: mc-font-weight($config, button);
        }
    }
}






@mixin mc-progress-bar-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    .mc-progress-bar {
        background-color: mc-color($second, 60);

        &.mc-primary &__line {
            background-color: mc-color($primary, 500);
        }

        &.mc-second &__line {
            background-color: mc-color($second, 500);
        }

        &.mc-error &__line {
            background-color: mc-color($error, 500);
        }
    }
}





@mixin mc-progress-spinner-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    .mc-progress-spinner {
        &.mc-primary &__circle {
            stroke: mc-color($primary, 500);
        }

        &.mc-second &__circle {
            stroke: mc-color($second, 500);
        }

        &.mc-error &__circle {
            stroke: mc-color($error, 500);
        }
    }
}













@mixin mc-select-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);
    $error: map-get($theme, error);

    $foreground: map-get($theme, foreground);
    $background: map-get($theme, background);

    $is-dark: map-get($theme, is-dark);

    .mc-select {
        color: map-get($foreground, text);

        &.ng-invalid {
            color: mc-color($error);
        }

        &.mc-disabled {
            color: mc-color($foreground, disabled-text);
        }
    }

    .mc-select__panel {
        border: {
            color: mc-color($second);
        }

        // todo A-black-200 нет в палитре
        box-shadow: 0 3px 3px 0 rgba(0, 0, 0, 0.2);

        background-color: if($is-dark, map-get($second, 700), map-get($background, background));
    }
}

@mixin mc-select-typography($config) {
    .mc-select,
    .mc-select__panel {
        @include mc-typography-level-to-styles($config, body);
    }
}






@mixin mc-splitter-theme($theme) {
    $primary: map-get($theme, primary);
    $second: map-get($theme, second);

    mc-gutter {
        background-color: mc-color($second, 60);
        color: mc-color($second, 600);

        &:hover {
            background-color: mc-color($second, 100);
            color: mc-color($second, 800);
        }

        &[disabled] {
            background-color: mc-color($second, 60);
            color: mc-color($second, 600);
        }
    }
}



@mixin mosaic-theme($theme) {

    @include mc-core-theme($theme);

    @include mc-link-theme($theme);
    @include mc-alert-theme($theme);
    @include mc-badge-theme($theme);
    @include mc-button-theme($theme);
    @include mc-dropdown-theme($theme);
    @include mc-card-theme($theme);
    @include mc-icon-theme($theme);
    @include mc-list-theme($theme);
    @include mc-panel-theme($theme);
    @include mc-progress-bar-theme($theme);
    @include mc-progress-spinner-theme($theme);
    @include mc-radio-theme($theme);
    @include mc-checkbox-theme($theme);
    @include mc-tree-theme($theme);
    @include mc-navbar-theme($theme);
    @include mc-input-theme($theme);
    @include mc-form-field-theme($theme);
    @include mc-modal-theme($theme);
    @include mc-select-theme($theme);
    @include mc-option-theme($theme);
    @include mc-tag-theme($theme);
    @include mc-toggle-theme($theme);
    @include mc-tooltip-theme($theme);
    @include mc-textarea-theme($theme);
    @include mc-splitter-theme($theme);
}
